"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3861],{3861:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var a=s(7757),i=s.n(a);function n(t,e,s,a,i,n,l){try{var c=t[n](l),r=c.value}catch(t){return void s(t)}c.done?e(r):Promise.resolve(r).then(a,i)}function l(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var l=t.apply(e,s);function c(t){n(l,a,i,c,r,"next",t)}function r(t){n(l,a,i,c,r,"throw",t)}c(void 0)}))}}const c={props:["course_name"],data:function(){return{isAdding:!1,valid:!0,cl_id:null,classList:[],email:null,InviteDetails:{},emailRules:[function(t){return!!t||"Required"},function(t){return/.+@.+\..+/.test(t)||"Email must be valid"}]}},methods:{fetchClassnames:function(){var t=this;return l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/class/allnames/"+t.$route.params.id+"/0").then((function(e){t.classList=e.data,t.cl_id=t.classList[0].class_id}));case 1:case"end":return e.stop()}}),e)})))()},InviteStudent:function(){var t=this;return l(i().mark((function e(){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.isAdding=!0,t.InviteDetails.course_id=t.$route.params.id,t.InviteDetails.class_id=t.cl_id,t.InviteDetails.course_name=t.course_name,t.InviteDetails.email=t.email,s=0;s<t.classList.length;s++)t.cl_id==t.classList[s].class_id&&(t.InviteDetails.class_name=t.classList[s].class_name,t.InviteDetails.class_code=t.classList[s].class_code);axios.post("/api/teacher/invite-student",t.InviteDetails).then((function(e){200==e.status&&(t.$emit("toggleconfirm"),t.toastSuccess("Invite successfully send"),t.isAdding=!1)})).catch((function(e){t.toastError("Something went wrong while sending invite!"),t.isAdding=!1}));case 7:case"end":return e.stop()}}),e)})))()},validate:function(){this.$refs.InviteForm.validate()&&this.InviteStudent()}},mounted:function(){this.fetchClassnames()}};const r=(0,s(1900).Z)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-form",{ref:"InviteForm",staticClass:"text-center",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-title",[s("span",{staticClass:"text-h5 mb-2"},[t._v("Add Student")])]),t._v(" "),s("v-card-text",[s("v-container",{attrs:{"ma-0":"","pa-0":""}},[s("v-row",[s("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"12"}},[s("v-select",{ref:"selectClass",attrs:{id:"selectClass",items:t.classList,"item-text":"class_name","item-value":"class_id",label:"Class",outlined:""},model:{value:t.cl_id,callback:function(e){t.cl_id=e},expression:"cl_id"}})],1),t._v(" "),s("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"12"}},[s("v-text-field",{attrs:{rules:t.emailRules,type:"email",outlined:"",label:"Email",hint:"Please use a working valid email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1),t._v(" "),s("small",[t._v("For unregistered users, type email account above to send invite link through their email.")])],1),t._v(" "),s("v-card-actions",{staticClass:"pb-3"},[s("v-spacer"),t._v(" "),s("v-btn",{staticClass:"pl-8 pr-8",attrs:{color:"primary",outlined:"",rounded:""},on:{click:function(e){return t.$emit("toggleCancelDialog")}}},[t._v("\r\n            Cancel\r\n            ")]),t._v(" "),s("v-btn",{staticClass:"pl-12 pr-12",attrs:{color:"primary",rounded:"",loading:t.isAdding,disabled:!t.valid},on:{click:function(e){return t.validate()}}},[t._v("\r\n            Add\r\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);