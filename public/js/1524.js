"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1524],{3186:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(1519),a=s.n(r)()((function(e){return e[1]}));a.push([e.id,".v-input__slot{margin-bottom:0!important}",""]);const i=a},1524:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var r=s(629),a=s(9669),i=s.n(a);function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={data:function(){return{Deldialog:!1,dialog:!1,temp_id:"",IsDeleting:!1,IsAddUpdating:!1,IsResetting:!1,IsResetting_id:null,deleteIndex:null,type:"",search:"",valid:!0,role:["Teacher","Student"],form:new Form({firstName:"",middleName:"",lastName:"",email:"",password:"",password_confirmation:""}),nameRules:[function(e){return!!e||"Field is required"},function(e){return e&&e.length<=20||"Name must be less than 20 characters"}],loginEmailRules:[function(e){return!!e||"Field is required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}],RoleRules:[function(e){return!!e||"Field is required"}],show:!1,show1:!1,rules:{required:function(e){return!!e||"Field is required."},min:function(e){return e&&e.length>=6||"min 6 characters"}},headers:[{text:"ID",value:"user_id",align:"start"},{text:"Last Name",value:"lastName",align:"start"},{text:"First Name",value:"firstName",align:"start"},{text:"Middle Name",value:"middleName",align:"start"},{text:"Email",value:"email",align:"start"},{text:"Password Reset",sortable:!1},{text:"Actions",sortable:!1}],teacherList:[]}},computed:o(o({},(0,r.Se)(["getTeachers","filterTeacher"])),{},{filteredItems:function(){var e=this;return this.search?this.teacherList.filter((function(t){return e.search.toLowerCase().split(" ").every((function(e){return t.firstName.toLowerCase().includes(e)||t.lastName.toLowerCase().includes(e)||t.middleName.toLowerCase().includes(e)||t.user_id.toString().includes(e)}))})):this.teacherList}}),methods:{SetPassword:function(e){var t=e.replace(/\s+/g,"-").toLowerCase();this.form.password="ISU-"+t,this.show=!0},openAdd:function(){this.type="add",this.dialog=!0},openEdit:function(e){this.type="edit",this.dialog=!0;var t=this.filterTeacher(e);this.form.user_id=t.user_id,this.form.firstName=t.firstName,this.form.middleName=t.middleName,this.form.lastName=t.lastName,this.form.email=t.email},openDelete:function(e,t){this.deleteIndex=t,this.delId=e,this.Deldialog=!0},updatePass:function(e){var t=this;this.IsResetting_id=e,this.IsResetting=!0,i().post("/api/admin/teachers/reset-password/"+e).then((function(e){t.toastSuccess(e.data),t.IsResetting=!1}))},deleteUser:function(){var e=this;this.IsDeleting=!0,i().delete("/api/admin/teachers/remove/"+this.delId).then((function(t){200==t.status?(e.getTeachers.splice(e.deleteIndex,1),e.toastSuccess("User Successfully removed!"),e.IsDeleting=!1):(e.toastError("Something went wrong!"),e.IsDeleting=!1),e.Deldialog=!1,e.$store.dispatch("fetchAllTeachers")}))},updateTeacherDetails:function(){this.$store.dispatch("updateTeacher",this.form)},validate:function(){var e=this;this.$refs.RegisterForm.validate()?(this.IsAddUpdating=!0,"add"==this.type&&(this.form.password_confirmation=this.form.password,this.form.post("/api/admin/add/teacher").then((function(t){200==t.status?(e.$refs.RegisterForm.reset(),e.valid=!0,e.dialog=!1,e.$store.dispatch("fetchAllTeachers"),e.toastSuccess("User Successfully Added!"),e.IsAddUpdating=!1):(e.IsAddUpdating=!1,e.toastError("Something went wrong!"))})).catch((function(t){e.IsAddUpdating=!1,e.toastError("Something went wrong!")}))),"edit"==this.type&&this.form.post("/api/admin/teachers/update/"+this.form.user_id).then((function(t){200==t.status?(e.$refs.RegisterForm.reset(),e.valid=!0,e.dialog=!1,e.IsAddUpdating=!1,e.$store.dispatch("fetchAllTeachers").then((function(){e.teacherList=e.getTeachers})),e.toastSuccess("User Successfully Updated!")):(e.IsAddUpdating=!1,e.toastError("Something went wrong!"))})).catch((function(t){e.IsAddUpdating=!1,e.toastError("Something went wrong!")}))):(this.IsAddUpdating=!1,this.valid=!1)}},mounted:function(){var e=this;this.$store.dispatch("fetchAllTeachers").then((function(){e.teacherList=e.getTeachers}))}};var c=s(2446),m=s.n(c),u=s(3186),f={insert:"head",singleton:!1};m()(u.Z,f);u.Z.locals;const v=(0,s(1900).Z)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pt-4"},[s("h2",[e._v("\n        Manage Instructors\n    ")]),e._v(" "),s("v-btn",{attrs:{bottom:"",color:"primary",dark:"",fab:"",fixed:"",right:""},on:{click:function(t){return e.openAdd()}}},[s("v-icon",[e._v("mdi-plus")])],1),e._v(" "),s("v-row",{staticClass:"pt-2"},[s("v-col",[s("v-card",{attrs:{elevation:"2"}},[s("v-card-title",[e._v("\n                    Instructors\n\n                    "),s("v-spacer"),e._v(" "),s("div",{attrs:{width:"30%"}},[s("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.filteredItems,"items-per-page":10},scopedSlots:e._u([{key:"body",fn:function(t){var r=t.items;return[s("tbody",[e._l(r,(function(t,r){return s("tr",{key:r},[s("td",[e._v(" "+e._s(t.user_id)+" ")]),e._v(" "),s("td",[e._v(" "+e._s(t.lastName)+" ")]),e._v(" "),s("td",[e._v(" "+e._s(t.firstName)+" ")]),e._v(" "),s("td",[e._v(" "+e._s(t.middleName)+" ")]),e._v(" "),s("td",[e._v(" "+e._s(t.email)+" ")]),e._v(" "),s("td",[s("v-btn",{attrs:{color:"primary",disabled:e.IsResetting&&e.IsResetting_id==t.user_id},on:{click:function(s){return e.updatePass(t.user_id)}}},[e._v("\n                                        "+e._s(e.IsResetting&&e.IsResetting_id==t.user_id?"Reseting...":" Reset Password")+"\n                                    ")])],1),e._v(" "),s("td",[s("v-btn",{attrs:{icon:"",color:"success"},on:{click:function(s){return e.openEdit(t.user_id)}}},[s("v-icon",[e._v("\n                                            mdi-pencil\n                                        ")])],1),e._v(" "),s("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(s){return e.openDelete(t.user_id,r)}}},[s("v-icon",[e._v("\n                                            mdi-delete\n                                        ")])],1)],1)])})),e._v(" "),0==r.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"42"}},[e._v(" No data available")])]):e._e()],2)]}}])})],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",{},[e._v("\n                "+e._s("add"==this.type?"Add Teacher":"Update Teacher")+"\n            ")]),e._v(" "),s("v-divider"),e._v(" "),s("v-container",[s("v-form",{ref:"RegisterForm",staticClass:"text-center ",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-row",{staticClass:"pa-5"},[s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:e.form,field:"firstName"}}),e._v(" "),s("v-text-field",{attrs:{rules:e.nameRules,label:"First Name",name:"firstName",type:"text",color:"primary",outlined:""},model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}})],1),e._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:e.form,field:"middleName"}}),e._v(" "),s("v-text-field",{attrs:{label:"Middle Name",rules:e.nameRules,name:"middleName",type:"text",color:"primary",outlined:""},model:{value:e.form.middleName,callback:function(t){e.$set(e.form,"middleName",t)},expression:"form.middleName"}})],1),e._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:e.form,field:"lastName"}}),e._v(" "),s("v-text-field",{attrs:{label:"Last Name",rules:e.nameRules,name:"lastname",type:"text",color:"primary",outlined:""},on:{keyup:function(t){return e.SetPassword(e.form.lastName)}},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1),e._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:e.form,field:"email"}}),e._v(" "),s("v-text-field",{attrs:{autocomplete:"false",label:"Email",name:"Email",rules:e.loginEmailRules,type:"email",color:"primary",outlined:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),"add"==e.type?s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:e.form,field:"password"}}),e._v(" "),s("v-text-field",{attrs:{autocomplete:"off","append-icon":e.show?"mdi-eye":"mdi-eye-off",label:"Password",name:"password",type:e.show?"text":"password",color:"primary",rules:[e.rules.required,e.rules.min],counter:"",outlined:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dialog=!1,e.$refs.RegisterForm.reset()}}},[e._v("Cancel")]),e._v(" "),s("v-btn",{attrs:{text:"",loading:e.IsAddUpdating,disabled:e.IsAddUpdating},on:{click:function(t){return e.validate()}}},[e._v("\n                    "+e._s("add"==this.type?"Add":"Update"))])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.Deldialog,callback:function(t){e.Deldialog=t},expression:"Deldialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("\n                Are you sure you want to delete this?\n            ")]),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(t){e.Deldialog=!1,e.$refs.RegisterForm.reset()}}},[e._v("\n                    No\n                ")]),e._v(" "),s("v-btn",{attrs:{loading:e.IsDeleting,color:"primary",text:""},on:{click:function(t){return e.deleteUser()}}},[e._v("\n                    Yes\n                ")])],1)],1)],1)],1)}),[],!1,null,"cfd22048",null).exports}}]);