"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9747],{75586:(t,e,r)=>{r.d(e,{Z:()=>n});var i=r(1519),a=r.n(i)()((function(t){return t[1]}));a.push([t.id,".centered-input[data-v-b3f58e76] input{text-align:right}",""]);const n=a},1161:(t,e,r)=>{r.d(e,{Z:()=>n});var i=r(1519),a=r.n(i)()((function(t){return t[1]}));a.push([t.id,".v-input__slot{margin-bottom:0!important}",""]);const n=a},99747:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const n={data:function(){return{e1:3,Deldialog:!1,dialog:!1,temp_id:"",loading:!1,type:"",search:"",grading_criteria_form:{},new_grading_criteria_form:{name:"",percentage:""},grading_criteria:{},course_id:"",delId:"",time:"",isAdding:!1,valid:!0,UpdateValid:!0,rules:[function(t){return!!t||"Field is required"}],numberRule:[function(t){return!!t||"Field is required"},function(t){return t&&t>=1||"Percentage should not be equal or less than 0"},function(t){return t&&t<=100||"Percentage should not be greater than 100"}]}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,r(20629).Se)(["get_gradingCriteria"])),methods:a({validate:function(){this.$refs.form.validate()&&this.addGradeCriteria()},validateUpdate:function(t,e,r){this.$refs.Updateform.validate()&&this.updateGradeCriteria(t,e,r)},_totalPercent:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.percentage)})),e},back:function(){this.$emit("changeStep",this.e1-2)},next:function(){0==this.get_gradingCriteria.length?this.toastError("Please add atleast one grading criteria to proceed to next step"):this._totalPercent(this.get_gradingCriteria)<100?this.toastError("Total percentage is not equal to 100%"):this.$emit("changeStep",this.e1)},openDelete:function(t){this.delId=t,this.Deldialog=!0},getAllGradeCriteria:function(){this.$store.dispatch("fetchGradingCriteria",this.$route.params.id)},addGradeCriteria:function(){var t=this;if(this.isAdding=!0,""!=this.new_grading_criteria_form.name.trim()||""!=this.new_grading_criteria_form.percentage.trim()){this.loading=!0;var e="";this.new_grading_criteria_form.course_id=this.$route.params.id,this.$store.dispatch("addGradingCriteria",this.new_grading_criteria_form).then((function(r){if("error"==r[0]){for(var i=1;i<r.length;i++)e=r[i]+"<br>"+e;t.toastError(e)}else t.new_grading_criteria_form.name="",t.new_grading_criteria_form.percentage="",t.$refs.form.resetValidation(),t.toastSuccess("Criteria Successfully added");t.isAdding=!1})),setTimeout((function(){t.loading=!1}),500)}else this.toastError("Please fill up all the field to add criteria"),this.isAdding=!1},updateGradeCriteria:function(t,e,r){var i=this;this.loading=!0,this.grading_criteria_form.name=t,this.grading_criteria_form.percentage=e,this.grading_criteria_form.id=r,this.grading_criteria_form.course_id=this.$route.params.id;var a="";this.$store.dispatch("updateGradingCriteria",this.grading_criteria_form).then((function(t){if("error"==t[0]){for(var e=1;e<t.length;e++)a=t[e]+"<br>"+a;i.toastError(a);var n=i.get_gradingCriteria.findIndex((function(t,e){return t.id==r}));i.get_gradingCriteria[n].percentage=0}else i.toastSuccess("Changes have been saved")})),setTimeout((function(){i.loading=!1}),500)},removeGradeCriteria:function(){var t=this;this.loading=!0,this.$store.dispatch("removeGradingCriteria",this.delId).then((function(e){t.Deldialog=!1,setTimeout((function(){t.loading=!1}),500),t.toastSuccess("Criteria successfully deleted ")}))}},"_totalPercent",(function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.percentage)})),e})),mounted:function(){this.getAllGradeCriteria()}};var o=r(72446),s=r.n(o),l=r(75586),c={insert:"head",singleton:!1};s()(l.Z,c);l.Z.locals;var d=r(1161),g={insert:"head",singleton:!1};s()(d.Z,g);d.Z.locals;const u=(0,r(51900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.validate()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[100!=t._totalPercent(t.get_gradingCriteria)?r("v-row",{staticClass:"mx-2"},[r("v-col",{attrs:{lg:"9"}},[r("v-text-field",{attrs:{rules:t.rules,outlined:"",color:"primary",label:"Criteria Name"},model:{value:t.new_grading_criteria_form.name,callback:function(e){t.$set(t.new_grading_criteria_form,"name",e)},expression:"new_grading_criteria_form.name"}})],1),t._v(" "),r("v-col",{staticClass:"float-right",attrs:{lg:"3"}},[r("v-text-field",{staticClass:"centered-input",attrs:{rules:t.numberRule,min:"1",max:"100",type:"number",outlined:"",color:"primary",label:"Percentage",suffix:"%"},model:{value:t.new_grading_criteria_form.percentage,callback:function(e){t.$set(t.new_grading_criteria_form,"percentage",e)},expression:"new_grading_criteria_form.percentage"}})],1)],1):t._e(),t._v(" "),100!=t._totalPercent(t.get_gradingCriteria)?r("v-row",{staticClass:"ma-0 pa-0"},[r("v-col",{staticClass:"float-right mx-2 pt-0"},[r("v-btn",{staticClass:"float-right",attrs:{type:"submit",color:"primary",disabled:t.isAdding,outlined:""}},[r("v-icon",{attrs:{left:""}},[t._v("\n                            mdi-plus\n                        ")]),t._v("\n                        "+t._s(t.isAdding?"Adding...":"Add Criteria")+"\n                    ")],1)],1)],1):t._e()],1),t._v(" "),r("v-divider"),t._v(" "),r("div",{staticClass:"mt-1"},[r("VueElementLoading",{attrs:{active:t.loading,spinner:"bar-fade-scale"}}),t._v(" "),r("v-form",{ref:"Updateform",attrs:{"lazy-validation":""},model:{value:t.UpdateValid,callback:function(e){t.UpdateValid=e},expression:"UpdateValid"}},t._l(t.get_gradingCriteria,(function(e,i){return r("v-row",{key:"get_gradingCriteria"+i,staticClass:"mx-2 mt-0"},[r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{lg:"9"}},[r("v-text-field",{attrs:{label:"Name",rules:t.rules,outlined:"",color:"primary"},on:{change:function(r){return t.validateUpdate(e.name,e.percentage,e.id)}},model:{value:e.name,callback:function(r){t.$set(e,"name",r)},expression:"gradeCriteria.name"}})],1),t._v(" "),r("v-col",{attrs:{lg:"2"}},[r("v-text-field",{staticClass:"text-center centered-input",staticStyle:{"text-align":"center !important"},attrs:{label:"Percentage",rules:t.numberRule,min:"1",max:"100",type:"number",outlined:"",color:"primary",suffix:"%"},on:{change:function(r){return t.validateUpdate(e.name,e.percentage,e.id)}},model:{value:e.percentage,callback:function(r){t.$set(e,"percentage",r)},expression:"gradeCriteria.percentage"}})],1),t._v(" "),r("v-col",{attrs:{lg:"1"}},[r("v-btn",{staticClass:"mt-2",attrs:{color:"grey lighten-1",icon:""},on:{click:function(r){return t.openDelete(e.id)}}},[r("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1)],1)})),1),t._v(" "),r("br"),t._v(" "),r("v-row",{staticClass:"mx-2"},[r("v-col",{staticClass:"text-right"},[r("p",[t._v("Total: "),r("strong",[t._v(t._s(t._totalPercent(t.get_gradingCriteria))+" % ")])])])],1)],1)],1),t._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.Deldialog,callback:function(e){t.Deldialog=e},expression:"Deldialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[t._v("\n                Are you sure you want to delete this?\n            ")]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(e){t.Deldialog=!1}}},[t._v("\n                    No\n                ")]),t._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.removeGradeCriteria()}}},[t._v("\n                    Yes\n                ")])],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-row",{staticClass:"mt-1"},[r("v-col",[r("v-btn",{staticClass:"float-right",attrs:{color:"primary",disabled:0==t.get_gradingCriteria.length||100!=t._totalPercent(t.get_gradingCriteria)},on:{click:function(e){return t.next()}}},[t._v("\n                Next\n            ")]),t._v(" "),r("v-btn",{staticClass:"float-left",attrs:{text:""},on:{click:function(e){return t.back()}}},[t._v("\n                back\n            ")])],1)],1)],1)}),[],!1,null,"b3f58e76",null).exports}}]);