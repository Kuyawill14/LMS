"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4124],{44124:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var s=n(87757),i=n.n(s);function c(t,e,n,s,i,c,o){try{var a=t[c](o),r=a.value}catch(t){return void n(t)}a.done?e(r):Promise.resolve(r).then(s,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var o=t.apply(e,n);function a(t){c(o,s,i,a,r,"next",t)}function r(t){c(o,s,i,a,r,"throw",t)}a(void 0)}))}}const a={props:["Class_id"],data:function(){return{JoinRequestList:[],isLoading:!0,selectedStudent:[],isSelectedAll:!1,selectedCount:0,confirmDialog:!1,confirmType:""}},methods:{openConfirmDialog:function(t){this.confirmDialog=!0,this.confirmType=t},confirmFunction:function(){"accept"==this.confirmType?this.AcceptAllSelectedRequest():"reject"==this.confirmType&&this.RejectAllSelectedJoinRequest()},fetchJoinRequest:function(){var t=this;return o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/teacher/fetch_student_join_request/"+t.$route.params.id).then((function(e){t.JoinRequestList=e.data,e.data.forEach((function(e){t.selectedStudent.push({isSelected:!1,id:e.id})})),t.isLoading=!1})).catch((function(t){}));case 2:case"end":return e.stop()}}),e)})))()},AcceptJoinRequest:function(t,e){var n=this;return o(i().mark((function s(){return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,axios.put("/api/teacher/accept_student_join_request/"+t).then((function(t){200==t.status&&1==t.data.status?(n.JoinRequestList.splice(e,1),n.toastSuccess(t.data.message),n.$store.dispatch("UpdateJoinCount"),n.$store.dispatch("fetchAllStudents",n.$route.params.id)):200==t.status&&2==t.data.status?(n.JoinRequestList.splice(e,1),n.toastInfo(t.data.message),n.$store.dispatch("UpdateJoinCount")):n.toastError(t.data.message),n.isLoading=!1})).catch((function(t){n.toastError("Something went wrong!")}));case 2:case"end":return s.stop()}}),s)})))()},AcceptAllSelectedRequest:function(){var t=this;return o(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.selectedStudent.forEach((function(t){1==t.isSelected&&n.push({id:t.id})})),e.next=4,axios.put("/api/teacher/multiple_accept_student_join_request",{request_id:n}).then((function(e){if(200==e.status&&1==e.data.status){var n=0;t.selectedStudent.forEach((function(e){1==e.isSelected&&(t.JoinRequestList.splice(n,1),t.selectedStudent.splice(n,1),t.selectedCount--,t.isSelectedAll=!1,t.$store.dispatch("UpdateJoinCount")),n++})),t.$store.dispatch("fetchAllStudents",t.$route.params.id)}t.isLoading=!1,t.confirmDialog=!1})).catch((function(t){}));case 4:case"end":return e.stop()}}),e)})))()},RejectJoinRequest:function(t,e){var n=this;return o(i().mark((function s(){return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,axios.delete("/api/teacher/reject_student_join_request/"+t).then((function(){n.JoinRequestList.splice(e,1),n.$store.dispatch("UpdateJoinCount")})).catch((function(t){n.toastError("Something went wrong!")}));case 2:case"end":return s.stop()}}),s)})))()},RejectAllSelectedJoinRequest:function(){var t=this;return o(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.selectedStudent.forEach((function(t){1==t.isSelected&&n.push({id:t.id})})),e.next=4,axios.put("/api/teacher/multiple_reject_student_join_request",{request_id:n}).then((function(){var e=0;t.selectedStudent.forEach((function(n){1==n.isSelected&&(t.JoinRequestList.splice(e,1),t.selectedStudent.splice(e,1),t.selectedCount--,t.isSelectedAll=!1,t.$store.dispatch("UpdateJoinCount")),e++})),t.confirmDialog=!1})).catch((function(e){t.toastError("Something went wrong!")}));case 4:case"end":return e.stop()}}),e)})))()},selectAllStudent:function(){var t=this;return o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isSelectedAll?(t.selectedStudent.forEach((function(e){e.isSelected=!1,t.selectedCount--})),t.isSelectedAll=!1):(t.selectedStudent.forEach((function(e){e.isSelected=!0,t.selectedCount++})),t.isSelectedAll=!0);case 1:case"end":return e.stop()}}),e)})))()},markSelect:function(t){var e=this;return o(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:1==t?e.selectedCount++:e.selectedCount--;case 1:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.fetchJoinRequest()}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-col",{staticClass:"mt-2",attrs:{cols:"12 d-flex"}},[t._v("\n            Join Request\n            "),n("v-spacer"),t._v(" "),t.JoinRequestList.length>0?n("div",[n("v-btn",{attrs:{disabled:0==t.selectedCount,color:"secondary"},on:{click:function(e){return t.openConfirmDialog("reject")}}},[t._v("Reject Selected")]),t._v(" "),n("v-btn",{staticClass:"ml-2",attrs:{disabled:0==t.selectedCount,color:"primary"},on:{click:function(e){return t.openConfirmDialog("accept")}}},[t._v("Accept Selected")]),t._v(" "),n("v-btn",{staticClass:"ml-2",attrs:{outlined:"",color:"primary"},on:{click:t.selectAllStudent}},[t._v("\n                    "+t._s(t.isSelectedAll?"Unselect All":"Select All")+"\n                    "),n("v-icon",{attrs:{right:""}},[t._v(t._s(t.isSelectedAll?"mdi-checkbox-marked":"mdi-checkbox-blank-outline")+" ")])],1)],1):t._e()],1),t._v(" "),t.isLoading?n("v-col",{staticClass:"mb-0 pb-0 mt-0 pt-0",attrs:{cols:"12"}},[n("v-row",t._l(7,(function(t){return n("v-col",{key:t,staticClass:"mb-0 pb-0 mt-0 pt-0",attrs:{cols:"12"}},[n("v-skeleton-loader",{attrs:{"max-width":"300",type:"list-item-avatar-two-line"}})],1)})),1)],1):t._e(),t._v(" "),t.isLoading?t._e():n("v-col",{staticClass:"mb-0 pb-0 mt-0 pt-0",attrs:{cols:"12"}},[n("v-list",{staticClass:"mb-0 pb-0"},t._l(t.JoinRequestList,(function(e,s){return n("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.class_id==t.Class_id||t.Class_id==t.$route.params.id,expression:"item.class_id == Class_id || Class_id == $route.params.id"}],key:e.user_id,staticClass:"mb-0 pb-0"},[n("v-list-item-avatar",{attrs:{color:"secondary"}},[n("v-img",{attrs:{src:null==e.profile_pic||""==e.profile_pic?"https://ui-avatars.com/api/?background=0D8ABC&color=fff&name="+e.firstName+" "+e.lastName:e.profile_pic}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.firstName)+" "+t._s(e.lastName)+" (ID: "+t._s(e.student_id)+")")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(e.email))])],1),t._v(" "),n("v-list-item-action",{staticClass:"pa-0 ma-0"},[n("div",{staticClass:"d-flex"},[t._v("\n                                ` "),n("v-tooltip",{attrs:{"nudge-top":"",top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var c=i.on,o=i.attrs;return[n("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{icon:""},on:{click:function(n){return t.RejectJoinRequest(e.id,s)}}},"v-btn",o,!1),c),[n("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("Reject Request")])]),t._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var c=i.on,o=i.attrs;return[n("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{icon:""},on:{click:function(n){return t.AcceptJoinRequest(e.id,s)}}},"v-btn",o,!1),c),[n("v-icon",{attrs:{color:"blue"}},[t._v("mdi-check")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("Accept Request")])]),t._v(" "),n("div",{staticClass:"pl-5 mt-1"},[n("v-checkbox",{attrs:{"hide-details":""},on:{click:function(e){return t.markSelect(t.selectedStudent[s].isSelected)}},model:{value:t.selectedStudent[s].isSelected,callback:function(e){t.$set(t.selectedStudent[s],"isSelected",e)},expression:"selectedStudent[index].isSelected"}})],1),t._v("`\n                            ")],1)])],1)})),1)],1)],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[n("v-card",{staticClass:"pa-2"},[n("v-card-title",{staticClass:"text-h5 mb-3"},[t._v("\n            "+t._s("accept"==t.confirmType?"Accept":"Reject")+" Student\n            ")]),t._v(" "),n("v-card-text",{staticClass:"font-weight-bold"},[n("div",{staticClass:"subtitle-1 ",staticStyle:{"line-height":"1.1"}},[t._v("\n                    Are you sure "+t._s(t.confirmType)+" all selected student?")])]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{rounded:"",text:""},on:{click:function(e){t.confirmDialog=!1,t.confirmType=""}}},[t._v("\n                Cancel\n            ")]),t._v(" "),n("v-btn",{attrs:{color:"primary",rounded:"",text:""},on:{click:function(e){return t.confirmFunction()}}},[t._v("\n                Confirm\n            ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);