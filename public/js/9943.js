"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9943],{48086:(t,e,s)=>{s.d(e,{Z:()=>l});var a=s(1519),i=s.n(a)()((function(t){return t[1]}));i.push([t.id,".md-progress-bar[data-v-2284c0fc]{left:0;position:absolute;right:0;top:0}",""]);const l=i},79943:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var a=s(80008),i=s.n(a);const l={props:["class_id","class_name","class_details"],name:"ErrorsMessages",data:function(){return{noError:null,required:null,textarea:null,hasMessages:!1,sending:!1,className:"",form:{class_name:"",class_id:null,meet_link:"",auto_accept:!1,schedule:null},items:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],start_time:null,end_time:null,menu:!1,menu1:!1,addScheduleDialog:!1,day:null,is_edit:!1,is_edit_index:null,Schedvalid:!0,valid:!0,rules:[function(t){return!!t||"Class name is required"}],Schedrules:[function(t){return!!t||"Field is required"}]}},methods:{validate:function(){this.$refs.form.validate()&&this.updateClass()},validateSched:function(){this.$refs.Schedform.validate()&&(this.is_edit?this.updateSchedule():this.AddSchedule())},toastSuccess:function(){return this.$toasted.success("Class Successfully updated",{theme:"toasted-primary",position:"top-center",icon:"done",duration:5e3})},updateClass:function(){var t=this;this.sending=!0,this.$emit("closeModal"),this.isloading=!0,this.form.class_id=this.class_id,this.form.course_id=this.$route.params.id,this.form.class_name=this.class_details.class_name,this.form.meet_link=this.class_details.meeting_link,this.form.auto_accept=this.class_details.is_auto_accept,this.form.schedule=this.class_details.schedule,this.$store.dispatch("updateClass",this.form).then((function(){t.$store.dispatch("fetchSubjectCourseClassList",t.$route.params.id),t.toastSuccess(),t.isloading=!1,t.sending=!1}))},formatDisplay:function(t,e){var s=Date.parse("next "+t).at(e);return i()(s).format("LT")},AddSchedule:function(){var t=this.day.toLowerCase(),e=Date.parse("next "+t).at(this.start_time),s=Date.parse("next "+t).at(this.end_time),a=i()(e).format("LT"),l=i()(s).format("LT");this.class_details.schedule=0==this.class_details.schedule?[]:this.class_details.schedule,this.class_details.schedule.push({day:this.day,display_start:a,display_end:l,start_time:this.start_time,end_time:this.end_time}),this.addScheduleDialog=!this.addScheduleDialog,this.clearInputs()},clearInputs:function(){this.day=null,this.start_time=null,this.end_time=null,this.$refs.Schedform.resetValidation()},OpenEdit:function(t,e){this.is_edit=!0,this.is_edit_index=e,this.day=t.day,this.start_time=t.start_time,this.end_time=t.end_time,this.addScheduleDialog=!0},updateSchedule:function(){var t=this.day.toLowerCase(),e=Date.parse("next "+t).at(this.start_time),s=Date.parse("next "+t).at(this.end_time),a=i()(e).tz("Asia/Manila").format("LT"),l=i()(s).tz("Asia/Manila").format("LT");this.class_details.schedule[this.is_edit_index]={day:this.day,display_start:a,display_end:l,start_time:this.start_time,end_time:this.end_time},this.addScheduleDialog=!1,this.is_edit=!1,this.clearInputs()},DeleteSchedule:function(t){this.class_details.schedule.splice(t,1)},copyLink:function(){var t=this.class_details.meeting_link.match(/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www|meet\.[^\s]+\.[^\s]{2,})/gi);this.class_details.meeting_link=t[0]}},mounted:function(){this.className=this.class_name}};var d=s(72446),c=s.n(d),n=s(48086),o={insert:"head",singleton:!1};c()(n.Z,o);n.Z.locals;const r=(0,s(51900).Z)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-title",{},[t._v("\n            Update Class\n        ")]),t._v(" "),s("v-container",[s("v-row",{staticClass:"mx-2"},[s("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[s("v-text-field",{ref:"_classname",attrs:{rules:t.rules,"hide-details":t.valid,outlined:"",color:"primary",label:"Class Name"},model:{value:t.class_details.class_name,callback:function(e){t.$set(t.class_details,"class_name",e)},expression:"class_details.class_name"}})],1),t._v(" "),s("v-col",{staticClass:"pa-0 ma-0 mt-2",attrs:{cols:"12"}},[s("small",{staticClass:"text-caption"},[t._v("Generate Google Meet Link here: "),s("a",{attrs:{href:"http://meet.google.com/new",target:"_blank"}},[t._v("meet.google.com/new ")])]),t._v(" "),s("v-text-field",{staticClass:"mt-1",attrs:{"hide-details":"",outlined:"",color:"primary",label:"Video Conference Link (optional)",type:"url"},on:{change:function(e){return t.copyLink()}},model:{value:t.class_details.meeting_link,callback:function(e){t.$set(t.class_details,"meeting_link",e)},expression:"class_details.meeting_link"}})],1),t._v(" "),s("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[s("v-switch",{attrs:{label:"Auto accept","hide-details":""},model:{value:t.class_details.is_auto_accept,callback:function(e){t.$set(t.class_details,"is_auto_accept",e)},expression:"class_details.is_auto_accept"}})],1),t._v(" "),s("v-col",{staticClass:"pa-0 ma-0 mt-5",attrs:{cols:"12"}},[s("div",{staticClass:"d-flex justify-space-between"},[s("div",{staticClass:"mt-1"},[t._v("\n                            Schedule: \n                        ")]),t._v(" "),s("div",[s("v-btn",{attrs:{icon:""},on:{click:function(e){t.addScheduleDialog=!t.addScheduleDialog}}},[s("v-icon",[t._v("mdi-plus")])],1)],1)]),t._v(" "),0!=t.class_details.schedule.length?s("v-divider"):t._e()],1),t._v(" "),s("v-divider"),t._v(" "),s("v-col",{staticClass:"pa-0 ma-0 mt-4",attrs:{cols:"12"}},[0!=t.class_details.schedule?s("v-row",t._l(t.class_details.schedule,(function(e,a){return s("v-col",{key:a,staticClass:"mb-0 pb-0 mt-0 pt-0",attrs:{cols:"12"}},[s("div",{staticClass:"d-flex justify-space-between"},[s("div",{staticClass:"d-flex mt-2"},[s("span",{staticClass:"pr-1"},[s("v-icon",{attrs:{color:"red"}},[t._v("mdi-calendar")])],1),t._v(" "),s("span",[t._v(t._s(e.day)+"- ")]),t._v(" "),s("span",{staticClass:"ml-1"},[t._v(t._s(t.formatDisplay(e.day,e.start_time)+" to "+t.formatDisplay(e.day,e.end_time)))])]),t._v(" "),s("div",[s("span",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return t.OpenEdit(e,a)}}},[s("v-icon",{attrs:{color:"blue",small:""}},[t._v("mdi-pencil")])],1)],1),t._v(" "),s("span",[s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.DeleteSchedule(a)}}},[s("v-icon",{attrs:{color:"red",small:""}},[t._v("mdi-delete")])],1)],1)])])])})),1):t._e()],1)],1)],1),t._v(" "),s("v-card-actions",{staticClass:"mt-3"},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){return t.$emit("closeModal")}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary",disabled:t.sending},on:{click:t.validate}},[t._v("Update")])],1),t._v(" "),s("div",[s("v-dialog",{attrs:{persistent:"",width:"400px"},model:{value:t.addScheduleDialog,callback:function(e){t.addScheduleDialog=e},expression:"addScheduleDialog"}},[s("v-card",[s("v-form",{ref:"Schedform",attrs:{"lazy-validation":""},model:{value:t.Schedvalid,callback:function(e){t.Schedvalid=e},expression:"Schedvalid"}},[s("v-card-title",{},[s("v-btn",{attrs:{icon:""},on:{click:function(e){t.addScheduleDialog=!t.addScheduleDialog,t.is_edit=!1,t.clearInputs()}}},[s("v-icon",[t._v("mdi-close")])],1),t._v("\n                            "+t._s(t.is_edit?"Update Schedule":"New Schedule")+"\n                        ")],1),t._v(" "),s("v-container",[s("v-row",{staticClass:"mx-2"},[s("v-col",{staticClass:"pa-0 ma-0 mb-2",attrs:{cols:"12"}},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-select",{attrs:{"hide-details":t.Schedvalid,rules:t.Schedrules,dense:"",items:t.items,outlined:"",label:"Day"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{outlined:"",rules:t.Schedrules,dense:"","hide-details":t.Schedvalid,type:"time",label:"Start time"},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{outlined:"",rules:t.Schedrules,dense:"","hide-details":t.Schedvalid,type:"time",label:"End time"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1)],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-btn",{attrs:{rounded:"",block:"",color:"primary"},on:{click:t.validateSched}},[t._v(" "+t._s(t.is_edit?"Update":"Add"))])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"2284c0fc",null).exports}}]);