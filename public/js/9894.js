"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9894],{22513:(t,e,s)=>{s.d(e,{Z:()=>l});var a=s(1519),i=s.n(a)()((function(t){return t[1]}));i.push([t.id,".text-caption[data-v-f6bc8d50]{color:#fff!important}",""]);const l=i},59894:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var a=s(87757),i=s.n(a),l=s(20629);function o(t,e,s,a,i,l,o){try{var n=t[l](o),r=n.value}catch(t){return void s(t)}n.done?e(r):Promise.resolve(r).then(a,i)}function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const d={components:{confirmUnenroll:function(){return s.e(8127).then(s.bind(s,18127))}},data:function(){return{coursesLength:null,isGetting:!1,dialog:!1,isloading:!0,isStudent:!1,modalType:"",form:new Form({class_code:""}),allClassesData:[],school_year:[],semester:[],school_year_id:"",semester_id:"",isLeaving:!1,isJoining:!1,valid:!0,rules:[function(t){return!!t||"Class code is required"}],Archivedialog:!1,ArchiveDetails:{}}},computed:(0,l.Se)(["allClass"]),methods:r(r({},(0,l.nv)(["fetchClassList"])),{},{validate:function(){this.$refs.form.validate()&&this.joinClass()},openJoinmodal:function(){this.dialog=!this.dialog},joinClass:function(){var t=this;this.isJoining=!0,this.$store.dispatch("joinClass",this.form).then((function(e){200==e.status&&1==e.data.status?(t.toastSuccess(e.data.message),t.dialog=!1,t.isLeaving=!0,t.$router.push({path:"/course/"+e.data.course_id+"/announcement"}),t.form.class_code=""):202==e.status&&1==e.data.status?(t.toastError(e.data.message),t.dialog=!1,t.isLeaving=!0,t.$router.push({path:"/course/"+e.data.course_id+"/announcement"})):200==e.status&&2==e.data.status?(t.toastSuccess(e.data.message),t.dialog=!1,t.form.class_code="",t.isJoining=!1):200==e.status&&3==e.data.status?(t.toastInfo(e.data.message),t.dialog=!1,t.form.class_code="",t.isJoining=!1):(t.toastError(e.data),t.isJoining=!1)}))},connect:function(){var t=this;this.fetchClasses(),window.Echo.private("newuserclass").listen("NewUserCLass",(function(e){t.fetchClassesAgain()}))},Unenroll:function(t){var e=this;this.isloading=!0,this.$store.dispatch("Unenroll",t),this.fetchClasses(),setTimeout((function(){return e.isloading=!1}),1e3)},fetchClassesAgain:function(){var t=this;this.$store.dispatch("fetchClassList").then((function(){t.allClassesData=t.allClass,t.coursesLength=t.allClass.length})),this.$store.dispatch("fetchMyCoursesStatusAgain")},fetchClasses:function(){var t=this;this.isGetting=!0,this.$store.dispatch("fetchClassList").then((function(){t.allClassesData=t.allClass,t.coursesLength=t.allClass.length,t.isGetting=!1}))},fetchAllSchoolyear_semester:function(){var t=this;axios.get("/api/admin/schoolyears_semesters/all").then((function(e){t.school_year=e.data.school_year,t.semester=e.data.semester}))},schoolYearFilter:function(){var t=[];for(var e in this.allClass)""!=this.semester_id?this.allClass[e].school_year_id==this.school_year_id&&this.allClass[e].semester_id==this.semester_id&&t.push(this.allClass[e]):this.allClass[e].school_year_id==this.school_year_id&&t.push(this.allClass[e]);this.allClassesData=t},semesterFilter:function(){var t=[];for(var e in this.allClass)this.allClass[e].school_year_id==this.school_year_id&&this.allClass[e].semester_id==this.semester_id&&t.push(this.allClass[e]);this.allClassesData=t},CheckBackgroundPath:function(t){if(null!=t)return t.includes("https://orangestr.sgp1.cdn.digitaloceanspaces.com")?t:"../images/"+t},UnenrollInCourse:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.delete("/api/student/unenroll/"+e.ArchiveDetails.id).then((function(){e.allClassesData.splice(e.ArchiveDetails.index,1),e.Archivedialog=!1,e.coursesLength--}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(a,i){var l=t.apply(e,s);function n(t){o(l,a,i,n,r,"next",t)}function r(t){o(l,a,i,n,r,"throw",t)}n(void 0)}))})()}}),mounted:function(){this.connect(),this.fetchAllSchoolyear_semester()},beforeDestroy:function(){window.Echo.leave("newuserclass")}};var u=s(72446),v=s.n(u),h=s(22513),f={insert:"head",singleton:!1};v()(h.Z,f);h.Z.locals;const p=(0,s(51900).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-overlay",{attrs:{value:t.isLeaving}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t._v(" "),0!=t.coursesLength||t.isGetting?t._e():s("v-row",{staticClass:"pt-10",attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"8",md:"4"}},[s("v-icon",{staticStyle:{"font-size":"14rem"}},[t._v("\n                mdi-book-variant-multiple\n            ")]),t._v(" "),s("h1",[t._v(" Join your first class ")]),t._v(" "),s("p",[t._v(" Join class, to be able to view modules and activities.")]),t._v(" "),s("v-btn",{attrs:{color:"primary"},on:{click:t.openJoinmodal}},[t._v(" Join Class ")])],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"400px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-title",{},[t._v("\n                    Join Class\n                ")]),t._v(" "),s("v-container",[s("v-row",{staticClass:"mx-2"},[s("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[s("v-text-field",{attrs:{rules:t.rules,filled:"",color:"primary",label:"Class Code"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault()}},model:{value:t.form.class_code,callback:function(e){t.$set(t.form,"class_code",e)},expression:"form.class_code"}})],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){t.dialog=!1,t.$refs.form.resetValidation()}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{type:"submit",text:"",color:"primary",disabled:t.isJoining,tyoe:"submit"}},[t._v(t._s(t.isJoining?"Joining...":"Join"))])],1)],1)],1)],1),t._v(" "),t.isGetting?s("div",[s("v-row",t._l(4,(function(e){return s("v-col",{key:e,attrs:{height:t.$vuetify.breakpoint.lgAndUp?200:140,cols:"12",xl:"3",lg:"3",md:"6"}},[s("v-skeleton-loader",{attrs:{type:"image, article"}})],1)})),1)],1):t._e(),t._v(" "),0!=t.coursesLength&&0==t.isGetting?s("div",[s("v-row",[s("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"12",md:"12",lg:"8"}},[s("h2",[t._v("My Classes")])]),t._v(" "),s("v-col",{staticClass:"text-right",attrs:{lg:"2"}},[s("v-select",{staticClass:"mr-2 my-0",attrs:{"hide-details":"",dense:"",items:t.school_year,"item-text":"schoolyear","item-value":"id",label:"School Year",outlined:"",small:""},on:{change:function(e){return t.schoolYearFilter()}},model:{value:t.school_year_id,callback:function(e){t.school_year_id=e},expression:"school_year_id"}})],1),t._v(" "),s("v-col",{staticClass:"text-right",attrs:{lg:"2"}},[s("v-select",{staticClass:"mr-2 my-0",attrs:{"hide-details":"",dense:"",items:t.semester,"item-text":"semester","item-value":"id",label:"Semester",outlined:"",small:""},on:{change:function(e){return t.semesterFilter()}},model:{value:t.semester_id,callback:function(e){t.semester_id=e},expression:"semester_id"}})],1)],1),t._v(" "),s("v-row",[t._l(t.allClassesData,(function(e,a){return s("v-col",{key:"class"+a,attrs:{cols:"12",xl:"3",lg:"3",md:"6"}},[s("div",{staticClass:"card-expansion"},[s("v-card",{staticClass:"mx-auto"},[s("v-img",{staticClass:"white--text d-flex flex-row justify-space-between grey lighten-2",attrs:{src:t.CheckBackgroundPath(e.course_picture),height:t.$vuetify.breakpoint.lgAndUp?200:160,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)","aspect-ratio":"1"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[s("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[s("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[s("v-app-bar",{attrs:{flat:"",color:"rgba(0, 0, 0, 0)"}},[s("v-spacer"),t._v(" "),s("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"float-right",attrs:{icon:"",color:"white"}},"v-btn",i,!1),a),[s("v-icon",[t._v("\n                                                mdi-dots-vertical\n                                            ")])],1)]}}],null,!0)},[t._v(" "),s("v-list",{staticClass:"pa-1"},[s("v-list-item",{on:{click:function(s){t.ArchiveDetails.name=e.course_name,t.ArchiveDetails.id=e.useClass_id,t.ArchiveDetails.index=a,t.Archivedialog=!0}}},[s("v-list-item-title",[t._v("Unenroll")])],1)],1)],1)],1),t._v(" "),t._v(" "),s("v-card-subtitle",{staticClass:"mt-12"},[s("v-progress-linear",{staticClass:"rounded-sm",attrs:{value:e.progress,height:"6"}}),t._v(" "),s("span",{staticClass:"text-caption float-right"},[t._v(" "+t._s(parseFloat(e.progress.toFixed(2)))+"%\n                                ")]),t._v(" "),s("span",{staticClass:"text-caption "},[t._v(" Completed ")])],1)],1),t._v(" "),s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(a){var i=a.hover;return[s("v-card-subtitle",{staticClass:"ml-0 pl-0 mt-0 pt-0"},[s("div",[s("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"coursePage",params:{id:e.course_id},query:{class:e.class_id}}}},[s("v-list",{staticClass:"ml-0 pl-0"},[s("v-list-item",{class:i?"blue--text":"primary--text"},[s("v-list-item-content",[s("v-list-item-title",[s("p",{staticClass:"mb-0 pb-0 mb-2",style:t.$vuetify.breakpoint.lgAndUp?"font-size: 16px;text-overflow: ellipsis;overflow: hidden; ":"font-size: 14px;text-overflow: ellipsis;overflow: hidden; "},[t._v(t._s(e.course_code)+"\n                                                    "),s("br"),t._v(" "),s("span",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden"}},[t._v(t._s(e.course_name))])])])],1)],1)],1)],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("div",{staticClass:"mt-2 pl-4"},[s("span",{style:t.$vuetify.breakpoint.lgAndUp?"font-size: 16px":"font-size: 14px"},[t._v(t._s(e.class_name))]),t._v(" "),s("br"),t._v(" "),s("span",{style:t.$vuetify.breakpoint.lgAndUp?"font-size: 16px":"font-size: 14px"},[t._v(" Class code: "+t._s(e.class_code))])])],1)]}}],null,!0)})],1)],1)])})),t._v(" "),s("v-col",{staticClass:"text-right"},[s("v-btn",{attrs:{bottom:"",color:"primary",dark:"",fab:"",fixed:"",right:""},on:{click:t.openJoinmodal}},[s("v-icon",[t._v("mdi-plus")])],1)],1)],2)],1):t._e(),t._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:t.Archivedialog,callback:function(e){t.Archivedialog=e},expression:"Archivedialog"}},[t.Archivedialog?s("confirmUnenroll",{attrs:{ArchiveDetails:t.ArchiveDetails},on:{toggleCancelDialog:function(e){t.Archivedialog=!t.Archivedialog},toggleconfirm:function(e){return t.UnenrollInCourse()}}}):t._e()],1)],1)}),[],!1,null,"f6bc8d50",null).exports}}]);