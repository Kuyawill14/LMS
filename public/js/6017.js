"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6017],{8245:(t,e,a)=>{a.d(e,{Z:()=>l});var s=a(1519),i=a.n(s)()((function(t){return t[1]}));i.push([t.id,"v-text-field[type=date]::-webkit-calendar-picker-indicator,v-text-field[type=date]::-webkit-inner-spin-button{-webkit-appearance:none!important;display:none!important}",""]);const l=i},6017:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var s=a(7757),i=a.n(s),l=a(2239);function o(t,e,a,s,i,l,o){try{var n=t[l](o),r=n.value}catch(t){return void a(t)}n.done?e(r):Promise.resolve(r).then(s,i)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var l=t.apply(e,a);function n(t){o(l,s,i,n,r,"next",t)}function r(t){o(l,s,i,n,r,"throw",t)}n(void 0)}))}}const r={props:["Details","datetoday"],data:function(){return{InputAvailability:["Always Available","Set Date","Unavailable"],InputShowAnswer:["After Classwork Done","Set Date"],valid:!1,ClassDetails:{},loading:!1,duedate:null,ShowAnswerDateFrom:this.datetoday,ShowAnswerDateTo:this.datetoday,from_date:this.datetoday,to_date:this.datetoday,datetimeString:"2021-08-31 12:00",formattedDatetime:"08/31/2021 12:00",textFieldProps:{appendIcon:"event"},dateProps:{headerColor:"primary"},timeProps:{useSeconds:!0,ampmInTitle:!0},showAns:!1,ReviewAnswer:!1,EnableDue:!1,response_late:!1,availability:null,availability_date:null,showAnsType:"After Classwork Done",GradingCriteria_id:"",GradingItems:[],FieldRules:[function(t){return!!t||"Field is required"}],isPublishing:!1,test:""}},methods:{validate:function(){var t=this;this.isPublishing=!this.isPublishing,this.$refs.publishForm.validate()?this.shareClasswork():setTimeout((function(){t.isPublishing=!t.isPublishing}),1e3)},shareClasswork:function(){var t=this;return n(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new FormData,(a={}).classwork_id=t.ClassDetails.id,a.class_id=t.ClassDetails.class_id,a.availability=t.availability,a.from_date=(0,l.Z)(t.from_date).format("YYYY-MM-DD HH:MM:SS"),a.to_date=(0,l.Z)(t.to_date).format("YYYY-MM-DD HH:MM:SS"),a.showAnswer=t.showAns,a.ReviewAnswer=t.ReviewAnswer,a.showAnswerType=t.showAnsType,a.showAnswerDateFrom=(0,l.Z)(t.ShowAnswerDateFrom).format("YYYY-MM-DD HH:MM:SS"),a.showAnswerDateTo=(0,l.Z)(t.ShowAnswerDateTo).format("YYYY-MM-DD HH:MM:SS"),a.response_late=t.response_late,a.grading_id=t.GradingCriteria_id,axios.post("/api/classwork/share",a).then((function(e){if("Unshare"!=e.dat){var a=1==e.data.availability?"Due "+(0,l.Z)(t.to_date).format("MMMM D")+" at "+(0,l.Z)(t.to_date).format("h:mm a"):"";e.data.to_date=a,t.$emit("successPublish",e.data),t.toastSuccess("Classwork Successfully publish"),t.isPublishing=!t.isPublishing}else t.$emit("UnPublish")})).catch((function(t){}));case 15:case"end":return e.stop()}}),e)})))()},getPublishDetails:function(){var t=this;return n(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Date,t.duedate=(0,l.Z)(a).format("YYYY-MM-DDTHH:mm:ss"),t.ClassDetails=t.Details;case 3:case"end":return e.stop()}}),e)})))()},getGradingCriteria:function(){var t=this;return n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/grading-criteria/all/"+t.$route.params.id).then((function(e){t.GradingItems=e.data}));case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getGradingCriteria(),this.getPublishDetails()}};var c=a(2446),d=a.n(c),m=a(8245),v={insert:"head",singleton:!1};d()(m.Z,v);m.Z.locals;const u=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-form",{ref:"publishForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-title",[a("v-btn",{attrs:{large:"",icon:"",color:"secondary",text:"",disabled:t.loading},on:{click:function(e){return t.$emit("toggleDialog")}}},[a("v-icon",[t._v("mdi-close")])],1),t._v(" "),a("span",{staticClass:"h6"},[t._v("Publish to "),a("span",{staticClass:"primary--text"},[t._v('"'+t._s(t.ClassDetails.class_name)+'"')])])],1),t._v(" "),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{staticClass:"pb-0 mb-0 mt-0 pt-0",attrs:{cols:"12"}},[a("v-select",{staticClass:"mb-0 pb-0",attrs:{dense:"",rules:t.FieldRules,items:t.GradingItems,"item-text":"value","item-value":"id",outlined:"",label:"Grading Criteria"},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v("\n                                 "+t._s(e.item.name)+" - "+t._s(e.item.percentage+"%")+"\n                             ")]}},{key:"item",fn:function(e){return[t._v("\n                                 "+t._s(e.item.name)+" - "+t._s(e.item.percentage+"%")+"\n                             ")]}}]),model:{value:t.GradingCriteria_id,callback:function(e){t.GradingCriteria_id=e},expression:"GradingCriteria_id"}})],1),t._v(" "),a("v-col",{staticClass:"text-left pb-0 mb-",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[a("div",{staticClass:"subtitle-1 mb-1"},[t._v("Availability:")])]),t._v(" "),a("v-col",{staticClass:"text-left pb-0 mb-",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[a("v-radio-group",{staticClass:"ml-3 mt-0 pt-0 mb-0 pb-0",model:{value:t.availability,callback:function(e){t.availability=e},expression:"availability"}},t._l(t.InputAvailability,(function(e,s){return a("v-radio",{key:s,attrs:{label:t.InputAvailability[s],value:t.InputAvailability[s]}})})),1)],1),t._v(" "),"Set Date"==t.availability?a("v-col",{staticClass:"pb-0 mb-",attrs:{cols:"12"}},[a("v-row",{staticClass:"mt-0 pt-0"},[a("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","date-format":"MM/dd/yyyy","time-format":"HH:mm",color:"primary"},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1),t._v(" "),a("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"Datetimepicker",attrs:{label:"To","date-format":"MM/dd/yyyy","time-format":"HH:mm",color:"primary"},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1),t._v(" "),a("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"12"}},[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Accept late response"},model:{value:t.response_late,callback:function(e){t.response_late=e},expression:"response_late"}})],1)],1)],1):t._e(),t._v(" "),a("v-col",{staticClass:"text-left pb-0 mb-0",attrs:{cols:"12"}},[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Enable Review Answer After Submit"},model:{value:t.ReviewAnswer,callback:function(e){t.ReviewAnswer=e},expression:"ReviewAnswer"}})],1),t._v(" "),t.ReviewAnswer?a("v-col",{staticClass:"text-left pb-0 mb-0 mt-0 pt-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Show Correct Answer"},model:{value:t.showAns,callback:function(e){t.showAns=e},expression:"showAns"}})],1):t._e(),t._v(" "),t.showAns?a("v-col",{staticClass:"text-left pa-0 ma-0",attrs:{cols:"12"}},[a("v-radio-group",{staticClass:"ml-3 mt-0 pt-0 mb-0 pb-0",model:{value:t.showAnsType,callback:function(e){t.showAnsType=e},expression:"showAnsType"}},t._l(t.InputShowAnswer,(function(e,s){return a("v-radio",{key:s,attrs:{label:t.InputShowAnswer[s],value:t.InputShowAnswer[s]}})})),1)],1):t._e(),t._v(" "),"Set Date"==t.showAnsType?a("v-col",{staticClass:"text-left pa-0 ma-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","date-format":"MM/dd/yyyy","time-format":"HH:mm",color:"primary"},model:{value:t.ShowAnswerDateFrom,callback:function(e){t.ShowAnswerDateFrom=e},expression:"ShowAnswerDateFrom"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1),t._v(" "),a("v-col",{attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"To","date-format":"MM/dd/yyyy","time-format":"HH:mm",color:"primary"},model:{value:t.ShowAnswerDateTo,callback:function(e){t.ShowAnswerDateTo=e},expression:"ShowAnswerDateTo"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1)],1)],1):t._e()],1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"pb-2 pl-5 pr-5"},[a("v-btn",{attrs:{rounded:"",block:"",color:"primary",loading:t.isPublishing,disabled:t.loading},on:{click:function(e){return t.validate()}}},[t._v("\n                 Publish\n             ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);