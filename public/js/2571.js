"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2571],{2571:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var n=i(7757),s=i.n(n);function o(t,e,i,n,s,o,a){try{var r=t[o](a),c=r.value}catch(t){return void i(t)}r.done?e(c):Promise.resolve(c).then(n,s)}function a(t){return function(){var e=this,i=arguments;return new Promise((function(n,s){var a=t.apply(e,i);function r(t){o(a,n,s,r,c,"next",t)}function c(t){o(a,n,s,r,c,"throw",t)}r(void 0)}))}}const r={props:["UserDetails","postDetails"],data:function(){return{totalComment:null,isLengthLoaded:!1,CommentList:[],password:"Password",showLess:!0,comment:"",marker:!0,iconIndex:0,data:{},showComment:!1,commentLength:null,isRemoving:!1,isEditing:!1,idEditing_id:null,UpdateComment:""}},methods:{CheckCommentLoad:function(){var t=this;return a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.showComment||t.getComments();case 1:case"end":return e.stop()}}),e)})))()},getComments:function(){var t=this;return a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/post/allcomment/"+t.postDetails.post_id,{Check:t.showLess}).then((function(e){t.CommentList=e.data,t.postDetails.comment=e.data,t.postDetails.comment_count=e.data.length}));case 1:case"end":return e.stop()}}),e)})))()},addComment:function(){var t=this;return a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.content=t.comment,t.data.course_id=t.$route.params.id,t.data.post_id=t.postDetails.post_id,axios.post("/api/post/comment/insert",t.data).then((function(e){t.showComment=!0,t.$emit("AddCount"),t.clearComment(),t.getComments()}));case 4:case"end":return e.stop()}}),e)})))()},clearComment:function(){this.comment=""},RemoveComment:function(t){var e=this;return a(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:axios.delete("/api/post/comment/remove/"+t).then((function(){e.$emit("MinusCount"),e.getComments()}));case 1:case"end":return i.stop()}}),i)})))()},UpdateCommentData:function(){},LikePost:function(t,e){var i=this;return a(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e?axios.delete("/api/post/like/delete/"+t).then((function(){i.postDetails.liked=!1,i.postDetails.likes_count=0!=i.postDetails.likes_count?i.postDetails.likes_count-=1:0})):axios.post("/api/post/like",{post_id:t}).then((function(){i.postDetails.liked=!0,i.postDetails.likes_count+=1}));case 1:case"end":return n.stop()}}),n)})))()}}};const c=(0,i(1900).Z)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-container",{staticClass:"mt-3 text-right pl-5 pr-3 mb-2 d-inline-flex"},[i("v-btn",{attrs:{rounded:"",text:""},on:{click:function(e){return t.LikePost(t.postDetails.post_id,t.postDetails.liked)}}},[i("v-badge",{attrs:{"offset-x":"40","offset-y":"12",content:t.postDetails.likes_count,value:t.postDetails.likes_count}},[i("v-icon",{staticClass:"mr-1",attrs:{color:t.postDetails.liked?"blue":""}},[t._v("  "+t._s(t.postDetails.liked?"mdi-thumb-up":"mdi-thumb-up-outline")+" ")])],1),t._v("\n            "+t._s(t.postDetails.liked?"":"like")+"\n        ")],1),t._v(" "),i("v-btn",{attrs:{rounded:"",text:""},on:{click:function(e){0!=t.postDetails.comment_count&&(t.showComment=!t.showComment)}}},[i("v-badge",{attrs:{"offset-x":"40","offset-y":"12",content:t.showComment?"":t.postDetails.comment_count,value:t.showComment?"":t.postDetails.comment_count}},[i("v-icon",{staticClass:"mr-1"},[t._v("mdi-comment-outline")])],1)],1)],1),t._v(" "),i("v-row",{staticClass:"pl-5 pr-5"},[i("v-divider")],1),t._v(" "),i("transition",{attrs:{transition:"v-expand-transition"}},[t.showComment?i("div",{staticClass:"mt-6 mb-0 pb-0"},t._l(t.postDetails.comment,(function(e){return i("v-container",{key:e.id,staticClass:"d-inline-flex pl-7 pr-4 pb-2 shrink",attrs:{"pa-0":""}},[i("v-avatar",{class:t.isEditing&&t.idEditing_id==e.id?"mt-1":"",attrs:{color:"grey",size:"36"}},[i("v-img",{staticClass:"rounded-circle",attrs:{src:null==e.profile_pic||""==e.profile_pic?"https://ui-avatars.com/api/?background=0D8ABC&color=fff&name="+e.name:e.profile_pic}})],1),t._v(" "),i("v-container",{staticClass:"d-flex flex-row ml-1 mt-1",attrs:{"ma-0":"","pa-0":""}},[i("v-container",{staticClass:"d-flex flex-column ml-1 pr-10",attrs:{"ma-0":"","pa-0":""}},[t.isEditing&&t.idEditing_id==e.id?t._e():i("span",{staticClass:"d-block name"},[t._v(t._s(e.name))]),t._v(" "),t.isEditing&&t.idEditing_id==e.id?t._e():i("span",{staticClass:"caption",staticStyle:{"line-height":"1.5"}},[t._v(t._s(e.content))]),t._v(" "),t.isEditing&&t.idEditing_id==e.id?i("v-text-field",{staticClass:"text-caption",attrs:{"append-outer-icon":"mdi-send","prepend-avatar":"mdi-emoticon-dead",filled:"",rounded:"",dense:"","clear-icon":"mdi-close-circle",clearable:"",placeholder:"Comment",type:"text"},on:{"click:append-outer":function(e){return t.UpdateCommentData()},"click:clear":function(e){t.UpdateComment=""}},model:{value:t.UpdateComment,callback:function(e){t.UpdateComment=e},expression:"UpdateComment"}}):t._e()],1),t._v(" "),e.u_id==t.UserDetails.id||"Teacher"==t.UserDetails.role?i("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),n),[i("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),i("v-list",{attrs:{"pa-0":"","ma-0":""}},[i("v-list-item",{attrs:{"ma-0":"","pa-0":""}},[i("v-list-item-title",[i("v-btn",{attrs:{text:""},on:{click:function(i){t.UpdateComment=e.content,t.isEditing=!0,t.idEditing_id=e.id}}},[t._v("Edit")])],1)],1),t._v(" "),i("v-list-item",{attrs:{"ma-0":"","pa-0":""}},[i("v-list-item-title",[i("v-btn",{attrs:{text:""},on:{click:function(i){return t.RemoveComment(e.id)}}},[t._v("Remove")])],1)],1),t._v(" "),i("v-list-item",{attrs:{"ma-0":"","pa-0":""}},[i("v-list-item-title",[i("v-btn",{attrs:{text:""}},[t._v("Hide")])],1)],1)],1)],1):t._e()],1)],1)})),1):t._e()]),t._v(" "),i("v-row",{staticClass:"pa-3 pt-0 mt-0 mb-0 pb-0"},[i("v-col",{staticClass:"ma-0 pa-0 pt-3",attrs:{cols:"12"}},[i("v-list",{staticClass:"mb-0 pb-0 mt-0 pt-0"},[i("v-list-item",{staticClass:"mb-0 pb-0"},[i("v-list-item-avatar",{attrs:{color:"secondary"}},[i("v-img",{attrs:{src:null==t.UserDetails.profile_pic||""==t.UserDetails.profile_pic?"https://ui-avatars.com/api/?background=0D8ABC&color=fff&name="+t.UserDetails.firstName+" "+t.UserDetails.lastName:t.UserDetails.profile_pic}})],1),t._v(" "),i("v-list-item-content",[i("v-list-item-title",[i("v-text-field",{staticClass:"text-caption pl-0 mt-6",attrs:{"append-outer-icon":"mdi-send","prepend-avatar":"mdi-emoticon-dead",filled:"",rounded:"",dense:"","clear-icon":"mdi-close-circle",clearable:"",placeholder:"Comment",type:"text"},on:{"click:append-outer":t.addComment,"click:clear":t.clearComment},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);