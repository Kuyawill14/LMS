"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1373],{3957:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(1519),o=i.n(n)()((function(e){return e[1]}));o.push([e.id,"iframe{height:20rem!important;width:100%!important}.ql-editor img{max-height:25rem!important}.ql-container{max-height:70rem}",""]);const s=o},8936:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n=i(7757),o=i.n(n),s=(i(2239),i(5714));function a(e,t,i,n,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void i(e)}r.done?t(l):Promise.resolve(l).then(n,o)}const r={data:function(){return{valid:!1,isTimer:!1,file:[],fileSize:[],loading:!1,dialog:!1,form:new s.ZP({}),nullDatetime:null,datetime:new Date,datetimeString:"2019-01-01 12:00",formattedDatetime:"09/01/2019 12:00",textFieldProps:{appendIcon:"event"},dateProps:{headerColor:"primary"},timeProps:{useSeconds:!0,ampmInTitle:!0},FieldRules:[function(e){return!!e||"Field is required"}],file_name:[],counter:0,tmpName:[],uploadPercentage:0,uploadIndex:null}},computed:{extension:function(){return this.file[this.counter]?this.file[this.counter].name.split(".").pop():""}},methods:{RemoveFile:function(e){this.file_name.splice(e,1),this.file.splice(e,1),console.log(this.file)},validate:function(){var e=this;this.loading=!this.loading,this.$refs.NewClassworkForm.validate()?this.SaveClasswork():setTimeout((function(){e.loading=!e.loading}),1e3)},toastSuccess:function(){return this.$toasted.success("Classwork Successfully added",{theme:"toasted-primary",position:"top-center",icon:"done",duration:3e3})},SaveClasswork:function(){var e,t=this;return(e=o().mark((function e(){var i,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((i=new FormData).append("course_id",t.$route.params.id),i.append("type",t.form.type),i.append("title",t.form.title),i.append("instruction",t.form.instruction),"Objective Type"==t.form.type?t.form.points="":"Subjective Type"==t.form.type&&(t.form.duration=""),i.append("points",t.form.points),i.append("duration",t.form.duration),n=0;n<t.file.length;n++)i.append("file["+n+"]",t.file[n]),i.append("attachment_name["+n+"]",t.file_name[n].name),i.append("attachment_size["+n+"]",t.file_name[n].size),i.append("attachment_extension["+n+"]",t.file_name[n].extesion);t.$store.dispatch("createClasswork",i).then((function(e){201==e.status&&(t.toastSuccess(),"Objective Type"==t.form.type?t.$router.push({name:"add-question",params:{id:e.data.course_id},query:{clwk:e.data.id}}):"Subjective Type"==t.form.type&&t.$router.push({name:"clwk",params:{id:e.data.course_id},query:{clwk:e.data.id}}),t.$emit("realodClassworks"))}));case 10:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,o){var s=e.apply(t,i);function r(e){a(s,n,o,r,l,"next",e)}function l(e){a(s,n,o,r,l,"throw",e)}r(void 0)}))})()},addFile:function(){var e=this,t=new FormData;t.append("type","Classwork"),t.append("file",this.file[this.counter]),axios.post("/api/classwork/newAttachment",t,{onUploadProgress:function(t){var i=t.total,n=t.lengthComputable?i:null;null!=n&&(e.uploadPercentage=Math.round(100*t.loaded/n))}}).then((function(t){e.counter++}))},onFileChange:function(e){if(this.uploadIndex=this.counter,this.file.push(e[0]),e[0].size>1e6){var t=.001*e[0].size,i=parseInt(.001*t);this.fileSize[this.counter]=i+"mb"}else{var n=.001*e[0].size,o=parseInt(n);this.fileSize[this.counter]=o+"kb"}this.file_name.push({name:e[0].name,size:this.fileSize[this.counter],extesion:this.extension}),this.addFile()}},beforeMount:function(){}};var l=i(2446),c=i.n(l),m=i(3957),u={insert:"head",singleton:!1};c()(m.Z,u);m.Z.locals;const p=(0,i(1900).Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"ma-0 pa-0"},[i("vue-element-loading",{attrs:{active:e.loading,spinner:"bar-fade-scale"}}),e._v(" "),i("v-form",{ref:"NewClassworkForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card-title",[i("v-btn",{attrs:{large:"",icon:"",disabled:e.loading},on:{click:function(t){return e.$emit("CloseDialog")}}},[i("v-icon",[e._v("mdi-close")])],1),e._v(" "),i("span",{staticClass:"h6"},[e._v("New Classwork")])],1),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"mb-0":"","pb-0":""}},[i("v-row",[i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("v-select",{attrs:{outlined:"",rules:e.FieldRules,items:["Objective Type","Subjective Type"],label:"Type"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("v-textarea",{attrs:{rows:"1",outlined:"",rules:e.FieldRules,label:"Title","auto-grow":""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("v-col",{staticClass:"mb-8 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("editor",{attrs:{placeholder:"Instruction",theme:"snow"},model:{value:e.form.instruction,callback:function(t){e.$set(e.form,"instruction",t)},expression:"form.instruction"}})],1),e._v(" "),"Objective Type"==e.form.type?i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("v-text-field",{attrs:{rules:e.FieldRules,"append-icon":"mdi-"+(e.isTimer?"timer":"timer-off"),outlined:"",min:"0",hint:"mins",label:"Time Limit",type:"number"},on:{click:function(t){e.isTimer=!e.isTimer}},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1):e._e(),e._v(" "),"Subjective Type"==e.form.type?i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},["Subjective Type"==e.form.type?i("v-text-field",{staticClass:"mb-0 pb-0",attrs:{rules:e.FieldRules,outlined:"",min:"0",label:"Points",type:"number"},model:{value:e.form.points,callback:function(t){e.$set(e.form,"points",t)},expression:"form.points"}}):e._e()],1):e._e(),e._v(" "),i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("v-btn",{staticClass:"mb-2",attrs:{color:"primary",text:"",rounded:""},on:{click:function(t){return e.$refs.inputFile.$refs.input.click()}}},[i("v-icon",{attrs:{left:""}},[e._v("\n                                  mdi-attachment\n                              ")]),e._v("\n                              Attach file\n                          ")],1),e._v(" "),i("v-file-input",{ref:"inputFile",staticClass:"d-none",attrs:{multiple:"",accept:".xlsx,.xls,image/*,.doc,.docx,.ppt, .pptx,.txt,.pdf,text/plain"},on:{change:e.onFileChange}}),e._v(" "),i("v-list",{staticClass:"ma-0 pa-0",attrs:{dense:""}},e._l(e.file_name,(function(t,n){return i("v-list-item",{key:n,staticClass:"ma-0 pa-0"},[i("v-list-item-avatar",[i("v-icon",{attrs:{large:"",color:"pdf"==t.extension?"red":"docx"==t.extension?"blue":"link"==t.extension?"green":"jpg"==t.extension||"jpeg"==t.extension||"gif"==t.extension||"svg"==t.extension||"png"==t.extension||"bmp"==t.extension?"info":""}},[e._v("\n                                              "+e._s("pdf"==t.extension||"txt"==t.extension?"mdi-file-pdf":"docx"==t.extension?"mdi-file-word":"link"==t.extension?"mdi-file-link":"jpg"==t.extension||"jpeg"==t.extension||"gif"==t.extension||"svg"==t.extension||"png"==t.extension||"bmp"==t.extension?"mdi-image":"")+"\n                                        ")])],1),e._v(" "),i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t.name))]),e._v(" "),i("v-list-item-subtitle",[e.uploadIndex==n?i("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"5"}}):e._e()],1)],1),e._v(" "),i("v-list-item-action",[i("v-btn",{attrs:{icon:""},on:{click:function(t){return e.RemoveFile(n)}}},[i("v-icon",[e._v("\n                                        mdi-close\n                                        ")])],1)],1)],1)})),1)],1)],1)],1)],1),e._v(" "),i("v-card-actions",{staticClass:"pl-5 pr-5"},[i("v-btn",{attrs:{block:"",disabled:"Subjective Type"==e.form.type?null==e.form.title||""==e.form.title||null==e.form.type||""==e.form.type||null==e.form.instruction||""==e.form.instruction||null==e.form.points||""==e.form.points:null==e.form.title||""==e.form.title||null==e.form.type||""==e.form.type||null==e.form.instruction||""==e.form.instruction||null==e.form.duration||""==e.form.duration,color:"primary",rounded:"",loading:e.loading},on:{click:function(t){return e.validate()}}},[e._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);