"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5919],{2993:(t,e,n)=>{n.d(e,{Z:()=>o});var s=n(1519),i=n.n(s)()((function(t){return t[1]}));i.push([t.id,".post-content img{max-height:23rem!important;max-width:100%}.post-content iframe{height:25rem!important;width:100%!important}",""]);const o=i},5919:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var s=n(7757),i=n.n(s),o=n(2239),r=n(629),a=n(9669),c=n.n(a);function l(t,e,n,s,i,o,r){try{var a=t[o](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const p={props:["PostList","UserDetails","classNames"],components:{commentList:function(){return n.e(7960).then(n.bind(n,7960))},announcementList:function(){return n.e(9812).then(n.bind(n,9812))}},data:function(){return{password:"Password",show:!1,comment:[],marker:!0,iconIndex:0,data:{},CommentList:[],showLess:!0,class_id:this.$route.params.id,isLoadingMore:!1}},computed:d(d({},(0,r.Se)(["current_page","last_page"])),{},{icon:function(){return this.icons[this.iconIndex]}}),methods:{test:function(){$(".img-fluid").click((function(){}))},format_date:function(t){if(t)return(0,o.Z)(String(t)).format("ddd, MMMM DD, YYYY h:mm a")},addComment:function(t,e){var n=this;this.data.content=this.comment[t],this.data.course_id=this.$route.params.id,this.data.post_id=e,c().post("/api/post/insert",this.data).then((function(e){e.data,n.getComments(),n.clearComment(t)}))},clearComment:function(t){this.comment[t]=""},getComments:function(){var t=this;c().get("/api/post/allcomment/"+this.$route.params.id).then((function(e){t.CommentList=e.data}))},getAnnouncementWhileScrolling:function(){var t=this;window.onscroll=function(){document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&1!=t.isLoadingMore&&t.loadMore()}},loadMore:function(){var t=this;this.isLoadingMore=!0,this.current_page!=this.last_page?this.$store.dispatch("loadMore",this.$route.params.id).then((function(e){t.isLoadingMore=!1})):this.isLoadingMore=!1},deletePost:function(t,e){var n,s=this;return(n=i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c().delete("/api/announcement/delete/"+t).then((function(t){200==t.status&&s.$emit("SlicePost",e)}));case 1:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(s,i){var o=n.apply(t,e);function r(t){l(o,s,i,r,a,"next",t)}function a(t){l(o,s,i,r,a,"throw",t)}r(void 0)}))})()}},beforeMount:function(){$(".post-content p").replaceWith((function(){return"<span>"+this.innerHTML+"</span>"})),this.test()},mounted:function(){this.getAnnouncementWhileScrolling()}};var f=n(2446),v=n.n(f),h=n(2993),_={insert:"head",singleton:!1};v()(h.Z,_);h.Z.locals;const g=(0,n(1900).Z)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[0!=t.PostList.length&&"Student"!=t.UserDetails.role?n("v-row",[n("v-col",{staticClass:"mb-0 pb-0 mt-0 pt-0 text-right",attrs:{cols:"12"}},[n("div",{staticClass:"d-inline-flex "},[n("v-select",{attrs:{items:t.classNames,"item-text":"class_name","item-value":"class_id",label:"Class",solo:""},model:{value:t.class_id,callback:function(e){t.class_id=e},expression:"class_id"}})],1)])],1):t._e(),t._v(" "),t._l(t.PostList,(function(e,s){return n("v-card",{directives:[{name:"show",rawName:"v-show",value:e.class_id==t.class_id||t.class_id==t.$route.params.id,expression:"post.class_id == class_id || class_id == $route.params.id"}],key:e.id,staticClass:"mb-10"},[n("v-row",{staticClass:"pl-5 pr-5 pt-2 mb-3 "},[n("v-col",{attrs:{cols:"8"}},[n("div",{staticClass:"d-flex flex-row user-info"},[n("v-avatar",{attrs:{color:"grey",size:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?40:45}},[n("v-img",{staticClass:"rounded-circle",attrs:{src:null==e.profile_pic||""==e.profile_pic?"https://ui-avatars.com/api/?background=0D8ABC&color=fff&name="+e.name:e.profile_pic}})],1),t._v(" "),n("div",{staticClass:"d-flex flex-column justify-content-start ml-2 mt-1"},[n("span",{staticClass:"d-block font-weight-bold name"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"date text-black-50"},[t._v(t._s(t.format_date(e.created_at)))])])],1)]),t._v(" "),e.u_id==t.UserDetails.id||"Teacher"==t.UserDetails.role?n("v-col",{staticClass:"text-right",attrs:{cols:"4"}},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),s),[n("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),n("v-list",{attrs:{dense:"",nav:""}},[n("v-list-item",{attrs:{link:""}},[n("v-list-item-title",[t._v("Edit")])],1),t._v(" "),n("v-list-item",{attrs:{link:""},on:{click:function(n){return t.deletePost(e.post_id,s)}}},[n("v-list-item-title",[t._v("Delete")])],1)],1)],1)],1):t._e()],1),t._v(" "),n("v-container",{staticClass:"pl-4 pr-4 pb-6",staticStyle:{"mx-width":"100%"},attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"pa-5 "},[n("span",{staticClass:"post-content",domProps:{innerHTML:t._s(e.content)}})])])],1)],1),t._v(" "),n("v-row",{staticClass:"pl-5 pr-5"},[n("v-divider")],1),t._v(" "),n("commentList",{attrs:{commentCount:e.comment_count,LikesCount:e.likes_count,commentListData:e.comment,postDetails:e,PostId:e.post_id,UserDetails:t.UserDetails},on:{AddCount:function(t){e.comment_count++},MinusCount:function(t){e.comment_count--}}})],1)})),t._v(" "),t.isLoadingMore?n("div",{staticClass:"text-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v("\n            loading\n    ")],1):t._e()],2)}),[],!1,null,null,null).exports}}]);