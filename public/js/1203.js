"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1203],{2993:(t,e,s)=>{s.d(e,{Z:()=>r});var n=s(1519),i=s.n(n)()((function(t){return t[1]}));i.push([t.id,".post-content img{max-height:23rem!important;max-width:100%}.post-content iframe{height:25rem!important;width:100%!important}",""]);const r=i},1203:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var n=s(7757),i=s.n(n),r=s(2239),a=s(629),o=s(9669),c=s.n(o);function l(t,e,s,n,i,r,a){try{var o=t[r](a),c=o.value}catch(t){return void s(t)}o.done?e(c):Promise.resolve(c).then(n,i)}function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){m(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function m(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const p={props:["UserDetails","classNames"],components:{commentList:function(){return s.e(8942).then(s.bind(s,8942))},announcementList:function(){return s.e(9812).then(s.bind(s,9812))}},data:function(){return{password:"Password",show:!1,comment:[],marker:!0,iconIndex:0,data:{},CommentList:[],showLess:!0,class_id:this.$route.params.id,isLoadingMore:!1,isdeleting:!1,isdeleting_id:null}},computed:u(u({},(0,a.Se)(["current_page","last_page","getclass_post"])),{},{icon:function(){return this.icons[this.iconIndex]}}),methods:u(u({},(0,a.nv)(["deleteClassPost"])),{},{format_date:function(t){if(t)return(0,r.Z)(String(t)).format("ddd, MMMM DD, YYYY h:mm a")},addComment:function(t,e){var s=this;this.data.content=this.comment[t],this.data.course_id=this.$route.params.id,this.data.post_id=e,c().post("/api/post/insert",this.data).then((function(e){e.data,s.getComments(),s.clearComment(t)}))},clearComment:function(t){this.comment[t]=""},getAnnouncementWhileScrolling:function(){var t=this;window.onscroll=function(){document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&1!=t.isLoadingMore&&t.loadMore()}},loadMore:function(){var t=this;this.isLoadingMore=!0,this.current_page!=this.last_page?this.$store.dispatch("loadMore",this.$route.params.id).then((function(e){t.isLoadingMore=!1})):this.isLoadingMore=!1},deletePost:function(t,e){var s,n=this;return(s=i().mark((function s(){var r;return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:(r={}).id=t,r.index=e,n.isdeleting_id=t,n.isdeleting=!0,n.$store.dispatch("deleteClassPost",r).then((function(){n.isdeleting=!1}));case 6:case"end":return s.stop()}}),s)})),function(){var t=this,e=arguments;return new Promise((function(n,i){var r=s.apply(t,e);function a(t){l(r,n,i,a,o,"next",t)}function o(t){l(r,n,i,a,o,"throw",t)}a(void 0)}))})()}}),beforeMount:function(){$(".post-content p").replaceWith((function(){return"<span>"+this.innerHTML+"</span>"}))},mounted:function(){this.getAnnouncementWhileScrolling()}};var v=s(2446),f=s.n(v),h=s(2993),_={insert:"head",singleton:!1};f()(h.Z,_);h.Z.locals;const g=(0,s(1900).Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[0!=t.getclass_post.length&&"Student"!=t.UserDetails.role?s("v-row",[s("v-col",{staticClass:"mb-0 pb-0 mt-0 pt-0 text-right",attrs:{cols:"12"}},[s("div",{class:t.$vuetify.breakpoint.mdAndUp?"d-inline-flex":""},[s("v-select",{attrs:{items:t.classNames,"item-text":"class_name","item-value":"class_id",label:"Class",solo:""},model:{value:t.class_id,callback:function(e){t.class_id=e},expression:"class_id"}})],1)])],1):t._e(),t._v(" "),t._l(t.getclass_post,(function(e,n){return s("v-card",{directives:[{name:"show",rawName:"v-show",value:e.class_id==t.class_id||t.class_id==t.$route.params.id,expression:"post.class_id == class_id || class_id == $route.params.id"}],key:e.id,staticClass:"mb-10"},[s("vue-element-loading",{attrs:{color:"primary",active:t.isdeleting&&t.isdeleting_id==e.post_id,spinner:"bar-fade-scale"}}),t._v(" "),s("v-row",{staticClass:"pl-4 pr-5 pt-2 mb-3 "},[s("v-col",{attrs:{cols:"8"}},[s("div",{staticClass:"d-flex flex-row user-info"},[s("v-avatar",{attrs:{color:"grey",size:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?40:45}},[s("v-img",{staticClass:"rounded-circle",attrs:{src:null==e.profile_pic||""==e.profile_pic?"https://ui-avatars.com/api/?background=0D8ABC&color=fff&name="+e.name:e.profile_pic}})],1),t._v(" "),s("div",{staticClass:"d-flex flex-column justify-content-start ml-2 mt-1"},[s("span",{staticClass:"d-block font-weight-bold name"},[t._v(t._s(e.name))]),t._v(" "),s("small",{staticClass:"date text-black-50"},[t._v(t._s(t.format_date(e.created_at)))])])],1)]),t._v(" "),e.u_id==t.UserDetails.id||"Teacher"==t.UserDetails.role?s("v-col",{staticClass:"text-right",attrs:{cols:"4"}},[s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),n),[s("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),s("v-list",{attrs:{dense:"",nav:""}},[s("v-list-item",{attrs:{link:""}},[s("v-list-item-title",[t._v("Edit")])],1),t._v(" "),s("v-list-item",{attrs:{link:""},on:{click:function(s){return t.deletePost(e.post_id,n)}}},[s("v-list-item-title",[t._v("Delete")])],1)],1)],1)],1):t._e()],1),t._v(" "),s("v-container",{staticClass:"pl-4 pr-4 pb-6",staticStyle:{"mx-width":"100%"},attrs:{fluid:""}},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticClass:"pa-5 "},[s("span",{staticClass:"post-content",domProps:{innerHTML:t._s(e.content)}})])])],1)],1),t._v(" "),s("v-row",{staticClass:"pl-5 pr-5"},[s("v-divider")],1),t._v(" "),s("commentList",{attrs:{postDetails:e,UserDetails:t.UserDetails}})],1)})),t._v(" "),t.isLoadingMore?s("div",{staticClass:"text-center"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v("\n            loading\n         \n    ")],1):t._e()],2)}),[],!1,null,null,null).exports}}]);