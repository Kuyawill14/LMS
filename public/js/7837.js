"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7837],{7837:(t,i,e)=>{e.r(i),e.d(i,{default:()=>u});var n=e(7757),o=e.n(n),a=e(2239),s=e(629);function r(t,i,e,n,o,a,s){try{var r=t[a](s),c=r.value}catch(t){return void e(t)}r.done?i(c):Promise.resolve(c).then(n,o)}function c(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?c(Object(e),!0).forEach((function(i){f(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function f(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}const v={data:function(){return{notificationType:"all",notifTypeName:"all",notificationList:{},notifLength:null,isSelected:null,currentSelectedType:null,AttachData:{},isAccepted:!1}},computed:(0,s.Se)(["get_notification","get_notification_count","ShowPage","ShowLoadMore","LastPage","isGetting"]),methods:l(l(l(l(l(l(l(l(l({},(0,s.nv)(["fetchNotification"])),(0,s.nv)(["fetchNotificationCount"])),(0,s.nv)(["ShowMore"])),(0,s.nv)(["ShowLess"])),(0,s.nv)(["LessNotificationCount"])),(0,s.nv)(["UnreadMessage"])),(0,s.nv)(["HideNotification"])),(0,s.nv)(["markAsReadNotification"])),{},f({test:function(t){this.testdata=t},format_date:function(t){if(t)return(0,a.Z)(String(t)).format("MMMM DD, h:mm a")},ShowMore:function(){this.$store.dispatch("ShowMore",this.ShowPage)},getNotificationList:function(){var t,i=this;return(t=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.$route.params.slug!=i.notifTypeName&&i.$router.replace({params:{slug:i.notifTypeName}}),i.currentSelectedType!=i.notificationType&&(i.currentSelectedType=i.notificationType,i.$store.dispatch("fetchNotification",i.notificationType));case 2:case"end":return t.stop()}}),t)})),function(){var i=this,e=arguments;return new Promise((function(n,o){var a=t.apply(i,e);function s(t){r(a,n,o,s,c,"next",t)}function c(t){r(a,n,o,s,c,"throw",t)}s(void 0)}))})()},NotificationHide:function(t){var i=this;this.$store.dispatch("HideNotification",t).then((function(e){200==e&&i.get_notification.forEach((function(i){i.n_id==t&&(i.hide_notif=1)}))}))},markAsread:function(t){var i=this;this.AttachData.id=t,this.AttachData.accepted=this.isAccepted,this.$store.dispatch("markAsReadNotification",this.AttachData).then((function(e){200==e&&(i.get_notification.forEach((function(e){e.n_id==t&&(e.status=1,i.isAccepted&&(e.notification_accepted=1))})),i.$store.dispatch("LessNotificationCount"))}))},markAllasRead:function(){var t=this;axios.post("/api/notification/mark-all").then((function(i){t.get_notification.forEach((function(t){null==t.status&&(t.status=1)}));for(var e=0;e<i.data;e++)t.$store.dispatch("LessNotificationCount")}))}},"ShowMore",(function(){this.AttachData.type=this.notificationType,this.AttachData.page=this.ShowPage,this.$store.dispatch("ShowMore",this.AttachData)}))),mounted:function(){this.getNotificationList()}};const u=(0,e(1900).Z)(v,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("v-card",{staticClass:"pa-0 ma-0",attrs:{flat:"","max-height":"600"}},[e("v-card-title",[e("span",{staticClass:"text-h6"},[t._v("Notifications \r\n        "),e("v-icon",{attrs:{right:""}},[t._v("\r\n            mdi-bell\r\n        ")])],1)]),t._v(" "),e("div",{staticClass:"pl-2 pr-2"},[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{staticClass:"pa-0 ma-0 mb-2",attrs:{cols:"12"}},[e("v-divider")],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"2"}},[e("v-tabs",{attrs:{"active-class":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","show-arrows":"",vertical:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm,centered:t.$vuetify.breakpoint.xs&&t.$vuetify.breakpoint.sm}},[e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="all",t.notifTypeName="all",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                 mdi-bell\r\n                ")]),t._v("\r\n                "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"All")+"\r\n                \r\n            ")],1),t._v(" "),e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType=1,t.notifTypeName="announcement",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-bullhorn-outline\r\n              ")]),t._v("\r\n              \r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Account Request")+"\r\n            ")],1),t._v(" "),e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType=4,t.notifTypeName="classwork",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-book-open-variant\r\n              ")]),t._v("\r\n              \r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Reset Request")+"\r\n            ")],1),t._v(" "),e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="Hidden",t.notifTypeName="hidden",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs||!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-eye-off\r\n              ")]),t._v("\r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Hidden")+"\r\n            ")],1)],1)],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"9"}},[e("v-list",[t.isGetting?e("v-list-item",[e("v-list-item-content",[e("v-row",{attrs:{"align-content":"center",justify:"center"}},[e("v-col",{staticClass:"text-subtitle-1 text-center mb-0 pb-0",attrs:{cols:"12"}},[t._v("\r\n                                    Loading\r\n                                ")]),t._v(" "),e("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"6"}},[e("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"4"}})],1)],1)],1)],1):t._e(),t._v(" "),t.isGetting?t._e():e("div",[0!=t.notifLength?e("v-list-item",[e("v-list-item-content",[e("div",{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"body-1 text-uppercase"},[t._v(t._s(t.notifTypeName))]),t._v(" "),0==t.get_notification_count||t.isGetting?t._e():e("v-btn",{attrs:{small:"",color:"primary"},on:{click:t.markAllasRead}},[t._v("\r\n                                Mark all as read\r\n                                "),e("v-icon",{attrs:{right:""}},[t._v("mdi-check")])],1)],1)])],1):t._e(),t._v(" "),0==t.notifLength?e("v-list-item",[e("v-list-item-content",[e("v-row",{staticClass:"mt-3",attrs:{align:"center",justify:"center"}},[e("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e("v-icon",{staticStyle:{"font-size":"2rem"}},[t._v("\r\n                                        mdi-bell-off\r\n                                    ")]),t._v(" "),e("p",[t._v(" Empty Notification  ")])],1)],1)],1)],1):t._e(),t._v(" "),t._l(t.get_notification,(function(i,n){return e("v-list-item",{directives:[{name:"show",rawName:"v-show",value:"all"==t.notificationType||i.notification_type==t.notificationType,expression:"notificationType == 'all' || item.notification_type == notificationType"}],key:n,attrs:{link:""}},[e("v-list-item-avatar",[3==i.notification_type||2==i.notification_type?e("v-icon",{attrs:{color:"blue",large:""}},[t._v("mdi-account-plus")]):t._e(),t._v(" "),1==i.notification_type?e("v-icon",{attrs:{color:"red",large:""}},[t._v("mdi-bullhorn-outline")]):t._e(),t._v(" "),4==i.notification_type?e("v-icon",{attrs:{color:"green",large:""}},[t._v(" mdi-book-open-variant")]):t._e()],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{staticClass:"font-weight-medium"},[e("v-badge",{attrs:{content:1==i.status?"":"new",value:1==i.status?"":"new",color:1==i.notification_type?"red":3==i.notification_type||2==i.notification_type?"blue":4==i.notification_type?"green":""}},[t._v("\r\n                                "+t._s(i.name)+"   \r\n                                ")])],1),t._v(" "),e("div",{staticClass:"body-2"},[t._v("\r\n                                "+t._s(i.message)+"\r\n                                 "),3==i.notification_type&&0==i.notification_accepted?e("a",{staticClass:"blue--text",attrs:{href:"",link:""},on:{click:function(e){return e.preventDefault(),t.acceptJoin(i.notification_attachments,i.n_id)}}},[t._v("\r\n                                Accept invite")]):t._e()]),t._v(" "),e("small",[t._v(t._s(t.format_date(i.created_at)))])],1),t._v(" "),e("v-list-item-action",{staticStyle:{"z-index":"1"}},[null==i.status||0==i.status?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,a=n.attrs;return[null==i.status||0==i.status?e("v-btn",t._g(t._b({staticStyle:{"z-index":"50"},attrs:{text:"",icon:""},on:{click:function(e){return t.markAsread(i.n_id)}}},"v-btn",a,!1),o),[e("v-icon",[t._v("mdi-check")])],1):t._e()]}}],null,!0)},[t._v(" "),e("span",[t._v("Mark as read")])]):t._e(),t._v(" "),1==i.status?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,a=n.attrs;return[1==i.status?e("v-btn",t._g(t._b({staticStyle:{"z-index":"50"},attrs:{text:"",icon:""},on:{click:function(e){return t.NotificationHide(i.n_id)}}},"v-btn",a,!1),o),[e("v-icon",[t._v("mdi-close")])],1):t._e()]}}],null,!0)},[t._v(" "),e("span",[t._v("Hide notification")])]):t._e()],1)],1)})),t._v(" "),1!=t.LastPage?e("v-list-item",[e("v-list-item-content",[e("v-row",{attrs:{"align-content":"center",justify:"center"}},[e("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[t.ShowLoadMore?e("v-btn",{attrs:{rounded:"",text:"",color:"primary"},on:{click:t.ShowMore}},[t._v("Load More  "),e("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-down")])],1):t._e()],1)],1)],1)],1):t._e()],2)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);