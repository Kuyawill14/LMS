"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8422],{74427:(t,s,e)=>{e.d(s,{Z:()=>l});var a=e(1519),i=e.n(a)()((function(t){return t[1]}));i.push([t.id,".md-progress-bar[data-v-1dd7ccc2]{left:0;position:absolute;right:0;top:0}",""]);const l=i},58422:(t,s,e)=>{e.r(s),e.d(s,{default:()=>r});var a=e(80008),i=e.n(a);const l={props:["class_id","class_name","class_details"],name:"ErrorsMessages",data:function(){return{noError:null,required:null,textarea:null,hasMessages:!1,sending:!1,className:"",form:{class_name:"",class_id:null,meet_link:"",auto_accept:!1,schedule:null},items:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],start_time:null,end_time:null,menu:!1,menu1:!1,addScheduleDialog:!1,day:null,is_edit:!1,is_edit_index:null}},methods:{toastSuccess:function(){return this.$toasted.success("Class Successfully updated",{theme:"toasted-primary",position:"top-center",icon:"done",duration:5e3})},updateClass:function(){var t=this;this.sending=!0,this.$emit("closeModal"),this.isloading=!0,this.form.class_id=this.class_id,this.form.course_id=this.$route.params.id,this.form.class_name=this.class_details.class_name,this.form.meet_link=this.class_details.meeting_link,this.form.auto_accept=this.class_details.is_auto_accept,this.form.schedule=this.class_details.schedule,this.$store.dispatch("updateClass",this.form).then((function(){t.$store.dispatch("fetchSubjectCourseClassList",t.$route.params.id),t.toastSuccess(),t.isloading=!1,t.sending=!1}))},formatDisplay:function(t,s){var e=Date.parse("next "+t).at(s);return i()(e).format("LT")},AddSchedule:function(){var t=this.day.toLowerCase(),s=Date.parse("next "+t).at(this.start_time),e=Date.parse("next "+t).at(this.end_time),a=i()(s).format("LT"),l=i()(e).format("LT");this.class_details.schedule=0==this.class_details.schedule?[]:this.class_details.schedule,this.class_details.schedule.push({day:this.day,display_start:a,display_end:l,start_time:this.start_time,end_time:this.end_time}),this.addScheduleDialog=!this.addScheduleDialog,this.clearInputs()},clearInputs:function(){this.day=null,this.start_time=null,this.end_time=null},OpenEdit:function(t,s){this.is_edit=!0,this.is_edit_index=s,this.day=t.day,this.start_time=t.start_time,this.end_time=t.end_time,this.addScheduleDialog=!0},updateSchedule:function(){var t=this.day.toLowerCase(),s=Date.parse("next "+t).at(this.start_time),e=Date.parse("next "+t).at(this.end_time),a=i()(s).tz("Asia/Manila").format("LT"),l=i()(e).tz("Asia/Manila").format("LT");this.class_details.schedule[this.is_edit_index]={day:this.day,display_start:a,display_end:l,start_time:this.start_time,end_time:this.end_time},this.addScheduleDialog=!1,this.is_edit=!1},DeleteSchedule:function(t){this.class_details.schedule.splice(t,1)},copyLink:function(){var t=this.class_details.meeting_link.match(/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www|meet\.[^\s]+\.[^\s]{2,})/gi);this.class_details.meeting_link=t[0]}},mounted:function(){this.className=this.getClassName,this.className=this.class_name}};var c=e(72446),d=e.n(c),n=e(74427),o={insert:"head",singleton:!1};d()(n.Z,o);n.Z.locals;const r=(0,e(51900).Z)(l,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-card",[e("v-card-title",{},[t._v("\n        Edit Class\n    ")]),t._v(" "),e("v-container",[e("v-row",{staticClass:"mx-2"},[e("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[e("v-text-field",{ref:"_classname",attrs:{required:"","hide-details":"",outlined:"",color:"primary",label:"Class Name"},model:{value:t.class_details.class_name,callback:function(s){t.$set(t.class_details,"class_name",s)},expression:"class_details.class_name"}})],1),t._v(" "),e("v-col",{staticClass:"pa-0 ma-0 mt-2",attrs:{cols:"12"}},[e("small",{staticClass:"text-caption"},[t._v("Generate Google Meet Link here: "),e("a",{attrs:{href:"http://meet.google.com/new",target:"_blank"}},[t._v("meet.google.com/new ")])]),t._v(" "),e("v-text-field",{staticClass:"mt-1",attrs:{"hide-details":"",outlined:"",color:"primary",label:"Video Conference Link (optional)",type:"url"},on:{change:function(s){return t.copyLink()}},model:{value:t.class_details.meeting_link,callback:function(s){t.$set(t.class_details,"meeting_link",s)},expression:"class_details.meeting_link"}})],1),t._v(" "),e("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[e("v-switch",{attrs:{label:"Auto accept","hide-details":""},model:{value:t.class_details.is_auto_accept,callback:function(s){t.$set(t.class_details,"is_auto_accept",s)},expression:"class_details.is_auto_accept"}})],1),t._v(" "),e("v-col",{staticClass:"pa-0 ma-0 mt-5",attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"mt-1"},[t._v("\n                         Schedule: \n                     ")]),t._v(" "),e("div",[e("v-btn",{attrs:{icon:""},on:{click:function(s){t.addScheduleDialog=!0}}},[e("v-icon",[t._v("mdi-plus")])],1)],1)]),t._v(" "),0!=t.class_details.schedule.length?e("v-divider"):t._e()],1),t._v(" "),e("v-col",{staticClass:"pa-0 ma-0 mt-4",attrs:{cols:"12"}},[0!=t.class_details.schedule?e("v-row",t._l(t.class_details.schedule,(function(s,a){return e("v-col",{key:a,staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"d-flex mt-2"},[e("span",{staticClass:"pr-1"},[e("v-icon",{attrs:{color:"red"}},[t._v("mdi-calendar")])],1),t._v(" "),e("span",[t._v(t._s(s.day)+"- ")]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(t.formatDisplay(s.day,s.display_start)+" to "+t.formatDisplay(s.day,s.display_end)))])]),t._v(" "),e("div",{staticClass:"d-flex"},[e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.OpenEdit(s,a)}}},[e("v-icon",{attrs:{color:"blue",small:""}},[t._v("mdi-pencil")])],1),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(s){return t.DeleteSchedule(a)}}},[e("v-icon",{attrs:{color:"red",small:""}},[t._v("mdi-delete")])],1)],1)])])})),1):t._e()],1)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"mt-3"},[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(s){return t.$emit("cancelUpdate")}}},[t._v("Cancel")]),t._v(" "),e("v-btn",{attrs:{text:"",color:"primary",disabled:t.sending},on:{click:t.updateClass}},[t._v("Update")])],1),t._v(" "),e("div",[e("v-dialog",{attrs:{persistent:"",width:"400px"},model:{value:t.addScheduleDialog,callback:function(s){t.addScheduleDialog=s},expression:"addScheduleDialog"}},[e("v-card",[e("v-card-title",{},[e("v-btn",{attrs:{icon:""},on:{click:function(s){t.addScheduleDialog=!1,t.is_edit=!1}}},[e("v-icon",[t._v("mdi-close")])],1),t._v("\n                    "+t._s(t.is_edit?"Update Schedule":"New Schedule")+"\n                ")],1),t._v(" "),e("v-container",[e("v-row",{staticClass:"mx-2"},[e("v-col",{staticClass:"pa-0 ma-0 mb-2",attrs:{cols:"12"}},[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-select",{attrs:{dense:"",items:t.items,"hide-details":"",outlined:"",label:"Day"},model:{value:t.day,callback:function(s){t.day=s},expression:"day"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"6"}},[e("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",type:"time",label:"Start time"},model:{value:t.start_time,callback:function(s){t.start_time=s},expression:"start_time"}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"6"}},[e("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",type:"time",label:"End time"},model:{value:t.end_time,callback:function(s){t.end_time=s},expression:"end_time"}})],1)],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{rounded:"",block:"",color:"primary"},on:{click:function(s){t.is_edit?t.updateSchedule():t.AddSchedule()}}},[t._v(" "+t._s(t.is_edit?"Update":"Add"))])],1)],1)],1)],1)],1)}),[],!1,null,"1dd7ccc2",null).exports}}]);