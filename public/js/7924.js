"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7924],{7924:(i,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(7757),n=t.n(a);function e(i,s,t,a,n,e,l){try{var o=i[e](l),c=o.value}catch(i){return void t(i)}o.done?s(c):Promise.resolve(c).then(a,n)}function l(i){return function(){var s=this,t=arguments;return new Promise((function(a,n){var l=i.apply(s,t);function o(i){e(l,a,n,o,c,"next",i)}function c(i){e(l,a,n,o,c,"throw",i)}o(void 0)}))}}const o={components:{publishDialog:function(){return t.e(9715).then(t.bind(t,9715))},unpublishConfirmDialog:function(){return t.e(2771).then(t.bind(t,2771))},updatePublishDialog:function(){return t.e(3629).then(t.bind(t,3629))}},data:function(){return{classNames:[],isloading:!0,dialog:!1,Details:{},UnpublishDetails:{},isPublishing:!1,isPublishing_id:null,UnpublishDiaglog:!1,isAdding:!1,isUpdate:!1,notifyDetails:{},isLeaving:!1,datetoday:new Date}},methods:{OpenPublishDialog:function(i,s,t){this.isPublishing=!this.isPublishing,this.isPublishing_id=s,this.Details.id=i,this.Details.class_id=s,this.Details.class_name=t,this.dialog=!this.dialog,this.isAdding=!this.isAdding},OpenEditPublish:function(i,s,t,a){this.Details.id=i,this.Details.class_id=s,this.Details.class_name=t,this.Details.classwork_id=a,this.dialog=!this.dialog,this.isUpdate=!this.isUpdate},OpenUnpublishDiaglog:function(i,s,t){this.UnpublishDetails.id=i,this.UnpublishDetails.class_id=s,this.UnpublishDetails.class_name=t,this.UnpublishDiaglog=!this.UnpublishDiaglog},toastSuccess:function(i){return this.$toasted.success("Classwork Successfully published to "+i,{theme:"toasted-primary",position:"top-center",icon:"done",duration:3e3})},shareClasswork:function(i,s,t){var a=this,n=new FormData;n.append("classwork_id",i),n.append("class_id",s),axios.post("/api/classwork/share",n).then((function(i){a.toastSuccess(t),a.fetchClassnames()})).catch((function(i){}))},closeDiaglog:function(){this.dialog=!this.dialog,this.isPublishing=!this.isPublishing,this.fetchClassnames()},fetchClassnames:function(){var i=this;return l(n().mark((function s(){return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:axios.get("/api/class/allnames/"+i.$route.params.id+"/"+i.$route.query.clwk).then((function(s){i.classNames=s.data,i.isloading=!1})).catch((function(i){}));case 1:case"end":return s.stop()}}),s)})))()},fetchClassFornotify:function(i){var s=this;return l(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.dialog=!s.dialog,s.isPublishing=!s.isPublishing,s.isAdding=!s.isAdding,axios.get("/api/class/allnames/"+s.$route.params.id+"/"+s.$route.query.clwk).then((function(t){s.classNames=t.data,s.isloading=!1,s.NewNotification(i)})).catch((function(i){}));case 4:case"end":return t.stop()}}),t)})))()},SuccessPublishNotify:function(i){var s=this;return l(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.fetchClassFornotify(i);case 1:case"end":return t.stop()}}),t)})))()},NewNotification:function(i){var s=this;return l(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.notifyDetails.classwork_id=i.classwork_id,s.notifyDetails.class_id=i.class_id,s.notifyDetails.course_id=s.$route.params.id,s.notifyDetails.due=i.to_date,s.notifyDetails.type="classwork",axios.post("/api/notification/new",s.notifyDetails).then((function(i){}));case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.fetchClassnames()},beforeRouteLeave:function(i,s,t){this.isLeaving=!0,t()}};const c=(0,t(1900).Z)(o,(function(){var i=this,s=i.$createElement,t=i._self._c||s;return t("div",{staticClass:"pa-1"},[t("v-overlay",{attrs:{value:i.isLeaving}},[t("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),i._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:i.dialog,callback:function(s){i.dialog=s},expression:"dialog"}},[i.isAdding?t("publishDialog",{attrs:{Details:i.Details,datetoday:i.datetoday},on:{toggleDialog:function(s){i.dialog=!i.dialog,i.isPublishing=!i.isPublishing,i.isAdding=!i.isAdding},successPublish:i.SuccessPublishNotify,UnPublish:function(s){return i.closeDiaglog()}}}):i._e(),i._v(" "),i.isUpdate?t("updatePublishDialog",{attrs:{Details:i.Details},on:{toggleDialog:function(s){i.dialog=!i.dialog,i.isUpdate=!i.isUpdate},successPublish:function(s){i.dialog=!i.dialog,i.isUpdate=!i.isUpdate}}}):i._e()],1),i._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"450"},model:{value:i.UnpublishDiaglog,callback:function(s){i.UnpublishDiaglog=s},expression:"UnpublishDiaglog"}},[i.UnpublishDiaglog?t("unpublishConfirmDialog",{attrs:{UnpublishDetails:i.UnpublishDetails},on:{toggleCancelDialog:function(s){i.UnpublishDiaglog=!i.UnpublishDiaglog},UnpublishSuccess:function(s){i.UnpublishDiaglog=!i.UnpublishDiaglog,i.fetchClassnames()}}}):i._e()],1),i._v(" "),i.isloading?t("v-container",{staticClass:"fill-height",staticStyle:{height:"500px"}},[t("v-row",{attrs:{"align-content":"center",justify:"center"}},[t("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[t("v-progress-circular",{attrs:{size:40,color:"primary",indeterminate:""}})],1)],1)],1):i._e(),i._v(" "),i.isloading?i._e():t("v-container",{staticClass:"pa-0 pa-0",attrs:{"pa-0":"","ma-0":"",fluid:""}},[t("v-row",{attrs:{align:"center",justify:"center"}},[t("v-col",{attrs:{cols:"12",lg:"9",xl:"9",md:"8"}},[t("v-card",{staticClass:"pa-5",attrs:{elevation:"1",outlined:""}},[t("v-row",[t("v-col",{staticClass:"pt-2 pl-3 pr-3",attrs:{cols:"12",md:"12"}},i._l(i.classNames,(function(s,a){return t("v-container",{key:a},[t("v-list-item",[t("v-list-item-avatar",[t("v-icon",[i._v("mdi-account-multiple")])],1),i._v(" "),t("v-list-item-content",[t("v-list-item-title",[i._v(i._s(s.class_name)+" ")])],1),i._v(" "),t("div",{},[0==s.status?t("v-btn",{attrs:{loading:i.isPublishing&&i.isPublishing_id==s.class_id,color:"primary",outlined:0==s.status,rounded:"",dark:""},on:{click:function(t){return i.OpenPublishDialog(i.$route.query.clwk,s.class_id,s.class_name,s.status)}}},[i._v("\r\n                                                    "+i._s(i.$vuetify.breakpoint.xs?"":"Publish")+"\r\n                                                "),t("v-icon",[i._v("\r\n                                                    mdi-share\r\n                                                ")])],1):i._e(),i._v(" "),1==s.status?t("v-menu",{attrs:{"offset-y":""},scopedSlots:i._u([{key:"activator",fn:function(a){var n=a.on,e=a.attrs;return[1==s.status?t("v-btn",i._g(i._b({attrs:{color:"primary",dark:"",icon:"",text:""}},"v-btn",e,!1),n),[t("v-icon",[i._v("mdi-dots-vertical")])],1):i._e()]}}],null,!0)},[i._v(" "),t("v-list",{staticClass:"pa-1",attrs:{rounded:""}},[t("v-list-item",{staticClass:"rounded",attrs:{link:""},on:{click:function(t){return i.OpenEditPublish(i.$route.query.clwk,s.class_id,s.class_name,s.Class_classwork_id)}}},[t("v-list-item-title",[t("v-icon",{attrs:{left:""}},[i._v("mdi-pencil")]),i._v(" Edit Publication\r\n                                                        ")],1)],1),i._v(" "),t("v-list-item",{staticClass:"rounded",attrs:{link:""},on:{click:function(t){return i.OpenUnpublishDiaglog(i.$route.query.clwk,s.class_id,s.class_name)}}},[t("v-list-item-title",[t("v-icon",{attrs:{left:""}},[i._v("mdi-share-off")]),i._v(" Unpublish\r\n                                                            ")],1)],1)],1)],1):i._e()],1)],1),i._v(" "),t("v-divider")],1)})),1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"439ee8e8",null).exports}}]);