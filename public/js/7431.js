"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7431],{87431:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var i=s(87757),a=s.n(i);function n(t,e,s,i,a,n,r){try{var o=t[n](r),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(i,a)}function r(t){return function(){var e=this,s=arguments;return new Promise((function(i,a){var r=t.apply(e,s);function o(t){n(r,i,a,o,l,"next",t)}function l(t){n(r,i,a,o,l,"throw",t)}o(void 0)}))}}const o={components:{loginRegisterImageConatiner:function(){return s.e(2927).then(s.bind(s,37347))},loginRegisterFooter:function(){return s.e(2927).then(s.bind(s,29065))}},data:function(){return{steps:1,isRegistering:!1,valid:!0,form:{firstName:"",middleName:"",lastName:"",suffix:"",birthday:new Date,email:"",password:"",password_confirmation:"",student_id:""},loginForm:new Form({email:"",password:""}),nameRules:[function(t){return!!t||"Field is required"},function(t){return t&&t.length<=20||"Must be less than 50 characters"}],StudentIdRules:[function(t){return!!t||"Student ID is required"},function(t){return t&&t.length>=5||"min 5 characters"},function(t){return t&&t.length<=20||"Max 20 characters"}],emailRules:[function(t){return!!t||"Required"},function(t){return/.+@.+\..+/.test(t)||"Email must be valid"}],rules:{required:function(t){return!!t||"Field is required."},min:function(t){return t&&t.length>=6||"Minimum 6 characters"},max:function(t){return t&&t.length<=20||"Maximum 20 characters"}},showPass:!1,showConfirmPass:!1,isValid_id:!1,isValid_id_mesage:null,valid_type:null,ischecking:!1,ConfirmDialog:!1}},computed:{passwordMatch:function(){return this.form.password===this.form.password_confirmation||"Pasword does not match"}},methods:{preventNav:function(t){1!=this.steps&&(t.preventDefault(),t.returnValue="")},validate:function(){var t=this;return r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.Registerform.validate()&&t.nextStep();case 1:case"end":return e.stop()}}),e)})))()},nextStep:function(){var t=this;return r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==t.steps?(t.ischecking=!0,axios.get("/api/register/check_student_id/"+t.form.student_id).then((function(e){1==e.data.success?(setTimeout((function(){return t.ischecking=!1,t.steps+=1}),500),t.$refs.Registerform.resetValidation()):(setTimeout((function(){return t.ischecking=!1}),500),t.valid_type=e.data.type,t.isValid_id=!0,t.isValid_id_mesage=e.data.message,setTimeout((function(){return t.isValid_id=!1}),5e3))})).catch((function(e){setTimeout((function(){return t.ischecking=!1}),500),console.log(e),t.toastError("To many request, Please try again later")}))):2==t.steps?(t.ischecking=!0,axios.put("/api/register/check_student_details/"+t.form.student_id,t.form).then((function(e){1==e.data.success?setTimeout((function(){return t.ischecking=!1,t.steps+=1,t.$refs.Registerform.resetValidation()}),500):(setTimeout((function(){return t.ischecking=!1}),500),t.toastError(e.data.message))})).catch((function(e){setTimeout((function(){return t.ischecking=!1}),500),t.toastError("To many request, Please try again later")}))):3==t.steps&&(t.ischecking=!0,t.ConfirmDialog=!0);case 1:case"end":return e.stop()}}),e)})))()},registerAccount:function(){var t=this;this.ConfirmDialog=!1,axios.put("/api/register/account/"+this.form.student_id,this.form).then((function(e){1==e.data.success?(setTimeout((function(){return t.ischecking=!1}),500),t.isRegistering=!0,e.data.isVerified?t.toastSuccess("Account Registered Successfully!"):(t.toastSuccess("Account Registerd: Please check your email for Verification!"),t.sendVerification(t.form.email)),t.login(t.form.email,t.form.password),window.removeEventListener("beforeunload",t.preventNav)):(t.toastError(e.data.message),setTimeout((function(){return t.ischecking=!1}),500))})).catch((function(e){setTimeout((function(){return t.ischecking=!1}),500),t.toastError(e.response.data.errors.email[0])}))},sendVerification:function(t){return r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.post("/api/resend-verification",{email:t}).then((function(t){t.data.success})).catch((function(t){}));case 1:case"end":return e.stop()}}),e)})))()},login:function(t,e){var s=this;return r(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:s.loginForm.email=t,s.loginForm.password=e,axios.get("/sanctum/csrf-cookie").then((function(t){s.loginForm.post("/api/login").then((function(t){1==t.data.success?(s.$store.dispatch("clear_current_user"),s.$router.push({path:"/"})):s.toastError(t.data.message)}))}));case 3:case"end":return i.stop()}}),i)})))()},beforeWindowUnload:function(t){1==this.steps&&(t.preventDefault(),t.returnValue="")}},beforeMount:function(){window.addEventListener("beforeunload",this.preventNav)}};const l=(0,s(51900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"fill-height",attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"ma-0 pa-0",attrs:{cols:"12",sm:"12",md:"12"}},[s("v-row",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"fill-height":"",attrs:{align:"center",justify:"center"}},[s("loginRegisterImageConatiner"),t._v(" "),s("v-col",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"ma-0 pa-3 mb-12":"ma-0 pa-0",attrs:{cols:"12",md:"5"}},[s("vue-element-loading",{attrs:{active:t.isRegistering,spinner:"bar-fade-scale",color:"#EF6C00"}}),t._v(" "),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:" text-left",attrs:{cols:"12",md:"7"}},[s("div",{staticClass:"text-md-h5 text-xs-h5 text-sm-h6 font-weight-bold"},[t._v("Sign\n                                        Up "),s("span",{staticClass:"font-weight-regular"},[t._v("Now")]),t._v(" "),s("span",{staticClass:"font-weight-regular text-subtitle-1"},[t._v(" (Step "+t._s(t.steps)+" of 3)")])]),t._v(" "),s("p",{staticClass:"mt-2"},[t._v("Login Your Account "),s("router-link",{staticClass:"blue--text",attrs:{to:{name:"login"}}},[t._v("Click here")])],1)])],1)],1),t._v(" "),s("v-col",{staticClass:"text-center mb-0 pb-0",attrs:{cols:"12"}},[s("v-form",{ref:"Registerform",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[1==t.steps?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",md:"8",xl:"7"}},[s("v-alert",{staticClass:"text-left",attrs:{dismissible:"",dense:"",type:"Not_Valid"==t.valid_type?"error":"info"},model:{value:t.isValid_id,callback:function(e){t.isValid_id=e},expression:"isValid_id"}},[t._v(t._s(t.isValid_id_mesage))]),t._v(" "),s("v-text-field",{attrs:{rules:t.StudentIdRules,dense:t.$vuetify.breakpoint.mdAndUp,placeholder:"e.g. 18-1234, SHS-18-1234",label:"Student ID Number",outlined:""},model:{value:t.form.student_id,callback:function(e){t.$set(t.form,"student_id",e)},expression:"form.student_id"}})],1)],1):t._e(),t._v(" "),2==t.steps?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:"text-left",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-alert",{staticClass:"text-left",attrs:{dismissible:"",dense:"",type:"info"}},[t._v("Please use your exact birthday you used in the enrollment.\n                                         "),s("br"),t._v("\n                                         Need help? Send us a message @"),s("a",{staticClass:"white--text",attrs:{href:"https://www.messenger.com/t/102514265611526/",target:"_blank"}},[t._v(" Messenger")])]),t._v(" "),s("div",{staticClass:"font-weight-bold"},[t._v("Personal Details")])],1),t._v(" "),s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,rules:t.nameRules,label:"First Name",outlined:""},model:{value:t.form.firstName,callback:function(e){t.$set(t.form,"firstName",e)},expression:"form.firstName"}})],1),t._v(" "),s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,rules:t.nameRules,label:"Middle Initial",outlined:""},model:{value:t.form.middleName,callback:function(e){t.$set(t.form,"middleName",e)},expression:"form.middleName"}})],1),t._v(" "),s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,rules:t.nameRules,label:"Last Name",outlined:""},model:{value:t.form.lastName,callback:function(e){t.$set(t.form,"lastName",e)},expression:"form.lastName"}})],1),t._v(" "),s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,label:"Suffix",outlined:""},model:{value:t.form.suffix,callback:function(e){t.$set(t.form,"suffix",e)},expression:"form.suffix"}})],1),t._v(" "),s("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,type:"Date",label:"Birthday",outlined:""},model:{value:t.form.birthday,callback:function(e){t.$set(t.form,"birthday",e)},expression:"form.birthday"}})],1)],1):t._e(),t._v(" "),3==t.steps?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,type:"email",rules:t.emailRules,label:"Email",outlined:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,"append-icon":t.showPass?"mdi-eye":"mdi-eye-off",type:t.showPass?"text":"password",rules:[t.rules.required,t.rules.min,t.rules.max],label:"Password",outlined:""},on:{"click:append":function(e){t.showPass=!t.showPass}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),s("v-col",{staticClass:" pt-0 mt-0",attrs:{cols:"12",md:"8",xl:"7"}},[s("v-text-field",{attrs:{dense:t.$vuetify.breakpoint.mdAndUp,"append-icon":t.showConfirmPass?"mdi-eye":"mdi-eye-off",type:t.showConfirmPass?"text":"password",rules:[t.rules.required,t.passwordMatch],label:"Confirm Password",outlined:""},on:{"click:append":function(e){t.showConfirmPass=!t.showConfirmPass}},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}})],1)],1):t._e(),t._v(" "),s("v-row",{staticClass:"mt-0 pt-0 pb-5",attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:"text-center d-flex  mt-0 pt-0",attrs:{cols:"12",md:"8",xl:"7"}},[t.steps>1?s("v-btn",{attrs:{color:"secondary"},on:{click:function(e){t.steps=t.steps-1}}},[t._v("\n                                        Previous\n                                    ")]):t._e(),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn",{class:3==t.steps?"":"pl-10 pr-10",attrs:{disabled:!t.valid,loading:t.ischecking,color:3==t.steps?"success":"primary"},on:{click:t.validate}},[t._v("\n                                        "+t._s(3==t.steps?"Register":"Next")+"\n                                    ")])],1)],1)],1)],1)],1)],1),t._v(" "),s("loginRegisterFooter")],1)],1)],1),t._v(" "),s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.ConfirmDialog,callback:function(e){t.ConfirmDialog=e},expression:"ConfirmDialog"}},[s("v-card",[s("div",{staticClass:"pa-2"},[s("v-alert",{staticClass:"text-left",attrs:{dense:"",type:"info"}},[t._v("\n                     Confirm Details: Before you click "),s("span",{staticClass:"font-weight-medium"},[t._v("Confirm")]),t._v(", make sure you're using an active email address because \n                    all information regarding your class's activity will be sent to that email.\n\n                    ")])],1),t._v(" "),s("v-divider"),t._v(" "),s("v-container",{staticClass:"pl-6 pr-6"},[s("v-row",[s("v-col",{staticStyle:{"font-size":"20px"},attrs:{cols:"12"}},[s("span",{staticClass:"font-weight-bold"},[t._v("First Name: ")]),t._v(" "),s("span",[t._v(t._s(t.form.firstName))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Middle Initial: ")]),t._v(" "),s("span",[t._v(t._s(t.form.middleName))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Last Name: ")]),t._v(" "),s("span",[t._v(t._s(t.form.lastName))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Suffix: ")]),t._v(" "),s("span",[t._v(t._s(t.form.suffix))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Birthday: ")]),t._v(" "),s("span",[t._v(t._s(t.form.birthday))]),t._v(" "),s("br"),t._v(" "),s("v-divider"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Email: ")]),t._v(" "),s("span",[t._v(t._s(t.form.email))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Password: ")]),t._v(" "),s("span",[t._v(t._s(t.form.password))]),t._v(" "),s("br")],1)],1)],1),t._v(" "),s("v-card-actions",{staticClass:"pt-2 pb-3"},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.ConfirmDialog=!1,t.ischecking=!1}}},[t._v("\n                        cancel\n                    ")]),t._v(" "),s("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.registerAccount()}}},[t._v("\n                        Confirm\n                    ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);