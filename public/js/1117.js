"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1117],{1117:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});var a=s(7757),i=s.n(a),l=s(2239);function r(t,e,s,a,i,l,r){try{var n=t[l](r),o=n.value}catch(t){return void s(t)}n.done?e(o):Promise.resolve(o).then(a,i)}function n(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var l=t.apply(e,s);function n(t){r(l,a,i,n,o,"next",t)}function o(t){r(l,a,i,n,o,"throw",t)}n(void 0)}))}}const o={props:["Details"],data:function(){return{InputAvailability:["Always Available","Set Date","Unavailable"],InputShowAnswer:["After Classwork Done","Set Date"],valid:!1,ClassDetails:{},PublishDetails:[],loading:!1,duedate:null,ShowAnswerDate:null,datetime:new Date,datetimeString:"2019-01-01 12:00",formattedDatetime:"09/01/2019 12:00",textFieldProps:{appendIcon:"event"},dateProps:{headerColor:"primary"},timeProps:{useSeconds:!0,ampmInTitle:!0},showAns:!1,ReviewAns:!1,EnableDue:!1,response_late:!1,availability:null,availability_date:null,showAnsType:null,GradingCriteria_id:"",GradingItems:[],FieldRules:[function(t){return!!t||"Field is required"}],isPublishing:!1,isLoading:!0}},methods:{validate:function(){var t=this;this.isPublishing=!this.isPublishing,this.$refs.publishForm.validate()?this.UpdateShareClassworkDetails():setTimeout((function(){t.isPublishing=!t.isPublishing}),1e3)},shareClasswork:function(){var t=this;return n(i().mark((function e(){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=new FormData).append("classwork_id",t.ClassDetails.id),s.append("class_id",t.ClassDetails.class_id),s.append("EnableDue",t.EnableDue),s.append("due_date",t.duedate),s.append("showAnswer",t.showAns),s.append("showAnswerType",t.showAnsType),s.append("showAnswerDate",t.ShowAnswerDate),s.append("response_late",t.response_late),s.append("grading_id",t.GradingCriteria_id),axios.post("/api/classwork/share",s).then((function(e){"Unshare"!=e.dat?(t.$emit("successPublish",e.data),t.isPublishing=!t.isPublishing):t.$emit("UnPublish")})).catch((function(t){}));case 11:case"end":return e.stop()}}),e)})))()},UpdateShareClassworkDetails:function(){var t=this;return n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.PublishDetails.availability=t.availability,t.PublishDetails.showAnswerType=t.showAnsType,axios.put("/api/classwork/UpdatePublish/"+t.PublishDetails.id,t.PublishDetails).then((function(e){200==e.status&&(t.$emit("successPublish"),t.isPublishing=!t.isPublishing)}));case 3:case"end":return e.stop()}}),e)})))()},getGradingCriteria:function(){var t=this;return n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/grading-criteria/all/"+t.$route.params.id).then((function(e){t.GradingItems=e.data}));case 1:case"end":return e.stop()}}),e)})))()},getPublishDetails:function(){var t=this;return n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/classwork/publishClassworkDetails/"+t.Details.classwork_id).then((function(e){t.PublishDetails=e.data,t.availability=1==t.PublishDetails.availability?"Set Date":2==t.PublishDetails.availability?"Unavailable":"Always Available",t.showAnsType=null!=t.PublishDetails.showAnswerType?t.showAnsType=t.PublishDetails.showAnswerType?"Set Date":"After Classwork Done":t.showAnsType="",t.isLoading=!t.isLoading}));case 1:case"end":return e.stop()}}),e)})))()},format_date:function(t){if(t)return(0,l.Z)(String(t)).format("YYYY-MM-DDTHH:mm:ss")}},mounted:function(){this.getGradingCriteria(),this.getPublishDetails()}};const c=(0,s(1900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[t.isLoading?s("v-container",{staticClass:"fill-height",staticStyle:{height:"400px"}},[s("v-row",{attrs:{"align-content":"center",justify:"center"}},[s("v-col",{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v("\n             Loading\n         ")]),t._v(" "),s("v-col",{attrs:{cols:"6"}},[s("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"5"}})],1)],1)],1):t._e(),t._v(" "),t.isLoading?t._e():s("v-form",{ref:"publishForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-title",[s("v-btn",{attrs:{icon:"",large:"",color:"secondary",disabled:t.loading},on:{click:function(e){return t.$emit("toggleDialog")}}},[s("v-icon",[t._v("mdi-close")])],1),t._v(" "),s("span",{staticClass:"h6"},[t._v("Publish to "),s("span",{staticClass:"primary--text"},[t._v('"'+t._s(t.Details.class_name)+'"')])])],1),t._v(" "),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[s("v-select",{attrs:{dense:"",rules:t.FieldRules,items:t.GradingItems,"item-text":"value","item-value":"id",outlined:"",label:"Grading Criteria"},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v("\n                                 "+t._s(e.item.name)+" - "+t._s(e.item.percentage+"%")+"\n                             ")]}},{key:"item",fn:function(e){return[t._v("\n                                 "+t._s(e.item.name)+" - "+t._s(e.item.percentage+"%")+"\n                             ")]}}],null,!1,2821306268),model:{value:t.PublishDetails.grading_criteria,callback:function(e){t.$set(t.PublishDetails,"grading_criteria",e)},expression:"PublishDetails.grading_criteria"}})],1),t._v(" "),s("v-col",{staticClass:"text-left mb-0 pb-0 ",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[s("div",{staticClass:"subtitle-1 mb-1"},[t._v("Availability:")])]),t._v(" "),s("v-col",{staticClass:"text-left mb-0 pb-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[s("v-radio-group",{staticClass:"ml-3 mt-0 pt-0 mb-0 pb-0",model:{value:t.availability,callback:function(e){t.availability=e},expression:"availability"}},t._l(t.InputAvailability,(function(e,a){return s("v-radio",{key:a,attrs:{label:t.InputAvailability[a],value:t.InputAvailability[a]}})})),1)],1),t._v(" "),"Set Date"==t.availability?s("v-col",{staticClass:"mb-0 pb-0 ",attrs:{cols:"12"}},[s("v-row",{staticClass:"mt-0 pt-0"},[s("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[s("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","text-field-props":t.textFieldProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps,"time-format":"HH:mm:ss",color:"primary"},model:{value:t.PublishDetails.from_date,callback:function(e){t.$set(t.PublishDetails,"from_date",e)},expression:"PublishDetails.from_date"}})],1),t._v(" "),s("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[s("v-datetime-picker",{staticClass:"Datetimepicker",attrs:{label:"To","text-field-props":t.textFieldProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps,"time-format":"HH:mm:ss",color:"primary"},model:{value:t.PublishDetails.to_date,callback:function(e){t.$set(t.PublishDetails,"to_date",e)},expression:"PublishDetails.to_date"}})],1),t._v(" "),s("v-col",{staticClass:"text-left pb-0 mb-0 mt-0 pt-0",attrs:{cols:"12"}},[s("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Accept Late Response"},model:{value:t.PublishDetails.response_late,callback:function(e){t.$set(t.PublishDetails,"response_late",e)},expression:"PublishDetails.response_late"}})],1)],1)],1):t._e(),t._v(" "),s("v-col",{staticClass:"text-left pb-0 mb-0",attrs:{cols:"12"}},[s("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Enable Review Answer After Submit"},model:{value:t.PublishDetails.reviewAnswer,callback:function(e){t.$set(t.PublishDetails,"reviewAnswer",e)},expression:"PublishDetails.reviewAnswer"}})],1),t._v(" "),t.PublishDetails.reviewAnswer?s("v-col",{staticClass:"text-left mb-0 pb-0 mt-0 pt-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[s("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Show Correct Answer"},model:{value:t.PublishDetails.showAnswer,callback:function(e){t.$set(t.PublishDetails,"showAnswer",e)},expression:"PublishDetails.showAnswer"}})],1):t._e(),t._v(" "),t.PublishDetails.showAnswer?s("v-col",{staticClass:"text-left mb-0 pb-0 ",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[s("v-radio-group",{staticClass:"ml-3 mt-0 pt-0 mb-0 pb-0",model:{value:t.showAnsType,callback:function(e){t.showAnsType=e},expression:"showAnsType"}},t._l(t.InputShowAnswer,(function(e,a){return s("v-radio",{key:a,attrs:{label:t.InputShowAnswer[a],value:t.InputShowAnswer[a]}})})),1)],1):t._e(),t._v(" "),"Set Date"==t.showAnsType?s("v-col",{staticClass:"text-left mb-0 pb-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From",rules:t.FieldRules,"text-field-props":t.textFieldProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps,"time-format":"HH:mm",color:"primary"},model:{value:t.PublishDetails.showDateFrom,callback:function(e){t.$set(t.PublishDetails,"showDateFrom",e)},expression:"PublishDetails.showDateFrom"}})],1),t._v(" "),s("v-col",{attrs:{cols:"6"}},[s("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"To",rules:t.FieldRules,"text-field-props":t.textFieldProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps,"time-format":"HH:mm",color:"primary"},model:{value:t.PublishDetails.showDateTo,callback:function(e){t.$set(t.PublishDetails,"showDateTo",e)},expression:"PublishDetails.showDateTo"}})],1)],1)],1):t._e()],1)],1)],1),t._v(" "),s("v-card-actions",{staticClass:"pb-5 pl-5 pr-5"},[s("v-btn",{attrs:{rounded:"",block:"",color:"primary",loading:t.isPublishing,disabled:t.loading},on:{click:function(e){return t.validate()}}},[t._v("\n                 Update\n             ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);