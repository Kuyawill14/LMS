"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9128],{93033:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(1519),a=s.n(i)()((function(t){return t[1]}));a.push([t.id,".v-input__slot{margin-bottom:0!important}",""]);const r=a},19128:(t,e,s)=>{s.r(e),s.d(e,{default:()=>v});var i=s(87757),a=s.n(i),r=s(9669),n=s.n(r);function l(t,e,s,i,a,r,n){try{var l=t[r](n),o=l.value}catch(t){return void s(t)}l.done?e(o):Promise.resolve(o).then(i,a)}function o(t){return function(){var e=this,s=arguments;return new Promise((function(i,a){var r=t.apply(e,s);function n(t){l(r,i,a,n,o,"next",t)}function o(t){l(r,i,a,n,o,"throw",t)}n(void 0)}))}}const d={data:function(){return{dialog_multi_user:!1,IsBulkadding:!1,department:[],user_type:"Student",isVerifying:!1,Deldialog:!1,ResetPassworddialog:!1,dialog:!1,temp_id:"",IsDeleting:!1,IsAddUpdating:!1,IsResetting:!1,IsResetting_id:null,isConfirmReset:!1,type:"",search:"",valid:!0,role:["Teacher","Student"],updateIndex:null,deleteIndex:null,form:new Form({firstName:"",middleName:"",lastName:"",email:"",password:"",password_confirmation:"",student_id:"",birthDay:new Date,verified:null,department:null}),studenIdRule:[function(t){return!!t||"Student ID is required"},function(t){return t&&t.length>=6||"min 6 characters"},function(t){return t&&t.length<=8||"Max 8 characters"}],nameRules:[function(t){return!!t||"Field is required"},function(t){return t&&t.length<=20||"Name must be less than 20 characters"}],loginEmailRules:[function(t){return!!t||"Field is required"},function(t){return/.+@.+\..+/.test(t)||"Email must be valid"}],RoleRules:[function(t){return!!t||"Field is required"}],show:!1,show1:!1,rules:{required:function(t){return!!t||"Field is required."},min:function(t){return t&&t.length>=6||"min 6 characters"}},StudentList:[],headers:[{value:"isActive"},{text:"Student ID",value:"student_id",align:"start"},{text:"Last Name",value:"lastName",align:"start"},{text:"First Name",value:"firstName",align:"start"},{text:"Middle Name",value:"middleName",align:"start"},{text:"Email",value:"email",align:"start"},{text:"Deparment",align:"start"},{text:"Verified",align:"start"},{text:"Password Reset",sortable:!1},{text:"Actions",sortable:!1}],loading:!0,json_users_file:null,json_users_text_area:null,department_id:null}},computed:{filteredItems:function(){var t=this;return this.search?this.StudentList.filter((function(e){return t.search.toLowerCase().split(" ").every((function(t){return e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.middleName.toLowerCase().includes(t)||null==e.student_id?e.lastName.toLowerCase().includes(t):e.student_id.toString().includes(t)}))})):this.StudentList}},methods:{addBulk:function(){var t=this;if(null!=this.department&&(null!=this.json_users_file||null!=this.json_users_text_area)){var e=null!=this.json_users_file?this.json_users_file:JSON.parse(this.json_users_text_area);this.IsBulkadding=!0,n().post("/api/admin/users/bulk_add",{user_type:this.user_type,users_data:e,department:this.department_id}).then((function(e){console.log(e),200==e.status?(t.$refs.RegisterForm.reset(),t.getStudent().then((function(){t.valid=!0,t.dialog_multi_user=!1,t.toastSuccess("User successfully Added!"),t.IsBulkadding=!1}))):(t.IsBulkadding=!1,t.toastError("Something went wrong!"))})).catch((function(e){t.IsBulkadding=!1,t.toastError("Something went wrong!")}))}},onFileChange:function(t){null!=t?this.readFile(t):this.json_users_file=null},readFile:function(t){var e=this,s=new FileReader;s.onload=function(t){var s=t.target.result.replaceAll("\r","").split("\n"),i=s[0].split(","),a=s.slice(1).map((function(t){var e=t.split(",");return Object.fromEntries(i.map((function(t,s){return[t,e[s]]})))}));e.json_users_file=a,console.log(e.json_users_file)},s.readAsText(t)},openAdd_multiple_user:function(){this.dialog_multi_user=!0},fetchDeparmentList:function(){var t=this;n().get("/api/admin/department/all").then((function(e){t.department=e.data}))},SetPassword:function(t){var e=t.replace(/\s+/g,"-").toLowerCase();this.form.password="LMS-"+e,this.show=!0},openAdd:function(){this.type="add",this.dialog=!0},openEdit:function(t,e){this.updateIndex=e,this.type="edit",this.dialog=!0,this.form.user_id=t.user_id,this.form.firstName=t.firstName,this.form.middleName=t.middleName,this.form.lastName=t.lastName,this.form.email=t.email,this.form.student_id=t.student_id,this.form.verified=t.isVerified,this.form.department=t.department_id,this.valid||this.$refs.RegisterForm.resetValidation()},openDelete:function(t,e){this.deleteIndex=e,this.delId=t,this.Deldialog=!0},updatePass:function(){var t=this;this.isConfirmReset=!0,n().post("/api/admin/users/reset-password/"+this.IsResetting_id).then((function(e){t.toastSuccess(e.data),t.isConfirmReset=!1,t.IsResetting=!1,t.ResetPassworddialog=!1}))},OpenupdatePassDialog:function(t){this.IsResetting_id=t,this.ResetPassworddialog=!0,this.IsResetting=!0},deleteUser:function(){var t=this;this.IsDeleting=!0,n().delete("/api/admin/users/remove/"+this.delId).then((function(e){200==e.status?(t.StudentList.splice(t.deleteIndex,1),t.toastSuccess("User Successfully removed!"),t.IsDeleting=!1):(t.toastError("Something went wrong!"),t.IsDeleting=!1),t.Deldialog=!1,t.$store.dispatch("fetchAllTeachers")}))},updateTeacherDetails:function(){this.$store.dispatch("updateTeacher",this.form)},VerifyUser:function(t){var e=this;return o(a().mark((function s(){return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e.isVerifying=!0,n().put("/api/admin/verifyUser/"+t).then((function(t){1==t.data.success?(e.form.verified="Verified",e.StudentList[e.updateIndex].isVerified="Verified",e.toastSuccess("User Successfully Verified!"),e.isVerifying=!1):(e.toastError("Something went wrong!"),e.isVerifying=!1)})).catch((function(t){e.toastError("Something went wrong!"),e.isVerifying=!1}));case 2:case"end":return s.stop()}}),s)})))()},validate:function(){var t=this;this.IsAddUpdating=!0,this.$refs.RegisterForm.validate()?("add"==this.type&&(this.form.role="Student",this.form.password_confirmation=this.form.password,this.form.post("/api/admin/users/add/"+this.user_type).then((function(e){t.$refs.RegisterForm.reset(),t.valid=!0,t.dialog=!1,t.IsAddUpdating=!1,t.StudentList.unshift(e.data),t.toastSuccess("User Successfully Added!")}))),"edit"==this.type&&this.form.post("/api/admin/users/update/"+this.form.user_id).then((function(){t.updateDataInfrontEnd(t.form),t.valid=!0,t.dialog=!1,t.IsAddUpdating=!1,t.toastSuccess("User Successfully Updated!")}))):this.IsAddUpdating=!1,this.valid=!1,this.IsAddUpdating=!1},getStudent:function(){var t=this;return o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n().get("/api/admin/users/all/"+t.user_type).then((function(e){t.StudentList=e.data,t.loading=!1}));case 1:case"end":return e.stop()}}),e)})))()},updateDataInfrontEnd:function(t){this.StudentList[this.updateIndex].user_id=t.user_id,this.StudentList[this.updateIndex].firstName=t.firstName,this.StudentList[this.updateIndex].middleName=t.middleName,this.StudentList[this.updateIndex].lastName=t.lastName,this.StudentList[this.updateIndex].email=t.email,this.StudentList[this.updateIndex].student_id=t.student_id,this.StudentList[this.updateIndex].department_short_name=t.department.short_name,this.StudentList[this.updateIndex].department_name=t.department.name,this.$refs.RegisterForm.reset()}},mounted:function(){this.fetchDeparmentList(),this.getStudent()}};var u=s(72446),c=s.n(u),m=s(93033),f={insert:"head",singleton:!1};c()(m.Z,f);m.Z.locals;const v=(0,s(51900).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pt-4"},[s("v-row",{staticClass:"mb-0"},[s("v-col",{attrs:{cols:"12",lg:"10"}},[s("h2",[t._v("\n                Manage Students\n            ")])]),t._v(" "),s("v-col",{staticStyle:{display:"flex","justify-content":"end"},attrs:{cols:"12",lg:"2"}},[s("v-btn",{staticClass:"mr-3",attrs:{dark:"",color:"blue"},on:{click:function(e){return t.openAdd_multiple_user()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-upload")]),t._v("\n                Import CSV\n            ")],1),t._v(" "),s("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){return t.openAdd()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-account-plus-outline")]),t._v("\n                Add Student\n            ")],1)],1)],1),t._v(" "),s("v-row",[s("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"12"}},[t.loading?s("v-card",[s("v-skeleton-loader",{attrs:{loading:t.loading,type:"table"}})],1):t._e(),t._v(" "),t.loading?t._e():s("v-card",{attrs:{elevation:"2"}},[s("v-card-title",[t._v("\n                    Students\n\n                    "),s("v-spacer"),t._v(" "),s("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.filteredItems,"items-per-page":10},scopedSlots:t._u([{key:"body",fn:function(e){var i=e.items;return[s("tbody",[t._l(i,(function(e,i){return s("tr",{key:i},[s("td",{staticStyle:{width:"7%"}},[s("v-icon",{attrs:{color:0!=e.isActive?"success":""}},[t._v("mdi-circle-medium")]),t._v(" "),s("span",{class:0!=e.isActive?"success--text":""},[t._v(t._s(0!=e.isActive?"Online":"Oflline"))])],1),t._v(" "),s("td",[t._v(" "+t._s(e.student_id)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.lastName)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.firstName)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.middleName)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.email)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.department_short_name)+" ")]),t._v(" "),s("td",[s("v-icon",{attrs:{color:null!=e.isVerified?"success":""}},[t._v("\n                                        "+t._s(e.isVerified?"mdi-check":""))])],1),t._v(" "),s("td",[s("v-btn",{attrs:{color:"primary",loading:t.IsResetting&&t.IsResetting_id==e.user_id},on:{click:function(s){return t.OpenupdatePassDialog(e.user_id)}}},[t._v("\n                                        Reset Password\n                                    ")])],1),t._v(" "),s("td",[s("v-btn",{attrs:{icon:"",color:"success"},on:{click:function(s){return t.openEdit(e,i)}}},[s("v-icon",[t._v("\n                                            mdi-pencil\n                                        ")])],1),t._v(" "),s("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(s){return t.openDelete(e.user_id,i)}}},[s("v-icon",[t._v("\n                                            mdi-delete\n                                        ")])],1)],1)])})),t._v(" "),0==t.StudentList.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"42"}},[t._v(" No data available")])]):t._e()],2)]}}],null,!1,3233114472)})],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{},[t._v("\n                "+t._s("add"==this.type?"Add Student":"Update Student")+"\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("v-container",[s("v-form",{ref:"RegisterForm",staticClass:"text-center ",attrs:{autocomplete:"false","lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-row",{staticClass:"pa-5"},[s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"student_id"}}),t._v(" "),s("v-text-field",{attrs:{autocomplete:"false",rules:t.studenIdRule,label:"Student ID Number",name:"student_id",color:"primary",outlined:""},model:{value:t.form.student_id,callback:function(e){t.$set(t.form,"student_id",e)},expression:"form.student_id"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"firstName"}}),t._v(" "),s("v-text-field",{attrs:{rules:t.nameRules,label:"First Name",name:"firstName",type:"text",color:"primary",outlined:""},model:{value:t.form.firstName,callback:function(e){t.$set(t.form,"firstName",e)},expression:"form.firstName"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"middleName"}}),t._v(" "),s("v-text-field",{attrs:{label:"Middle Initial",rules:t.nameRules,name:"middleName",type:"text",color:"primary",outlined:""},model:{value:t.form.middleName,callback:function(e){t.$set(t.form,"middleName",e)},expression:"form.middleName"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"lastName"}}),t._v(" "),s("v-text-field",{attrs:{label:"Last Name",rules:t.nameRules,name:"lastname",type:"text",color:"primary",outlined:""},on:{keyup:function(e){return t.SetPassword(t.form.lastName)}},model:{value:t.form.lastName,callback:function(e){t.$set(t.form,"lastName",e)},expression:"form.lastName"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("v-text-field",{attrs:{label:"Birthday","data-date":"","data-date-format":"YYYY-MMMM-DD",rules:t.nameRules,name:"birthDay",type:"Date",color:"primary",outlined:""},model:{value:t.form.birthDay,callback:function(e){t.$set(t.form,"birthDay",e)},expression:"form.birthDay"}})],1),t._v(" "),"edit"==this.type?s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"email"}}),t._v(" "),s("v-text-field",{attrs:{label:"Email",name:"Email",rules:t.loginEmailRules,type:"email",color:"primary",outlined:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1):t._e(),t._v(" "),"add"==t.type?s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"password"}}),t._v(" "),s("v-text-field",{attrs:{"append-icon":t.show?"mdi-eye":"mdi-eye-off",id:"password",label:"Password",name:"password",type:t.show?"text":"password",color:"primary",rules:[t.rules.required,t.rules.min],counter:"",outlined:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"department"}}),t._v(" "),s("v-select",{attrs:{items:t.department,"item-value":"id","item-text":"name","return-object":"",label:"Department",outlined:""},model:{value:t.form.department,callback:function(e){t.$set(t.form,"department",e)},expression:"form.department"}})],1),t._v(" "),null==t.form.verified&&"edit"==t.type?s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("v-btn",{attrs:{block:"",disabled:t.isVerifying,rounded:"",large:"",color:"primary"},on:{click:function(e){return t.VerifyUser(t.form.user_id)}}},[s("v-icon",{attrs:{left:""}},[t._v(t._s(t.isVerifying?"":"mdi-account-check-outline"))]),t._v("\n                                "+t._s(t.isVerifying?"Verifying...":"Verify user")+"\n                            ")],1)],1):t._e()],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1,t.$refs.RegisterForm.reset()}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary",loading:t.IsAddUpdating},on:{click:function(e){return t.validate()}}},[t._v("\n                    "+t._s("add"==this.type?"Add":"Update"))])],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.Deldialog,callback:function(e){t.Deldialog=e},expression:"Deldialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("\n                Are you sure you want to delete this?\n            ")]),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){t.Deldialog=!1,t.$refs.RegisterForm.reset()}}},[t._v("\n                    No\n                ")]),t._v(" "),s("v-btn",{attrs:{loading:t.IsDeleting,color:"primary",text:""},on:{click:function(e){return t.deleteUser()}}},[t._v("\n                    Yes\n                ")])],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.ResetPassworddialog,callback:function(e){t.ResetPassworddialog=e},expression:"ResetPassworddialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("\n                Are you sure you want to reset this user password?\n            ")]),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){t.ResetPassworddialog=!1,t.IsResetting=!1}}},[t._v("\n                    No\n                ")]),t._v(" "),s("v-btn",{attrs:{loading:t.isConfirmReset,color:"primary",text:""},on:{click:function(e){return t.updatePass()}}},[t._v("\n                    Yes\n                ")])],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"500",persistent:""},model:{value:t.dialog_multi_user,callback:function(e){t.dialog_multi_user=e},expression:"dialog_multi_user"}},[s("v-card",[s("v-card-title",{},[t._v("\n                Bulk Add Teachers\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("v-container",[s("v-form",{ref:"RegisterForm",staticClass:"text-center ",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-row",{staticClass:"pa-5"},[s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("v-file-input",{attrs:{accept:".csv","prepend-inner-icon":"mdi-file-outline","prepend-icon":"",chips:"",outlined:"",label:"Upload CSV File",disabled:null!=t.json_users_text_area},on:{change:t.onFileChange}})],1)],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dialog_multi_user=!1,t.json_users_text_area="",t.json_users_file=null}}},[t._v("Cancel\n                ")]),t._v(" "),s("v-btn",{attrs:{text:"",loading:t.IsBulkadding,disabled:t.IsBulkadding},on:{click:function(e){return t.addBulk()}}},[t._v("\n                    Add Bulk")])],1)],1)],1)],1)}),[],!1,null,"dbab2b5a",null).exports}}]);