"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[575],{30575:(t,i,e)=>{e.r(i),e.d(i,{default:()=>p});var n,o=e(87757),a=e.n(o),s=e(52239),r=e(20629);function c(t,i,e,n,o,a,s){try{var r=t[a](s),c=r.value}catch(t){return void e(t)}r.done?i(c):Promise.resolve(c).then(n,o)}function l(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?l(Object(e),!0).forEach((function(i){u(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function u(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}const v={props:["role"],data:function(){return{notificationType:"all",notifTypeName:"all",notificationList:{},notifLength:null,isSelected:null,currentSelectedType:null,AttachData:{},isAccepted:!1}},computed:f({},(0,r.Se)(["get_notification","get_notification_count","ShowPage","ShowLoadMore","LastPage","isGetting"])),methods:f(f(f(f(f(f(f(f(f({},(0,r.nv)(["fetchNotification"])),(0,r.nv)(["fetchNotificationCount"])),(0,r.nv)(["ShowMore"])),(0,r.nv)(["ShowLess"])),(0,r.nv)(["LessNotificationCount"])),(0,r.nv)(["UnreadMessage"])),(0,r.nv)(["HideNotification"])),(0,r.nv)(["markAsReadNotification"])),{},(n={test:function(t){this.testdata=t},format_date:function(t){if(t)return(0,s.Z)(String(t)).format("MMMM DD, h:mm a")},ShowMore:function(){this.$store.dispatch("ShowMore",this.ShowPage)},getNotificationList:function(){var t,i=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.$route.params.slug!=i.notifTypeName&&i.$router.replace({params:{slug:i.notifTypeName}}),i.currentSelectedType!=i.notificationType&&(i.currentSelectedType=i.notificationType,i.$store.dispatch("fetchNotification",i.notificationType));case 2:case"end":return t.stop()}}),t)})),function(){var i=this,e=arguments;return new Promise((function(n,o){var a=t.apply(i,e);function s(t){c(a,n,o,s,r,"next",t)}function r(t){c(a,n,o,s,r,"throw",t)}s(void 0)}))})()},NotificationHide:function(t,i,e){var n=this;this.$store.dispatch("HideNotification",t).then((function(t){200==t&&(n.get_notification.splice(i,1),1!=e&&n.$store.dispatch("LessNotificationCount"))}))},markAsread:function(t){var i=this;this.AttachData.id=t,this.AttachData.accepted=this.isAccepted,this.$store.dispatch("markAsReadNotification",this.AttachData).then((function(e){200==e&&(i.get_notification.forEach((function(e){e.n_id==t&&(e.status=1,i.isAccepted&&(e.notification_accepted=1))})),i.$store.dispatch("LessNotificationCount"))}))},markAllasRead:function(){var t=this;axios.post("/api/notification/mark-all").then((function(i){t.get_notification.forEach((function(t){null==t.status&&(t.status=1)}));for(var e=0;e<i.data;e++)t.$store.dispatch("LessNotificationCount")}))}},u(n,"ShowMore",(function(){this.AttachData.type=this.notificationType,this.AttachData.page=this.ShowPage,this.$store.dispatch("ShowMore",this.AttachData)})),u(n,"GotoThisNotification",(function(t){if(null!=t.status&&0!=t.status||this.markAsread(t.n_id),"classwork_assigned"==t.notification_type){var i="/classwork/"+t.c_id+"/classwork-details";(this.$route.path!=i||this.$route.query.clwk!=t.notification_attachments)&&this.$router.push({path:"/classwork/"+t.c_id+"/classwork-details?clwk="+t.notification_attachments})}else if("post_annoucement"==t.notification_type||"class_invite"==t.notification_type||"post_reply"==t.notification_type){var e="/course/"+t.c_id+"/announcement";this.$route.path!=e&&this.$router.push({path:e})}else if("class_joined"==t.notification_type)this.$router.push({name:"Student-list",params:{id:t.c_id},query:{view:"list"}});else if("classwork_submission"==t.notification_type){var n="/classwork/"+t.c_id+"/classwork-details";(this.$route.path!=n||this.$route.query.clwk!=t.notification_attachments)&&this.$router.push({path:"/classwork/"+t.c_id+"/submission-list?clwk="+t.notification_attachments})}else if("classwork_graded"==t.notification_type){var o="/classwork/"+t.from_course+"/classwork-details";(this.$route.path!=o||this.$route.query.clwk!=t.notification_attachments)&&this.$router.push({path:"/classwork/"+t.from_course+"/classwork-details?clwk="+t.notification_attachments})}})),n)),mounted:function(){this.getNotificationList()}};const p=(0,e(51900).Z)(v,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("v-card",{staticClass:"pa-0 ma-0",attrs:{flat:"","max-height":"600"}},[e("v-card-title",[e("span",{staticClass:"text-h6"},[t._v("Notifications \r\n        "),e("v-icon",{attrs:{right:""}},[t._v("\r\n            mdi-bell\r\n        ")])],1)]),t._v(" "),e("div",{staticClass:"pl-2 pr-2"},[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{staticClass:"pa-0 ma-0 mb-2",attrs:{cols:"12"}},[e("v-divider")],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"2"}},[e("v-tabs",{attrs:{"active-class":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","show-arrows":"",vertical:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm,centered:t.$vuetify.breakpoint.xs&&t.$vuetify.breakpoint.sm}},[e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="all",t.notifTypeName="all",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                 mdi-bell\r\n                ")]),t._v("\r\n                "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"All")+"\r\n                \r\n            ")],1),t._v(" "),e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="post_annoucement",t.notifTypeName="announcement",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-bullhorn-outline\r\n              ")]),t._v("\r\n              \r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Announcement")+"\r\n            ")],1),t._v(" "),e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="classwork_assigned",t.notifTypeName="classwork",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-book-open-variant\r\n              ")]),t._v("\r\n              \r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Classwork")+"\r\n            ")],1),t._v(" "),"Student"==t.role?e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="publish_module",t.notifTypeName="Modules",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-book-variant-multiple\r\n              ")]),t._v("\r\n              \r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Module")+"\r\n            ")],1):t._e(),t._v(" "),"Student"==t.role?e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="class_invite",t.notifTypeName="class-invites",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs&&!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-account-plus\r\n              ")]),t._v("\r\n              \r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Class Invites")+"\r\n            ")],1):t._e(),t._v(" "),e("v-tab",{class:t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"d-flex justify-start",on:{click:function(i){t.notificationType="Hidden",t.notifTypeName="hidden",t.getNotificationList()}}},[e("v-icon",{attrs:{left:!t.$vuetify.breakpoint.xs||!t.$vuetify.breakpoint.sm}},[t._v("\r\n                mdi-eye-off\r\n              ")]),t._v("\r\n              "+t._s(t.$vuetify.breakpoint.xs||t.$vuetify.breakpoint.sm?"":"Hidden")+"\r\n            ")],1)],1)],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"9"}},[t.isGetting?e("div",[e("v-skeleton-loader",{attrs:{"max-width":"200",type:"text"}}),t._v(" "),t._l(4,(function(t){return e("v-skeleton-loader",{key:t,attrs:{"max-width":"600",type:"list-item-avatar-two-line"}})}))],2):e("v-list",[0!=t.notifLength?e("v-list-item",[e("v-list-item-content",[e("div",{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"body-1 text-uppercase"},[t._v(t._s(t.notifTypeName))]),t._v(" "),0==t.get_notification_count||t.isGetting?t._e():e("v-btn",{attrs:{small:"",color:"primary"},on:{click:t.markAllasRead}},[t._v("\r\n                                Mark all as read\r\n                                "),e("v-icon",{attrs:{right:""}},[t._v("mdi-check")])],1)],1)])],1):t._e(),t._v(" "),0==t.get_notification.length?e("v-list-item",[e("v-list-item-content",[e("v-row",{staticClass:"mt-3",attrs:{align:"center",justify:"center"}},[e("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e("v-icon",{staticStyle:{"font-size":"2rem"}},[t._v("\r\n                                        mdi-bell-off\r\n                                    ")]),t._v(" "),e("p",[t._v(" Empty Notification  ")])],1)],1)],1)],1):t._e(),t._v(" "),t._l(t.get_notification,(function(i,n){return[e("v-list-item",{key:i.id,class:null==i.status||0==i.status?"grey_active":"",attrs:{link:""}},[e("v-list-item-avatar",{on:{click:function(e){return t.GotoThisNotification(i)}}},["class_invite"==i.notification_type||"class_joined"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"blue",large:""}},[t._v("mdi-account-plus")]):t._e(),t._v(" "),"post_annoucement"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"red",large:""}},[t._v("mdi-bullhorn-outline")]):t._e(),t._v(" "),"classwork_assigned"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"green",large:""}},[t._v(" mdi-book-open-variant")]):t._e(),t._v(" "),"post_reply"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"red",large:""}},[t._v(" mdi-comment-text")]):t._e(),t._v(" "),"classwork_submission"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"green",large:""}},[t._v("mdi-notebook-check")]):t._e(),t._v(" "),"classwork_graded"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"green",large:""}},[t._v("mdi-file-check")]):t._e(),t._v(" "),"publish_module"==i.notification_type?e("v-icon",{staticStyle:{"font-size":"1.7rem !important"},attrs:{color:"yellow darken-3",large:""}},[t._v("mdi-book-variant-multiple")]):t._e()],1),t._v(" "),e("v-list-item-content",{on:{click:function(e){return t.GotoThisNotification(i)}}},[e("v-list-item-title",{staticClass:"font-weight-medium",staticStyle:{"font-size":"14px"}},[e("v-badge",{attrs:{content:1==i.status?"":"new",value:1==i.status?"":"new",color:"post_annoucement"==i.notification_type||"post_reply"==i.notification_type?"red":"publish_module"==i.notification_type?"yellow darken-3":"class_invite"==i.notification_type||"class_joined"==i.notification_type?"blue":"classwork_assigned"==i.notification_type||"classwork_submission"==i.notification_type||"classwork_graded"==i.notification_type?"green":""}},[t._v("\r\n                                  "+t._s("class_joined"==i.notification_type&&"classwork_submission"==i.notification_type?"Join Class":"classwork_submission"==i.notification_type?"Classwork Submission":"post_reply"==i.notification_type?"Post Replies":i.name)+"\r\n                                ")])],1),t._v(" "),e("div",{staticStyle:{"font-size":"12px"}},[t._v("\r\n                                "+t._s(i.message)+"\r\n                            ")]),t._v(" "),e("small",[t._v(t._s(t.format_date(i.created_at)))])],1),t._v(" "),e("v-list-item-action",{staticStyle:{"z-index":"1"}},[e("v-list-item-action-text",[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var a=o.on,s=o.attrs;return[e("v-btn",t._g(t._b({staticStyle:{"z-index":"50"},attrs:{small:"",icon:""},on:{click:function(e){return t.NotificationHide(i.n_id,n,i.status)}}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Hide notification")])])],1),t._v(" "),e("v-spacer")],1)],1),t._v(" "),n<t.get_notification.length?e("v-divider",{key:n}):t._e()]})),t._v(" "),1!=t.LastPage?e("v-list-item",[e("v-list-item-content",[e("v-row",{attrs:{"align-content":"center",justify:"center"}},[e("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[t.ShowLoadMore?e("v-btn",{attrs:{rounded:"",text:"",color:"primary"},on:{click:t.ShowMore}},[t._v("Load More  "),e("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-down")])],1):t._e()],1)],1)],1)],1):t._e()],2)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);