"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9238],{8245:(t,e,a)=>{a.d(e,{Z:()=>r});var s=a(1519),i=a.n(s)()((function(t){return t[1]}));i.push([t.id,"v-text-field[type=date]::-webkit-calendar-picker-indicator,v-text-field[type=date]::-webkit-inner-spin-button{-webkit-appearance:none!important;display:none!important}",""]);const r=i},69238:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var s=a(87757),i=a.n(s),r=a(80008),o=a.n(r);function l(t,e,a,s,i,r,o){try{var l=t[r](o),n=l.value}catch(t){return void a(t)}l.done?e(n):Promise.resolve(n).then(s,i)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var r=t.apply(e,a);function o(t){l(r,s,i,o,n,"next",t)}function n(t){l(r,s,i,o,n,"throw",t)}o(void 0)}))}}const c={props:["Details","datetoday","classworkDetails"],data:function(){return{InputAvailability:["Always available","Set date & time","Unavailable"],InputShowAnswer:["After Classwork Done","Set Date"],valid:!1,ClassDetails:{},loading:!1,duedate:null,ShowAnswerDateFrom:null,ShowAnswerDateTo:null,from_date:null,to_date:null,datetimeString:"2021-01-01 12:00",formattedDatetime:"09-01-2021 12:00",textFieldProps:{appendIcon:"event"},dateProps:{headerColor:"primary",min:o()(Date.now()).format("YYYY-MM-DD")},FromdateProps:{headerColor:"primary",min:o()(this.datetoday).tz("Asia/Manila").format("YYYY-MM-DD")},TodateProps:{headerColor:"primary",min:o()(this.datetoday).tz("Asia/Manila").format("YYYY-MM-DD")},timeProps:{useSeconds:!1,ampmInTitle:!0},FromtimeProps:{useSeconds:!1,ampmInTitle:!0,min:null},TotimeProps:{useSeconds:!1,ampmInTitle:!0,min:null},showAns:!1,ReviewAnswer:!1,EnableDue:!1,response_late:!1,availability:null,availability_date:null,showAnsType:"After Classwork Done",GradingCriteria_id:"",GradingItems:[],FieldRules:[function(t){return!!t||"Field is required"}],isPublishing:!1,test:"",disabledDates:{to:new Date(Date.now()-864e4)},rules:[function(t){return!!t||"Field is required"}]}},methods:{validate:function(){var t=this;this.isPublishing=!this.isPublishing,this.$refs.publishForm.validate()?this.shareClasswork():setTimeout((function(){t.isPublishing=!t.isPublishing}),1e3)},setToDateStart:function(){this.to_date=o()(this.from_date).format("YYYY-MM-DD hh:mm"),this.TodateProps=o()(this.from_date).format("YYYY-MM-DD hh:mm")},shareClasswork:function(){"Set date & time"==this.availability?new Date(this.from_date).getTime()<new Date(this.to_date).getTime()?this.startSharing():(this.isPublishing=!this.isPublishing,this.toastError("Ivalid due date")):this.startSharing()},startSharing:function(){var t=this;return n(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new FormData,(a={}).classwork_id=t.ClassDetails.id,a.class_id=t.ClassDetails.class_id,a.availability=t.availability,a.from_date=o()(t.from_date).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),a.to_date=o()(t.to_date).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),a.showAnswer=t.showAns,a.ReviewAnswer=t.ReviewAnswer,a.showAnswerType=t.showAnsType,a.showAnswerDateFrom=o()(t.showAnswerDateFrom).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),a.showAnswerDateTo=o()(t.ShowAnswerDateTo).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),a.response_late=t.response_late,a.grading_id=t.GradingCriteria_id,axios.post("/api/classwork/share",a).then((function(e){if("Unshare"!=e.dat){var a=1==e.data.availability?"Due "+o()(t.to_date).format("MMMM D")+" at "+o()(t.to_date).format("h:mm a"):"";e.data.to_date=a,t.$emit("successPublish",e.data),t.toastSuccess("Classwork Successfully publish"),t.isPublishing=!t.isPublishing}else t.$emit("UnPublish")})).catch((function(t){}));case 15:case"end":return e.stop()}}),e)})))()},getPublishDetails:function(){var t=this;return n(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Date,t.duedate=o()(a).format("YYYY-MM-DD HH:mm:ss"),t.ClassDetails=t.Details;case 3:case"end":return e.stop()}}),e)})))()},getGradingCriteria:function(){var t=this;return n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/grading-criteria/all/"+t.$route.params.id).then((function(e){t.GradingItems=e.data}));case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getGradingCriteria(),this.getPublishDetails(),this.from_date=o()(this.datetoday).tz("Asia/Manila").format("YYYY-MM-DD h:mm"),this.TodateProps.min=o()(this.from_date).tz("Asia/Manila").format("YYYY-MM-DD"),this.TotimeProps.min=o()(this.from_date).tz("Asia/Manila").format("h:mm")}};var m=a(72446),d=a.n(m),p=a(8245),u={insert:"head",singleton:!1};d()(p.Z,u);p.Z.locals;const v=(0,a(51900).Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-form",{ref:"publishForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-title",[a("v-btn",{attrs:{large:"",icon:"",color:"secondary",text:"",disabled:t.loading},on:{click:function(e){return t.$emit("toggleDialog")}}},[a("v-icon",[t._v("mdi-close")])],1),t._v(" "),a("span",{staticClass:"h6"},[t._v("Publish to "),a("span",{staticClass:"primary--text"},[t._v('"'+t._s(t.ClassDetails.class_name)+'"')])])],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"mb-0":"","pb-0":""}},[a("v-row",[a("v-col",{staticClass:"pb-0 mb-0 mt-0 pt-0",attrs:{cols:"12"}},[a("v-select",{staticClass:"mb-0 pb-0",attrs:{dense:"","hide-details":"",rules:t.FieldRules,items:t.GradingItems,"item-text":"value","item-value":"id",outlined:"",label:"Grading Criteria"},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v("\n                                 "+t._s(e.item.name)+" - "+t._s(e.item.percentage+"%")+"\n                             ")]}},{key:"item",fn:function(e){return[t._v("\n                                 "+t._s(e.item.name)+" - "+t._s(e.item.percentage+"%")+"\n                             ")]}}]),model:{value:t.GradingCriteria_id,callback:function(e){t.GradingCriteria_id=e},expression:"GradingCriteria_id"}})],1),t._v(" "),a("v-col",{staticClass:"text-left pb-0 mb-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[a("div",{staticClass:"subtitle-1"},[t._v("Availability:")])]),t._v(" "),a("v-col",{staticClass:"text-left pb-0 mb-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[a("v-radio-group",{staticClass:"ml-2 mt-0 pt-0 mb-0 pb-0",attrs:{rules:t.rules,"hide-details":""},model:{value:t.availability,callback:function(e){t.availability=e},expression:"availability"}},t._l(t.InputAvailability,(function(e,s){return a("v-radio",{key:s,attrs:{label:t.InputAvailability[s],value:t.InputAvailability[s]}})})),1)],1),t._v(" "),"Set date & time"==t.availability?a("v-col",{staticClass:"pb-0 mb-0",attrs:{cols:"12"}},[a("v-row",{staticClass:"mt-0 pt-0 mb-0 pb-0"},[a("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","text-field-props":t.textFieldProps,"date-picker-props":t.FromdateProps,"time-picker-props":t.FromtimeProps,"time-format":"HH:mm",color:"primary"},on:{input:function(e){return t.setToDateStart()}},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1),t._v(" "),a("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"Datetimepicker",attrs:{label:"To","text-field-props":t.textFieldProps,"date-picker-props":t.TodateProps,"time-picker-props":t.TotimeProps,"time-format":"HH:mm",color:"primary"},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1),t._v(" "),a("v-col",{staticClass:"mt-0 pt-0 ",attrs:{cols:"12"}},[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{"hide-details":"",label:"Allow late submission"},model:{value:t.response_late,callback:function(e){t.response_late=e},expression:"response_late"}})],1)],1)],1):t._e(),t._v(" "),"Objective Type"==t.classworkDetails.type?a("v-col",{staticClass:"text-left pb-0 mb-0 mt-0 pt-2",attrs:{cols:"12"}},[a("v-divider"),t._v(" "),a("v-switch",{attrs:{"hide-details":"",label:"Review answer after submit"},model:{value:t.ReviewAnswer,callback:function(e){t.ReviewAnswer=e},expression:"ReviewAnswer"}})],1):t._e(),t._v(" "),t.ReviewAnswer?a("v-col",{staticClass:"text-left  pb-0 mb-0 mt-0 pt-0",attrs:{cols:"12"}},[a("v-checkbox",{staticClass:"pa-0 ma-0 ml-10",attrs:{"hide-details":"",label:"Show Correct Answer"},model:{value:t.showAns,callback:function(e){t.showAns=e},expression:"showAns"}})],1):t._e(),t._v(" "),t.showAns?a("v-col",{staticClass:"text-left pl-7 pa-0 ma-0",attrs:{cols:"12"}},[a("v-radio-group",{staticClass:"ml-12 mt-0 pt-0 mb-0 pb-0",attrs:{rules:t.rules},model:{value:t.showAnsType,callback:function(e){t.showAnsType=e},expression:"showAnsType"}},t._l(t.InputShowAnswer,(function(e,s){return a("v-radio",{key:s,attrs:{label:t.InputShowAnswer[s],value:t.InputShowAnswer[s]}})})),1)],1):t._e(),t._v(" "),"Set Date"==t.showAnsType?a("v-col",{staticClass:"pt-0 mt-0 pb-0 mb-0",attrs:{cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","text-field-props":t.textFieldProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps,"time-format":"HH:mm",color:"primary"},model:{value:t.showAnswerDateFrom,callback:function(e){t.showAnswerDateFrom=e},expression:"showAnswerDateFrom"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1),t._v(" "),a("v-col",{attrs:{cols:"6"}},[a("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"To","text-field-props":t.textFieldProps,"date-picker-props":t.dateProps,"time-picker-props":t.timeProps,"time-format":"HH:mm",color:"primary"},model:{value:t.ShowAnswerDateTo,callback:function(e){t.ShowAnswerDateTo=e},expression:"ShowAnswerDateTo"}},[a("template",{slot:"dateIcon"},[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("template",{slot:"timeIcon"},[a("v-icon",[t._v("mdi-clock")])],1)],2)],1)],1)],1):t._e()],1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"pb-2 pl-5 pr-5"},[a("v-btn",{attrs:{rounded:"",block:"",color:"primary",loading:t.isPublishing,disabled:t.loading},on:{click:function(e){return t.validate()}}},[t._v("\n                 Publish\n             ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);