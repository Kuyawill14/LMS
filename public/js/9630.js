"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9630],{3033:(t,e,s)=>{s.d(e,{Z:()=>a});var r=s(1519),i=s.n(r)()((function(t){return t[1]}));i.push([t.id,".v-input__slot{margin-bottom:0!important}",""]);const a=i},9630:(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});var r=s(7757),i=s.n(r),a=s(629),n=s(9669),o=s.n(n);function d(t,e,s,r,i,a,n){try{var o=t[a](n),d=o.value}catch(t){return void s(t)}o.done?e(d):Promise.resolve(d).then(r,i)}function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const u={data:function(){return{Deldialog:!1,dialog:!1,temp_id:"",IsDeleting:!1,IsAddUpdating:!1,IsResetting:!1,IsResetting_id:null,type:"",search:"",valid:!0,role:["Teacher","Student"],updateIndex:null,deleteIndex:null,form:new Form({firstName:"",middleName:"",lastName:"",email:"",password:"",password_confirmation:"",student_id:""}),studenIdRule:[function(t){return!!t||"Student Id is required"}],nameRules:[function(t){return!!t||"Field is required"},function(t){return t&&t.length<=20||"Name must be less than 20 characters"}],loginEmailRules:[function(t){return!!t||"Field is required"},function(t){return/.+@.+\..+/.test(t)||"Email must be valid"}],RoleRules:[function(t){return!!t||"Field is required"}],show:!1,show1:!1,rules:{required:function(t){return!!t||"Field is required."},min:function(t){return t&&t.length>=6||"min 6 characters"}},StudentList:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},(0,a.Se)(["getTeachers","filterTeacher"])),methods:{SetPassword:function(t){var e=t.replace(/\s+/g,"-").toLowerCase();this.form.password="LMS-"+e,this.show=!0},openAdd:function(){this.type="add",this.dialog=!0},openEdit:function(t,e){this.updateIndex=e,this.type="edit",this.dialog=!0,this.form.user_id=t.user_id,this.form.firstName=t.firstName,this.form.middleName=t.middleName,this.form.lastName=t.lastName,this.form.email=t.email,this.form.student_id=t.student_id,this.valid||this.$refs.RegisterForm.resetValidation()},openDelete:function(t,e){this.deleteIndex=e,this.delId=t,this.Deldialog=!0},updatePass:function(t){var e=this;this.IsResetting_id=t,this.IsResetting=!0,o().post("/api/admin/teachers/reset-password/"+t).then((function(t){e.toastSuccess(t.data),e.IsResetting=!1}))},deleteUser:function(){var t=this;this.IsDeleting=!0,o().delete("/api/admin/teachers/remove/"+this.delId).then((function(e){200==e.status?(t.StudentList.splice(t.deleteIndex,1),t.toastSuccess("User Successfully removed!"),t.IsDeleting=!1):(t.toastError("Something went wrong!"),t.IsDeleting=!1),t.Deldialog=!1,t.$store.dispatch("fetchAllTeachers")}))},updateTeacherDetails:function(){this.$store.dispatch("updateTeacher",this.form)},validate:function(){var t=this;this.IsAddUpdating=!0,this.$refs.RegisterForm.validate()?("add"==this.type&&(this.form.role="Student",this.form.password_confirmation=this.form.password,this.form.post("/api/admin/add/student").then((function(e){t.$refs.RegisterForm.reset(),t.valid=!0,t.dialog=!1,t.IsAddUpdating=!1,t.StudentList.push(e.data)}))),"edit"==this.type&&(this.form.post("/api/admin/teachers/update/"+this.form.user_id).then((function(){t.updateDataInfrontEnd(t.form),t.valid=!0,t.dialog=!1,t.IsAddUpdating=!1})),this.toastSuccess("User Successfully Updated!"))):this.IsAddUpdating=!1,this.valid=!1,this.IsAddUpdating=!1},getStudent:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o().get("/api/admin/students/all").then((function(t){e.StudentList=t.data}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(r,i){var a=t.apply(e,s);function n(t){d(a,r,i,n,o,"next",t)}function o(t){d(a,r,i,n,o,"throw",t)}n(void 0)}))})()},updateDataInfrontEnd:function(t){this.StudentList[this.updateIndex].user_id=t.user_id,this.StudentList[this.updateIndex].firstName=t.firstName,this.StudentList[this.updateIndex].middleName=t.middleName,this.StudentList[this.updateIndex].lastName=t.lastName,this.StudentList[this.updateIndex].email=t.email,this.StudentList[this.updateIndex].student_id=t.student_id,this.$refs.RegisterForm.reset()}},mounted:function(){this.getStudent()}};var m=s(2446),f=s.n(m),v=s(3033),p={insert:"head",singleton:!1};f()(v.Z,p);v.Z.locals;const h=(0,s(1900).Z)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pt-4"},[s("h2",[t._v("\n        Manage Students\n    ")]),t._v(" "),s("v-btn",{attrs:{bottom:"",color:"primary",dark:"",fab:"",fixed:"",right:""},on:{click:function(e){return t.openAdd()}}},[s("v-icon",[t._v("mdi-plus")])],1),t._v(" "),s("v-row",{staticClass:"pt-2"},[s("v-col",[s("v-card",{attrs:{elevation:"2"}},[s("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",[t._v("\n                                    STUDENT ID\n                                ")]),t._v(" "),s("th",[t._v("\n                                    Last Name\n                                ")]),t._v(" "),s("th",[t._v("\n                                    First Name\n                                ")]),t._v(" "),s("th",[t._v("\n                                    Middle Name\n                                ")]),t._v(" "),s("th",[t._v("\n                                    Email\n                                ")]),t._v(" "),s("th",[t._v("\n                                    Password Reset\n                                ")]),t._v(" "),s("th",[t._v("\n                                    Action\n                                ")])])]),t._v(" "),s("tbody",[t._l(t.StudentList,(function(e,r){return s("tr",{key:r},[s("td",[t._v(" "+t._s(e.student_id)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.lastName)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.firstName)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.middleName)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.email)+" ")]),t._v(" "),s("td",[s("v-btn",{attrs:{color:"primary",loading:t.IsResetting&&t.IsResetting_id==e.user_id},on:{click:function(s){return t.updatePass(e.user_id)}}},[t._v("\n                                        Reset Password\n                                    ")])],1),t._v(" "),s("td",[s("v-btn",{attrs:{icon:"",color:"success"},on:{click:function(s){return t.openEdit(e,r)}}},[s("v-icon",[t._v("\n                                        mdi-pencil\n                                    ")])],1),t._v(" "),s("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(s){return t.openDelete(e.user_id,r)}}},[s("v-icon",[t._v("\n                                        mdi-delete\n                                    ")])],1)],1)])})),t._v(" "),0==t.StudentList.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"42"}},[t._v(" No data available")])]):t._e()],2)]},proxy:!0}])})],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{},[t._v("\n                "+t._s("add"==this.type?"Add Student":"Update Student")+"\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("v-container",[s("v-form",{ref:"RegisterForm",staticClass:"text-center ",attrs:{autocomplete:"off","lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-row",{staticClass:"pa-5"},[s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"student_id"}}),t._v(" "),s("v-text-field",{attrs:{rules:t.studenIdRule,label:"Student ID Number",name:"student_id",type:"number",color:"primary",outlined:""},model:{value:t.form.student_id,callback:function(e){t.$set(t.form,"student_id",e)},expression:"form.student_id"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"firstName"}}),t._v(" "),s("v-text-field",{attrs:{rules:t.nameRules,label:"First Name",name:"firstName",type:"text",color:"primary",outlined:""},model:{value:t.form.firstName,callback:function(e){t.$set(t.form,"firstName",e)},expression:"form.firstName"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"middleName"}}),t._v(" "),s("v-text-field",{attrs:{label:"Middle Name",rules:t.nameRules,name:"middleName",type:"text",color:"primary",outlined:""},model:{value:t.form.middleName,callback:function(e){t.$set(t.form,"middleName",e)},expression:"form.middleName"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"lastName"}}),t._v(" "),s("v-text-field",{attrs:{label:"Last Name",rules:t.nameRules,name:"lastname",type:"text",color:"primary",outlined:""},on:{keyup:function(e){return t.SetPassword(t.form.lastName)}},model:{value:t.form.lastName,callback:function(e){t.$set(t.form,"lastName",e)},expression:"form.lastName"}})],1),t._v(" "),s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"email"}}),t._v(" "),s("v-text-field",{attrs:{label:"Email",name:"Email",rules:t.loginEmailRules,type:"email",color:"primary",outlined:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),"add"==t.type?s("v-col",{staticClass:"ma-0 pa-0 mb-1",attrs:{cols:"12",md:"12"}},[s("HasError",{staticClass:"error--text",attrs:{form:t.form,field:"password"}}),t._v(" "),s("v-text-field",{attrs:{"append-icon":t.show?"mdi-eye":"mdi-eye-off",id:"password",label:"Password",name:"password",type:t.show?"text":"password",color:"primary",rules:[t.rules.required,t.rules.min],counter:"",outlined:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e()],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1,t.$refs.RegisterForm.reset()}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary",loading:t.IsAddUpdating},on:{click:function(e){return t.validate()}}},[t._v("\n                    "+t._s("add"==this.type?"Add":"Update"))])],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.Deldialog,callback:function(e){t.Deldialog=e},expression:"Deldialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("\n                Are you sure you want to delete this?\n            ")]),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){t.Deldialog=!1,t.$refs.RegisterForm.reset()}}},[t._v("\n                    No\n                ")]),t._v(" "),s("v-btn",{attrs:{loading:t.IsDeleting,color:"primary",text:""},on:{click:function(e){return t.deleteUser()}}},[t._v("\n                    Yes\n                ")])],1)],1)],1)],1)}),[],!1,null,"60f3647f",null).exports}}]);