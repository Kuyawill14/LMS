"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6994],{76994:(t,s,e)=>{e.r(s),e.d(s,{default:()=>u});var a=e(87757),i=e.n(a),l=e(80008),r=e.n(l);function o(t,s,e,a,i,l,r){try{var o=t[l](r),n=o.value}catch(t){return void e(t)}o.done?s(n):Promise.resolve(n).then(a,i)}function n(t){return function(){var s=this,e=arguments;return new Promise((function(a,i){var l=t.apply(s,e);function r(t){o(l,a,i,r,n,"next",t)}function n(t){o(l,a,i,r,n,"throw",t)}r(void 0)}))}}const m={props:["Details"],data:function(){return{InputAvailability:["Always available","Set date & time","Unavailable"],InputShowAnswer:["After Classwork Done","Set Date"],valid:!1,ClassDetails:{},PublishDetails:[],loading:!1,duedate:null,ShowAnswerDate:null,datetime:new Date,datetimeString:"2021-01-01 12:00",formattedDatetime:"09-01-2021 12:00",textFieldProps:{appendIcon:"event"},dateProps:{headerColor:"primary",min:r()(Date.now()).format("YYYY-MM-DD")},FromdateProps:{headerColor:"primary",min:r()(Date.now()).format("YYYY-MM-DD")},FromdateAnswerProps:{headerColor:"primary",min:r()(Date.now()).format("YYYY-MM-DD")},TodateProps:{headerColor:"primary",min:r()(Date.now()).format("YYYY-MM-DD")},TodateAnswerProps:{headerColor:"primary",min:r()(Date.now()).format("YYYY-MM-DD")},timeProps:{useSeconds:!1,ampmInTitle:!0},FromtimeProps:{useSeconds:!1,ampmInTitle:!0,min:null},FromtimeAnswerProps:{useSeconds:!1,ampmInTitle:!0,min:null},TotimeProps:{useSeconds:!1,ampmInTitle:!0,min:null},TotimeAnswerProps:{useSeconds:!1,ampmInTitle:!0,min:null},showAns:!1,ReviewAns:!1,EnableDue:!1,response_late:!1,availability:null,availability_date:null,showAnsType:null,GradingCriteria_id:"",GradingItems:[],FieldRules:[function(t){return!!t||"Field is required"}],isPublishing:!1,isLoading:!0,rules:[function(t){return!!t||"Field is required"}]}},methods:{validate:function(){var t=this;this.isPublishing=!this.isPublishing,this.$refs.publishForm.validate()?this.UpdateShareClassworkDetails():setTimeout((function(){t.isPublishing=!t.isPublishing}),1e3)},setToDateStart:function(){this.PublishDetails.to_date=r()(this.PublishDetails.from_date).format("YYYY-MM-DD hh:mm"),this.TodateProps.min=r()(this.PublishDetails.from_date).format("YYYY-MM-DD"),this.TotimeProps.min=r()(this.PublishDetails.from_date).format("hh:mm")},setShowAnswerToDateStart:function(){this.PublishDetails.showDateTo=r()(this.PublishDetails.showDateFrom).format("YYYY-MM-DD hh:mm"),this.TodateAnswerProps.min=r()(this.PublishDetails.showDateFrom).format("YYYY-MM-DD"),this.TotimeAnswerProps.min=r()(this.PublishDetails.showDateFrom).format("hh:mm")},UpdateShareClassworkDetails:function(){var t=this;return n(i().mark((function s(){return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t.PublishDetails.from_date=r()(t.PublishDetails.from_date).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),t.PublishDetails.to_date=r()(t.PublishDetails.to_date).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),t.PublishDetails.showDateFrom=r()(t.PublishDetails.showDateFrom).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),t.PublishDetails.showDateTo=r()(t.PublishDetails.showDateTo).tz("Asia/Manila").format("YYYY-MM-DD HH:mm:ss"),t.PublishDetails.availability=t.availability,t.PublishDetails.showAnswerType=t.showAnsType,axios.put("/api/classwork/UpdatePublish/"+t.PublishDetails.id,t.PublishDetails).then((function(s){200==s.status&&(t.$emit("successPublish"),t.isPublishing=!t.isPublishing)}));case 7:case"end":return s.stop()}}),s)})))()},getGradingCriteria:function(){var t=this;return n(i().mark((function s(){return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:axios.get("/api/grading-criteria/all/"+t.$route.params.id).then((function(s){t.GradingItems=s.data}));case 1:case"end":return s.stop()}}),s)})))()},getPublishDetails:function(){var t=this;return n(i().mark((function s(){return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:axios.get("/api/classwork/publishClassworkDetails/"+t.Details.classwork_id).then((function(s){t.PublishDetails=s.data,t.availability=1==t.PublishDetails.availability?"Set date & time":2==t.PublishDetails.availability?"Unavailable":"Always available",t.showAnsType=null!=t.PublishDetails.showAnswerType?t.showAnsType=t.PublishDetails.showAnswerType?"Set Date":"After Classwork Done":t.showAnsType="",t.PublishDetails.from_date=r()(t.PublishDetails.from_date).tz("Asia/Manila").format("YYYY-MM-DD HH:mm"),t.PublishDetails.to_date=r()(t.PublishDetails.to_date).tz("Asia/Manila").format("YYYY-MM-DD HH:mm"),t.PublishDetails.showDateFrom=r()(t.PublishDetails.showDateFrom).tz("Asia/Manila").format("YYYY-MM-DD HH:mm"),t.PublishDetails.showDateTo=r()(t.PublishDetails.showDateTo).tz("Asia/Manila").format("YYYY-MM-DD HH:mm"),t.isLoading=!t.isLoading}));case 1:case"end":return s.stop()}}),s)})))()},format_date:function(t){if(t)return r().parseZone(String(t)).format("YYYY-MM-DD HH:MM:SS")}},mounted:function(){this.getGradingCriteria(),this.getPublishDetails()}};const u=(0,e(51900).Z)(m,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-card",[t.isLoading?e("v-container",{staticClass:"fill-height",staticStyle:{height:"400px"}},[e("v-row",{attrs:{"align-content":"center",justify:"center"}},[e("v-col",{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v("\n             Loading\n         ")]),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"5"}})],1)],1)],1):t._e(),t._v(" "),t.isLoading?t._e():e("v-form",{ref:"publishForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(s){t.valid=s},expression:"valid"}},[e("v-card-title",[e("v-btn",{attrs:{icon:"",large:"",color:"secondary",disabled:t.loading},on:{click:function(s){return t.$emit("toggleDialog")}}},[e("v-icon",[t._v("mdi-close")])],1),t._v(" "),e("span",{staticClass:"h6"},[t._v("Publish to "),e("span",{staticClass:"primary--text"},[t._v('"'+t._s(t.Details.class_name)+'"')])])],1),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"mb-0":"","pb-0":""}},[e("v-row",[e("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[e("v-select",{attrs:{dense:"","hide-details":"",rules:t.FieldRules,items:t.GradingItems,"item-text":"value","item-value":"id",outlined:"",label:"Grading Criteria"},scopedSlots:t._u([{key:"selection",fn:function(s){return[t._v("\n                                 "+t._s(s.item.name)+" - "+t._s(s.item.percentage+"%")+"\n                             ")]}},{key:"item",fn:function(s){return[t._v("\n                                 "+t._s(s.item.name)+" - "+t._s(s.item.percentage+"%")+"\n                             ")]}}],null,!1,2821306268),model:{value:t.PublishDetails.grading_criteria,callback:function(s){t.$set(t.PublishDetails,"grading_criteria",s)},expression:"PublishDetails.grading_criteria"}})],1),t._v(" "),e("v-col",{staticClass:"text-left mb-0 pb-0 ",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[e("div",{staticClass:"subtitle-1 mb-1"},[t._v("Availability:")])]),t._v(" "),e("v-col",{staticClass:"text-left mb-0 pb-0",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[e("v-radio-group",{staticClass:"ml-2 mt-0 pt-0 mb-0 pb-0",attrs:{rules:t.rules,"hide-details":""},model:{value:t.availability,callback:function(s){t.availability=s},expression:"availability"}},t._l(t.InputAvailability,(function(s,a){return e("v-radio",{key:a,attrs:{label:t.InputAvailability[a],value:t.InputAvailability[a]}})})),1)],1),t._v(" "),"Set date & time"==t.availability?e("v-col",{staticClass:"mb-0 pb-0 ",attrs:{cols:"12"}},[e("v-row",{staticClass:"mt-0 pt-0 mb-0 pb-0"},[e("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[e("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","text-field-props":t.textFieldProps,"date-picker-props":t.FromdateProps,"time-picker-props":t.FromtimeProps,"time-format":"HH:mm",color:"primary"},on:{input:function(s){return t.setToDateStart()}},model:{value:t.PublishDetails.from_date,callback:function(s){t.$set(t.PublishDetails,"from_date",s)},expression:"PublishDetails.from_date"}})],1),t._v(" "),e("v-col",{staticClass:"mt-0 pt-0 mb-0 pb-0",attrs:{cols:"6"}},[e("v-datetime-picker",{staticClass:"Datetimepicker",attrs:{label:"To","text-field-props":t.textFieldProps,"date-picker-props":t.TodateProps,"time-picker-props":t.TotimeProps,color:"primary"},model:{value:t.PublishDetails.to_date,callback:function(s){t.$set(t.PublishDetails,"to_date",s)},expression:"PublishDetails.to_date"}})],1),t._v(" "),e("v-col",{staticClass:"text-left pb-0 mb-0 mt-0 pt-0",attrs:{cols:"12"}},[e("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{label:"Allow late submission"},model:{value:t.PublishDetails.response_late,callback:function(s){t.$set(t.PublishDetails,"response_late",s)},expression:"PublishDetails.response_late"}})],1)],1)],1):t._e(),t._v(" "),e("v-col",{staticClass:"text-left pb-0 mb-0 pt-2 mt-0",attrs:{cols:"12"}},[e("v-divider"),t._v(" "),e("v-switch",{attrs:{"hide-details":"",label:"Review answer after submit"},model:{value:t.PublishDetails.reviewAnswer,callback:function(s){t.$set(t.PublishDetails,"reviewAnswer",s)},expression:"PublishDetails.reviewAnswer"}})],1),t._v(" "),t.PublishDetails.reviewAnswer?e("v-col",{staticClass:"text-left mb-0 pb-0 mt-0 pt-0 mt-2",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[e("v-checkbox",{staticClass:"pa-0 ma-0 ml-11",attrs:{"hide-details":"",label:"Show Correct Answer"},model:{value:t.PublishDetails.showAnswer,callback:function(s){t.$set(t.PublishDetails,"showAnswer",s)},expression:"PublishDetails.showAnswer"}})],1):t._e(),t._v(" "),t.PublishDetails.showAnswer?e("v-col",{staticClass:"text-left pl-8 mb-0 pb-0 mt-0 pt-0 ",attrs:{"ma-0":"","pa-0":"",cols:"12"}},[e("v-radio-group",{staticClass:"ml-12 mt-1 pt-0 mb-0 pb-0",attrs:{rules:t.rules,"hide-details":""},model:{value:t.showAnsType,callback:function(s){t.showAnsType=s},expression:"showAnsType"}},t._l(t.InputShowAnswer,(function(s,a){return e("v-radio",{key:a,attrs:{label:t.InputShowAnswer[a],value:t.InputShowAnswer[a]}})})),1)],1):t._e(),t._v(" "),"Set Date"==t.showAnsType?e("v-col",{staticClass:"pt-0 mt-0 pb-0 mb-0",attrs:{cols:"12"}},[e("v-row",{staticClass:"mt-0 pt-0"},[e("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"6"}},[e("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"From","text-field-props":t.textFieldProps,"date-picker-props":t.FromdateAnswerProps,"time-picker-props":t.FromtimeAnswerProps,"time-format":"HH:mm",color:"primary"},on:{input:function(s){return t.setShowAnswerToDateStart()}},model:{value:t.PublishDetails.showDateFrom,callback:function(s){t.$set(t.PublishDetails,"showDateFrom",s)},expression:"PublishDetails.showDateFrom"}})],1),t._v(" "),e("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"6"}},[e("v-datetime-picker",{staticClass:"mt-0 pt-0",attrs:{label:"To",disabled:null==t.PublishDetails.showDateFrom,"text-field-props":t.textFieldProps,"date-picker-props":t.TodateAnswerProps,"time-picker-props":t.TotimeAnswerProps,"time-format":"HH:mm",color:"primary"},model:{value:t.PublishDetails.showDateTo,callback:function(s){t.$set(t.PublishDetails,"showDateTo",s)},expression:"PublishDetails.showDateTo"}})],1)],1)],1):t._e()],1)],1)],1),t._v(" "),e("v-card-actions",{staticClass:"pb-5 pl-5 pr-5"},[e("v-btn",{attrs:{rounded:"",block:"",color:"primary",loading:t.isPublishing,disabled:t.loading},on:{click:function(s){return t.validate()}}},[t._v("\n                 Update\n             ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);