"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1306],{82055:(e,n,r)=>{r.r(n),r.d(n,{default:()=>c});var i=r(87757),s=r.n(i);function a(e,n,r,i,s,a,t){try{var o=e[a](t),c=o.value}catch(e){return void r(e)}o.done?n(c):Promise.resolve(c).then(i,s)}function t(e){return function(){var n=this,r=arguments;return new Promise((function(i,s){var t=e.apply(n,r);function o(e){a(t,i,s,o,c,"next",e)}function c(e){a(t,i,s,o,c,"throw",e)}o(void 0)}))}}const o={props:["get_CurrentUser"],data:function(){return{loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=6||"Min 6 characters"}},isEmailChange:!1,isResending:!1,ConfirmPassword:!1,show:!1,form:new Form({password:""}),isConfirming:!1}},methods:{toggleEmailChange:function(){var e=this;return t(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isEmailChange?e.isEmailChange=!e.isEmailChange:e.ConfirmPassword=!e.ConfirmPassword;case 1:case"end":return n.stop()}}),n)})))()},ResendVerification:function(){var e=this;return t(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isResending=!0,axios.post("/api/resend-verification",{email:e.get_CurrentUser.email}).then((function(n){1==n.data.success?(e.isResending=!1,e.toastSuccess(n.data.message)):(e.toastError(n.data.message),e.isResending=!1)})).catch((function(n){e.toastError(n.response.errors.email),e.toastError(n.response.data.message),e.isResending=!1}));case 2:case"end":return n.stop()}}),n)})))()},ConfirmUserPassword:function(){var e=this;return t(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isConfirming=!0,axios.post("/api/confirm-password",e.form).then((function(n){1==n.data.success?(e.ConfirmPassword=!1,e.isConfirming=!1,e.isEmailChange=!0):0==n.data.success&&(e.isConfirming=!1,e.toastError(n.data.message))})).catch((function(n){e.toastError(n.response.data.message),e.isConfirming=!1}));case 2:case"end":return n.stop()}}),n)})))()},UpdateAndSendVerification:function(){var e=this;return t(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:axios.post("/api/change-email",{email:e.get_CurrentUser.email,id:e.get_CurrentUser.user_id}).then((function(n){1==n.data.success?(e.toastSuccess(n.data.message),e.isEmailChange=!1):e.toastError(n.data.message)})).catch((function(n){e.toastError(n.response.data.errors.email[0])}));case 1:case"end":return n.stop()}}),n)})))()}}};const c=(0,r(51900).Z)(o,(function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.ConfirmPassword,callback:function(n){e.ConfirmPassword=n},expression:"ConfirmPassword"}},[r("v-card",[r("v-card-title",[r("v-btn",{attrs:{icon:""},on:{click:function(n){e.ConfirmPassword=!1}}},[r("v-icon",[e._v("\n                    mdi-close\n                ")])],1),e._v("\n            Confirm Password\n        ")],1),e._v(" "),r("v-card-text",[e._v("Please enter you account password, to continue changing you email address.")]),e._v(" "),r("div",{staticClass:"pl-2 pr-2"},[r("v-text-field",{staticClass:"mb-0 pb-0",attrs:{dense:"",outlined:"","append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"password",label:"Password","prepend-inner-icon":"lock",hint:"At least 6 characters",color:"primary"},on:{"click:append":function(n){e.show=!e.show}},model:{value:e.form.password,callback:function(n){e.$set(e.form,"password",n)},expression:"form.password"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{block:"",color:"primary",rounded:"",loading:e.isConfirming},on:{click:function(n){return e.ConfirmUserPassword()}}},[e._v("\n            Confirm\n        ")])],1)],1)],1),e._v(" "),r("p",[e._v("If you have not received a verification email or if you have mistyped your email\n        address, you can resend the verification. ")]),e._v(" "),r("v-text-field",{attrs:{outlined:"",label:"Email",rules:e.loginEmailRules,name:"Email","prepend-inner-icon":"email",readonly:!e.isEmailChange,"append-icon":e.isEmailChange?"mdi-pencil":"mdi-pencil-off",dense:"",type:"email",color:"primary",required:""},on:{"click:append":e.toggleEmailChange},model:{value:e.get_CurrentUser.email,callback:function(n){e.$set(e.get_CurrentUser,"email",n)},expression:"get_CurrentUser.email"}}),e._v(" "),r("div",{staticClass:"text-left"},[e.isEmailChange?r("v-btn",{staticClass:"primary",attrs:{loading:e.isResending},on:{click:function(n){return e.UpdateAndSendVerification()}}},[e._v("\n            Update and Send New verification\n        ")]):e._e(),e._v(" "),e.isEmailChange?e._e():r("v-btn",{staticClass:"primary",attrs:{loading:e.isResending},on:{click:function(n){return e.ResendVerification()}}},[e._v("\n            Resend Mail\n        ")]),e._v(" "),e.isEmailChange?e._e():r("v-btn",{attrs:{color:"secondary"},on:{click:function(n){return e.$emit("CancelResend")}}},[e._v("\n            Cancel\n        ")])],1)],1)}),[],!1,null,null,null).exports}}]);