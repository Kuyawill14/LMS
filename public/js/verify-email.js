"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1306],{25313:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const s={data:function(){return{valid:!0,emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}],form:new Form({email:""}),isSending:!1}},methods:{validate:function(){this.$refs.ResetForm.validate()&&this.RequestPasswordReset()},RequestPasswordReset:function(){var e=this;this.isSending=!0,axios.put("/api/send_reset_password",this.form).then((function(t){1==t.data.success?(e.toastSuccess(t.data.message),e.isSending=!1,e.$emit("toggleLogin"),e.$refs.ResetForm.reset()):(e.toastError(t.data.message),e.isSending=!1)})).catch((function(t){e.isSending=!1,e.toastError("Something went wrong")}))}},mounted:function(){this.$emit("toggleIsloading")}};const i=(0,n(51900).Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"ResetForm",staticClass:"text-center",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.validate()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("vue-element-loading",{attrs:{active:e.isSending,text:"Sending please wait...",spinner:"bar-fade-scale",color:"#EF6C00"}}),e._v(" "),n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"ma-0 pa-0 text-left mt-4",attrs:{cols:"12",md:"8"}},[n("div",{staticClass:" text-md-h5 text-xs-h5 text-sm-h6 font-weight-bold"},[n("v-icon",{attrs:{left:"",large:""}},[e._v("mdi-lock")]),e._v(" Forgot your password?\r\n                ")],1),e._v(" "),n("p",{staticClass:"mt-2"},[e._v("Enter your email address and we'll send you link to reset your password")])]),e._v(" "),n("v-col",{staticClass:"ma-0 pa-0 mt-4",attrs:{cols:"12",md:"8"}},[n("v-text-field",{attrs:{loading:e.isSending,outlined:"",label:"Email",rules:e.emailRules,name:"Email","prepend-inner-icon":"email",dense:"",type:"email",color:"primary",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),n("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12",md:"8"}},[n("v-btn",{staticClass:"pl-10 pr-10 pt-5 pb-5",attrs:{disabled:!e.valid||e.isSending,type:"submit",rounded:"",color:"primary"}},[e._v(" "+e._s(e.isSending?"Sending...":"Reset password"))])],1),e._v(" "),n("v-col",{staticClass:"ma-0 pa-0 mt-4",attrs:{cols:"12",md:"8"}},[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("toggleLogin")}}},[e._v("Login")])])],1)],1)}),[],!1,null,null,null).exports},39533:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var s=n(87757),i=n.n(s);function a(e,t,n,s,i,a,r){try{var o=e[a](r),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(s,i)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function o(e){a(r,s,i,o,c,"next",e)}function c(e){a(r,s,i,o,c,"throw",e)}o(void 0)}))}}const o={props:["get_CurrentUser"],data:function(){return{loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=6||"Min 6 characters"}},isEmailChange:!1,isResending:!1,ConfirmPassword:!1,show:!1,form:new Form({password:""}),isConfirming:!1}},methods:{toggleEmailChange:function(){var e=this;return r(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isEmailChange?e.isEmailChange=!e.isEmailChange:e.ConfirmPassword=!e.ConfirmPassword;case 1:case"end":return t.stop()}}),t)})))()},ResendVerification:function(){var e=this;return r(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isResending=!0,axios.post("/api/resend-verification",{email:e.get_CurrentUser.email}).then((function(t){1==t.data.success?(e.isResending=!1,e.toastSuccess(t.data.message)):(e.toastError(t.data.message),e.isResending=!1)})).catch((function(t){e.toastError(t.response.errors.email),e.toastError(t.response.data.message),e.isResending=!1}));case 2:case"end":return t.stop()}}),t)})))()},ConfirmUserPassword:function(){var e=this;return r(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isConfirming=!0,axios.post("/api/confirm-password",e.form).then((function(t){1==t.data.success?(e.ConfirmPassword=!1,e.isConfirming=!1,e.isEmailChange=!0):0==t.data.success&&(e.isConfirming=!1,e.toastError(t.data.message))})).catch((function(t){e.toastError(t.response.data.message),e.isConfirming=!1}));case 2:case"end":return t.stop()}}),t)})))()},UpdateAndSendVerification:function(){var e=this;return r(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:axios.post("/api/change-email",{email:e.get_CurrentUser.email,id:e.get_CurrentUser.user_id}).then((function(t){1==t.data.success?(e.toastSuccess(t.data.message),e.isEmailChange=!1):e.toastError(t.data.message)})).catch((function(t){e.toastError(t.response.data.errors.email[0])}));case 1:case"end":return t.stop()}}),t)})))()}}};const c=(0,n(51900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.ConfirmPassword,callback:function(t){e.ConfirmPassword=t},expression:"ConfirmPassword"}},[n("v-card",[n("v-card-title",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.ConfirmPassword=!1}}},[n("v-icon",[e._v("\n                    mdi-close\n                ")])],1),e._v("\n            Confirm Password\n        ")],1),e._v(" "),n("v-card-text",[e._v("Please enter you account password, to continue changing you email address.")]),e._v(" "),n("div",{staticClass:"pl-2 pr-2"},[n("v-text-field",{staticClass:"mb-0 pb-0",attrs:{dense:"",outlined:"","append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"password",label:"Password","prepend-inner-icon":"lock",hint:"At least 6 characters",color:"primary"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{block:"",color:"primary",rounded:"",loading:e.isConfirming},on:{click:function(t){return e.ConfirmUserPassword()}}},[e._v("\n            Confirm\n        ")])],1)],1)],1),e._v(" "),n("p",[e._v("If you hvae not received a verification email or if you have mistyped your email\n        address, you can resend the verification mail. ")]),e._v(" "),n("v-text-field",{attrs:{outlined:"",label:"Email",rules:e.loginEmailRules,name:"Email","prepend-inner-icon":"email",readonly:!e.isEmailChange,"append-icon":e.isEmailChange?"mdi-pencil":"mdi-pencil-off",dense:"",type:"email",color:"primary",required:""},on:{"click:append":e.toggleEmailChange},model:{value:e.get_CurrentUser.email,callback:function(t){e.$set(e.get_CurrentUser,"email",t)},expression:"get_CurrentUser.email"}}),e._v(" "),n("div",{staticClass:"text-left"},[e.isEmailChange?n("v-btn",{staticClass:"primary",attrs:{loading:e.isResending},on:{click:function(t){return e.UpdateAndSendVerification()}}},[e._v("\n            Update and Send New verification\n        ")]):e._e(),e._v(" "),e.isEmailChange?e._e():n("v-btn",{staticClass:"primary",attrs:{loading:e.isResending},on:{click:function(t){return e.ResendVerification()}}},[e._v("\n            Resend Mail\n        ")])],1)],1)}),[],!1,null,null,null).exports}}]);