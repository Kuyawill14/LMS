"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1306],{5465:(e,n,t)=>{t.r(n),t.d(n,{default:()=>r});const s={data:function(){return{valid:!0,emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}],form:new Form({email:""}),isSending:!1}},methods:{RequestPasswordReset:function(){var e=this;this.isSending=!0,axios.put("/api/send_reset_password",this.form).then((function(n){1==n.data.success?(e.toastSuccess(n.data.message),e.isSending=!1,e.$emit("toggleLogin"),e.$refs.ResetForm.reset()):(e.toastError(n.data.message),e.isSending=!1)})).catch((function(n){e.isSending=!1,e.toastError("Something went wrong")}))}}};const r=(0,t(1900).Z)(s,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-form",{ref:"ResetForm",staticClass:"text-center",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(n){e.valid=n},expression:"valid"}},[t("vue-element-loading",{attrs:{active:e.isSending,text:"Sending please wait...",spinner:"bar-fade-scale",color:"#EF6C00"}}),e._v(" "),t("v-row",{attrs:{align:"center",justify:"center"}},[t("v-col",{staticClass:"ma-0 pa-0 text-left mt-4",attrs:{cols:"12",md:"8"}},[t("div",{staticClass:" text-md-h5 text-xs-h5 text-sm-h6 font-weight-bold"},[t("v-icon",{attrs:{left:"",large:""}},[e._v("mdi-lock")]),e._v(" Forgot your password?\r\n                ")],1),e._v(" "),t("p",{staticClass:"mt-2"},[e._v("Enter your email address and we'll send you link to reset your password")])]),e._v(" "),t("v-col",{staticClass:"ma-0 pa-0 mt-4",attrs:{cols:"12",md:"8"}},[t("v-text-field",{attrs:{loading:e.isSending,outlined:"",label:"Email",rules:e.emailRules,name:"Email","prepend-inner-icon":"email",dense:"",type:"email",color:"primary",required:""},model:{value:e.form.email,callback:function(n){e.$set(e.form,"email",n)},expression:"form.email"}})],1),e._v(" "),t("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12",md:"8"}},[t("v-btn",{staticClass:"pl-10 pr-10 pt-5 pb-5",attrs:{disabled:!e.valid||e.isSending,rounded:"",color:"primary"},on:{click:function(n){return e.RequestPasswordReset()}}},[e._v(" "+e._s(e.isSending?"Sending...":"Reset password"))])],1),e._v(" "),t("v-col",{staticClass:"ma-0 pa-0 mt-4",attrs:{cols:"12",md:"8"}},[t("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.$emit("toggleLogin")}}},[e._v("Login")])])],1)],1)}),[],!1,null,null,null).exports},8738:(e,n,t)=>{t.r(n),t.d(n,{default:()=>c});var s=t(7757),r=t.n(s);function a(e,n,t,s,r,a,i){try{var o=e[a](i),c=o.value}catch(e){return void t(e)}o.done?n(c):Promise.resolve(c).then(s,r)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(s,r){var i=e.apply(n,t);function o(e){a(i,s,r,o,c,"next",e)}function c(e){a(i,s,r,o,c,"throw",e)}o(void 0)}))}}const o={props:["get_CurrentUser"],data:function(){return{loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=6||"Min 6 characters"}},isEmailChange:!1,isResending:!1,ConfirmPassword:!1,show:!1,form:new Form({password:""}),isConfirming:!1}},methods:{toggleEmailChange:function(){var e=this;return i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isEmailChange?e.isEmailChange=!e.isEmailChange:e.ConfirmPassword=!e.ConfirmPassword;case 1:case"end":return n.stop()}}),n)})))()},ResendVerification:function(){var e=this;return i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isResending=!0,axios.post("/api/resend-verification",{email:e.get_CurrentUser.email}).then((function(n){1==n.data.success?(e.isResending=!1,e.toastSuccess(n.data.message)):(e.toastError(n.data.message),e.isResending=!1)})).catch((function(n){e.toastError(n.response.errors.email),e.toastError(n.response.data.message),e.isResending=!1}));case 2:case"end":return n.stop()}}),n)})))()},ConfirmUserPassword:function(){var e=this;return i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isConfirming=!0,axios.post("/api/confirm-password",e.form).then((function(n){1==n.data.success?(e.ConfirmPassword=!1,e.isConfirming=!1,e.isEmailChange=!0):0==n.data.success&&(e.isConfirming=!1,e.toastError(n.data.message))})).catch((function(n){e.toastError(n.response.data.message),e.isConfirming=!1}));case 2:case"end":return n.stop()}}),n)})))()},UpdateAndSendVerification:function(){var e=this;return i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:axios.post("/api/change-email",{email:e.get_CurrentUser.email,id:e.get_CurrentUser.user_id}).then((function(n){1==n.data.success?(e.toastSuccess(n.data.message),e.isEmailChange=!1):e.toastError(n.data.message)})).catch((function(n){e.toastError(n.response.data.errors.email[0]),console.log(n.response.data.errors.email[0])}));case 1:case"end":return n.stop()}}),n)})))()}}};const c=(0,t(1900).Z)(o,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.ConfirmPassword,callback:function(n){e.ConfirmPassword=n},expression:"ConfirmPassword"}},[t("v-card",[t("v-card-title",[t("v-btn",{attrs:{icon:""},on:{click:function(n){e.ConfirmPassword=!1}}},[t("v-icon",[e._v("\n                    mdi-close\n                ")])],1),e._v("\n            Confirm Password\n        ")],1),e._v(" "),t("v-card-text",[e._v("Please enter you account password, to continue changing you email address.")]),e._v(" "),t("div",{staticClass:"pl-2 pr-2"},[t("v-text-field",{staticClass:"mb-0 pb-0",attrs:{dense:"",outlined:"","append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"password",label:"Password","prepend-inner-icon":"lock",hint:"At least 6 characters",color:"primary"},on:{"click:append":function(n){e.show=!e.show}},model:{value:e.form.password,callback:function(n){e.$set(e.form,"password",n)},expression:"form.password"}})],1),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{block:"",color:"primary",rounded:"",loading:e.isConfirming},on:{click:function(n){return e.ConfirmUserPassword()}}},[e._v("\n            Confirm\n        ")])],1)],1)],1),e._v(" "),t("p",[e._v("If you hvae not received a verification email or if you have mistyped your email\n        address, you can resend the verification mail. ")]),e._v(" "),t("v-text-field",{attrs:{outlined:"",label:"Email",rules:e.loginEmailRules,name:"Email","prepend-inner-icon":"email",readonly:!e.isEmailChange,"append-icon":e.isEmailChange?"mdi-pencil":"mdi-pencil-off",dense:"",type:"email",color:"primary",required:""},on:{"click:append":e.toggleEmailChange},model:{value:e.get_CurrentUser.email,callback:function(n){e.$set(e.get_CurrentUser,"email",n)},expression:"get_CurrentUser.email"}}),e._v(" "),t("div",{staticClass:"text-left"},[e.isEmailChange?t("v-btn",{staticClass:"primary",attrs:{loading:e.isResending},on:{click:function(n){return e.UpdateAndSendVerification()}}},[e._v("\n            Update and Send New verification\n        ")]):e._e(),e._v(" "),e.isEmailChange?e._e():t("v-btn",{staticClass:"primary",attrs:{loading:e.isResending},on:{click:function(n){return e.ResendVerification()}}},[e._v("\n            Resend Mail\n        ")])],1)],1)}),[],!1,null,null,null).exports}}]);