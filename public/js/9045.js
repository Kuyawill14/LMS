"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9045],{9045:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var a=i(7757),s=i.n(a);function n(t,e,i,a,s,n,l){try{var o=t[n](l),r=o.value}catch(t){return void i(t)}o.done?e(r):Promise.resolve(r).then(a,s)}const l={props:["classworkDetails"],components:{removeAttachment:function(){return i.e(728).then(i.bind(i,728))},rubrics:function(){return i.e(2865).then(i.bind(i,2865))}},data:function(){return{valid:!1,Details:{},isUpdating:!1,isUpdatingSnackBar:!1,isloading:!0,file:[],FieldRules:[function(t){return!!t||"Field is required"}],isCheckingFile:!1,isUploading:!1,isLeaving:!1,file_name:[],counter:0,removeDialog:null,removeIndex:null,uploadPercentage:0,uploadIndex:null,rubricsDialog:!1}},computed:{extension:function(){return this.file[this.counter]?this.file[this.counter].name.split(".").pop():""}},methods:{UpdateClasswork:function(t){var e,i=this;return(e=s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.isUpdatingSnackBar=!0,i.isUpdating=!0,(e=new FormData).append("course_id",i.Details.course_id),e.append("duration",i.Details.duration),e.append("instruction",i.Details.instruction),e.append("id",i.Details.id),e.append("module_id",i.Details.module_id),e.append("points",i.Details.points),e.append("title",i.Details.title),e.append("type",i.Details.type),t.next=13,axios.post("/api/classwork/update",e).then((function(t){i.isUpdating=!1,i.toastSuccess("Classwork successfully updated")})).catch((function(t){}));case 13:case"end":return t.stop()}}),t)})),function(){var t=this,i=arguments;return new Promise((function(a,s){var l=e.apply(t,i);function o(t){n(l,a,s,o,r,"next",t)}function r(t){n(l,a,s,o,r,"throw",t)}o(void 0)}))})()},TestUpload:function(){this.$refs.fileInput.$refs.input.click(),this.isUploading=!0},onFileChange:function(t){var e;if(this.file[this.counter]=t[0],t[0].size>1e6){var i=.001*t[0].size;e=parseInt(.001*i)+"mb"}else{var a=.001*t[0].size;e=parseInt(a)+"kb"}this.file_name.push({name:t[0].name,size:e,extension:this.extension}),this.Details.attachment.push({name:t[0].name,size:e,attachment:null,extension:this.extension}),this.addFile()},DownLoadFile:function(t){window.open(t,"_blank")},addFile:function(){var t=this;console.log(this.Details.attachment.length),this.uploadIndex=this.Details.attachment.length-1;var e=new FormData;e.append("file",this.file[this.counter]),e.append("id",this.Details.id),e.append("name",this.file_name[this.counter].name),e.append("size",this.file_name[this.counter].size),e.append("extension",this.file_name[this.counter].extension),axios.post("/api/classwork/addAttachment",e,{onUploadProgress:function(e){var i=e.total,a=e.lengthComputable?i:null;null!=a&&(t.uploadPercentage=Math.round(100*e.loaded/a))}}).then((function(e){t.counter++}))},RemoveFile:function(t){var e=this;null!=this.Details.attachment[t].attachment?axios.put("/api/classwork/deleteAttachment/"+this.Details.id,{attachment:this.Details.attachment[t].attachment}).then((function(i){1==i.data.success&&e.Details.attachment.splice(t,1)})):this.Details.attachment.splice(t,1),this.removeDialog=!1}},beforeMount:function(){this.Details=this.classworkDetails},beforeRouteLeave:function(t,e,i){this.isLeaving=!0,i()}};const o=(0,i(1900).Z)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pa-1"},[i("v-overlay",{attrs:{value:t.isLeaving}},[i("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t._v(" "),i("v-dialog",{attrs:{persistent:"","max-width":"370"},model:{value:t.removeDialog,callback:function(e){t.removeDialog=e},expression:"removeDialog"}},[i("removeAttachment",{on:{toggleCancelDialog:function(e){t.removeDialog=!1},toggleconfirm:function(e){return t.RemoveFile(t.removeIndex)}}})],1),t._v(" "),t.isLeaving?t._e():i("v-container",{staticClass:"pa-0 pa-0",attrs:{"pa-0":"","ma-0":"",fluid:""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{cols:"12",md:"8",lg:"9",xl:"9"}},[i("vue-element-loading",{attrs:{active:t.isUpdating,spinner:"bar-fade-scale"}}),t._v(" "),i("v-card",{staticClass:"pa-5",attrs:{elevation:"1",outlined:""}},[i("v-form",{ref:"UpdateClassworkForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-row",[i("v-col",{staticClass:"mt-2",attrs:{cols:"12"}},[i("v-select",{attrs:{outlined:"",rules:t.FieldRules,items:["Objective Type","Subjective Type"],label:"Type"},model:{value:t.Details.type,callback:function(e){t.$set(t.Details,"type",e)},expression:"Details.type"}})],1),t._v(" "),i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("v-text-field",{attrs:{outlined:"",rules:t.FieldRules,label:"Title",type:"text",required:""},model:{value:t.Details.title,callback:function(e){t.$set(t.Details,"title",e)},expression:"Details.title"}})],1),t._v(" "),i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},[i("v-textarea",{attrs:{rules:t.FieldRules,outlined:"",label:"Instruction","auto-grow":""},model:{value:t.Details.instruction,callback:function(e){t.$set(t.Details,"instruction",e)},expression:"Details.instruction"}})],1),t._v(" "),"Objective Type"==t.Details.type?i("v-col",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{cols:"12"}},["Objective Type"==t.Details.type?i("v-text-field",{staticClass:"mb-0 pb-0 pt-0 mt-0",attrs:{rules:t.FieldRules,"append-icon":"mdi-timer",outlined:"",hint:"mins",label:"Time Limit",type:"number"},model:{value:t.Details.duration,callback:function(e){t.$set(t.Details,"duration",e)},expression:"Details.duration"}}):t._e()],1):t._e(),t._v(" "),"Subjective Type"==t.Details.type?i("v-col",{staticClass:"mb-0 pb-2 pt-0 mt-0",attrs:{cols:"12"}},["Subjective Type"==t.Details.type?i("v-text-field",{attrs:{rules:t.FieldRules,outlined:"",min:"0",label:"Points",type:"number"},model:{value:t.Details.points,callback:function(e){t.$set(t.Details,"points",e)},expression:"Details.points"}}):t._e()],1):t._e(),t._v(" "),"Subjective Type"==t.Details.type?i("v-col",{staticClass:"mb-0 pb-2 pt-0 mt-0",attrs:{cols:"12"}},[i("v-row",[i("v-col",{staticClass:"text-left"},[i("div",{staticClass:"text-h5"},[t._v("Rubrics")])]),t._v(" "),i("v-col",{staticClass:"text-right"},[i("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){t.rubricsDialog=!0}}},[i("v-icon",[t._v(" mdi-plus ")]),t._v("\n                                            Add\n                                        ")],1)],1)],1),t._v(" "),i("v-list",t._l(t.Details.rubrics,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-avatar",{attrs:{tile:""}},[i("div",{staticClass:"font-weight-bold text-h6"},[t._v("\n                                                    "+t._s(e.points)+"%\n                                                ")])]),t._v(" "),i("v-list-item-content",[i("v-list-item-title",{staticClass:"font-weight-medium"},[t._v(t._s(e.criteria_name))]),t._v(" "),i("v-list-item-subtitle",[t._v(t._s(e.description))])],1)],1)})),1)],1):t._e(),t._v(" "),i("v-col",{class:t.isUploading?"b-0 pb-0 pt-0 mt-0":"b-0 pb-0 pt-0 mt-0 ",attrs:{cols:"12"}},[i("v-btn",{staticClass:"mb-2",attrs:{color:"primary",text:"",rounded:""},on:{click:function(e){return t.$refs.inputFile.$refs.input.click()}}},[i("v-icon",{attrs:{left:""}},[t._v("\n                                            mdi-attachment\n                                        ")]),t._v("\n                                        Attach file\n                                    ")],1),t._v(" "),i("v-file-input",{ref:"inputFile",staticClass:"d-none",attrs:{multiple:""},on:{change:t.onFileChange}}),t._v(" "),i("v-list",{staticClass:"ma-0 pa-0"},t._l(t.Details.attachment,(function(e,a){return i("v-list-item",{key:a,staticClass:"ma-0 pa-0"},[i("v-list-item-avatar",[i("v-icon",{attrs:{large:"",color:"docx"==e.extension?"blue":"red"}},[t._v("\n                                                    "+t._s("docx"==e.extension?"mdi-file-word":"mdi-file-pdf")+"\n                                                ")])],1),t._v(" "),i("v-list-item-content",[i("v-hover",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.hover;return[i("v-list-item-title",{class:s?"blue--text":"",staticStyle:{cursor:"pointer"},on:{click:function(i){return t.DownLoadFile(e.attachment)}}},[t._v("\n                                                        "+t._s(e.name))])]}}],null,!0)}),t._v(" "),i("v-list-item-subtitle",[t.uploadIndex==a&&100!=t.uploadPercentage?i("v-progress-linear",{attrs:{rounded:"",value:t.uploadPercentage}}):t._e()],1)],1),t._v(" "),i("v-list-item-action",[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){t.removeDialog=!0,t.removeIndex=a}}},"v-btn",n,!1),s),[i("v-icon",[t._v("\n                                                                mdi-close\n                                                            ")])],1)]}}],null,!0)},[t._v(" "),i("span",[t._v("Remove file")])])],1)],1)})),1)],1),t._v(" "),i("v-col",{attrs:{cols:"12 text-left"}},[i("v-btn",{staticClass:"ma-2 white--text",attrs:{rounded:"",loading:t.isUpdating,color:"primary"},on:{click:function(e){return t.UpdateClasswork()}}},[t._v("\n                                        Update\n                                        "),i("v-icon",{attrs:{right:"",dark:""}},[t._v("\n                                            mdi-update\n                                        ")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.rubricsDialog,callback:function(e){t.rubricsDialog=e},expression:"rubricsDialog"}},[i("rubrics",{attrs:{rubrics:t.Details.rubrics,total_points:t.Details.points,title:t.Details.title},on:{CLoseRubricModal:function(e){t.rubricsDialog=!1},CriteriaSave:function(e){t.rubricsDialog=!1}}})],1)],1)],1)],1)}),[],!1,null,"922e5018",null).exports}}]);